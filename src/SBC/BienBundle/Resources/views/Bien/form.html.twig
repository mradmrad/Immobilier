<div id="page_content_inner">
    <script src="https://cdn.ckeditor.com/4.6.2/standard-all/ckeditor.js"></script>
    <style>
        .controls {
            margin-top: 10px;
            border: 1px solid transparent;
            border-radius: 2px 0 0 2px;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            height: 32px;
            outline: none;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        #pac-input {
            background-color: #fff;
            font-family: Roboto;
            font-size: 15px;
            font-weight: 300;
            margin-left: 12px;
            padding: 3px;
            margin-top: 10px;
            text-overflow: ellipsis;
            width: 300px;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBK8ckSg8MXqpU9fQoZG_yoMnLb1zPmWM&v=3.exp&libraries=places">
    </script>
    {{ form_start(form, {'attr':{'class':'uk-form-stacked', 'id':'form_validation'}}) }}
    {{ form_errors(form) }}

    <div class="uk-grid">

        <div class="uk-width-2-10">
            <div class="md-card">
                {#<div class="md-card-toolbar">#}
                {#<h3 class="md-card-toolbar-heading-text">#}
                {#Image principale#}
                {#</h3>#}
                {#</div>#}
                <div class="md-card-content">
                    <div class="uk-margin-bottom uk-text-center uk-position-relative">
                        {{ form_widget(form.mainPictureFile) }}
                        <span>     {{ form_errors(form.mainPictureFile) }} </span>
                    </div>
                </div>
            </div>
            <div class="md-card">
                <div class="md-card-content">
                    <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                        <div class="uk-width-large-2-2">
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                        <span class="uk-form-help-block">Type de bien<a id="addTypeBien"
                                                                                        title="Ajouter un type de bien"
                                                                                        data-uk-modal="{target:'#modal-addTypeBien'}">
                                                <i class="material-icons md-24">&#xE146;</i>
                                            </a></span>
                                    {{ form_widget(form.typeBien,
                                    {'attr': {'data-md-selectize':'', 'data-md-selectize-bottom':'' , 'onchange' : 'checkType()'}}) }}

                                </div>
                                <span>     {{ form_errors(form.typeBien) }} </span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Adresses
                    </h3>
                </div>
                <div class="md-card-content">
                    <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                        <div class="uk-width-large-2-2">
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Rue :</span>
                                        <span id="rue_span">
                                        {% if bien.address %}
                                            {{ bien.address.rue }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Sous ville :</span>
                                        <span id="sousVille_span">
                                        {% if bien.address %}
                                            {{ bien.address.rue.localite }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Ville :</span>
                                        <span id="ville_span">
                                    {% if bien.address %}
                                        {{ bien.address.rue.localite.ville }}
                                    {% else %}
                                        -
                                    {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Gouvernorat :</span>
                                        <span id="gouvernorat_span">
                                       {% if bien.address %}
                                           {{ bien.address.rue }}
                                       {% else %}
                                           -
                                       {% endif %}
                                    </span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="md-card">

                <div class="md-card-content">
                    <div class="uk-grid">

                        <div class="uk-width-medium-4-4">
                                            <span class="uk-form-help-block">
                                                - En cas ou c'est un appartement dans un complexe
                                            </span>
                        </div>
                        <div class="uk-width-medium-2-2">
                            <div class="uk-form-row">
                                <span class="uk-form-help-block"> {{ form_label(form.numApp, "N°") }}</span>

                                {{ form_widget(form.numApp) }}
                            </div>
                        </div>
                        <div class="uk-width-medium-4-4">
                            <div class="uk-form-row">
                                <span class="uk-form-help-block"> {{ form_label(form.residence, "Résidence") }}</span>
                                {{ form_widget(form.residence) }}
                            </div>
                        </div>
                        <div class="uk-width-medium-4-4">
                            <div class="uk-form-row">
                                <span class="uk-form-help-block">  {{ form_label(form.bloc, "Bloc") }}</span>
                                {{ form_widget(form.bloc) }}
                            </div>
                        </div>
                        <div class="uk-width-medium-1-2">
                            <div class="uk-form-row">
                                <span class="uk-form-help-block">  {{ form_label(form.etage, "Etage") }}</span>
                                {{ form_widget(form.etage) }}
                            </div>
                        </div>
                        <div class="uk-width-medium-1-2">
                            <div class="uk-form-row">
                                <span class="uk-form-help-block">    {{ form_label(form.nbrEtage, "App") }}</span>
                                {{ form_widget(form.nbrEtage) }}
                            </div>
                        </div>

                        {#<div class="uk-width-medium-2-2">#}
                        {#<div class="uk-form-row">#}
                        {#{{ form_label(form.espaceCommun, "Superficie couvert avec espace commun") }}#}
                        {#{{ form_widget(form.espaceCommun) }}#}
                        {#</div>#}
                        {#</div>#}
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-width-8-10">
            <div class="uk-grid">
                <div class="uk-width-7-10">
                    <div class="md-card">

                        <div class="md-card-content">
                            <div class="uk-grid">
                                <div class="uk-width-1-4">
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block"> Nom et prénom</span>
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block"> Tél</span>
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block"> Email</span>
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block">Propriétaire :</span>

                                </div>
                                <div class="uk-width-1-4">

                                    {% if bien.owners %}
                                        {% for owner in  bien.owners %}
                                            {{ owner.client.denomination }}
                                            {{ owner.client.prenom }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}

                                </div>
                                <div class="uk-width-1-4">
                                    {% if bien.owners %}
                                        {% for owner in  bien.owners %}
                                            {{ owner.client.tel }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    {% if bien.owners %}
                                        {% for owner in  bien.owners %}
                                            {{ owner.client.website }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block">Representé par :</span>
                                </div>
                                <div class="uk-width-1-4">
                                    {% if bien.owners %}
                                        {% for representant in  bien.representants %}
                                            {{ representant.representant.denomination }}
                                            {{ representant.representant.prenom }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    {% if bien.owners %}
                                        {% for representant in  bien.representants %}
                                            {{ representant.representant.tel }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    {% if bien.owners %}
                                        {% for representant in  bien.representants %}
                                            {{ representant.representant.website }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block">Locataire :</span>
                                </div>
                                <div class="uk-width-1-4">

                                    -
                                </div>
                                <div class="uk-width-1-4">
                                    -
                                </div>
                                <div class="uk-width-1-4">
                                    -
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-width-3-10">
                    <div class="md-card">

                        <div class="md-card-content">
                            <div class="uk-grid">
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block">    Date d'insertion : </span>
                                </div>
                                <div class="uk-width-1-2">
                                    {{ bien.creationDate|date('d-m-Y') }}
                                </div>
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block">  Inseré par :</span>
                                </div>
                                <div class="uk-width-1-2">
                                    {% if bien.createdBy %}
                                        {{ bien.createdBy }}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block">  Dernière modification :</span>
                                </div>
                                <div class="uk-width-1-2">
                                    {{ bien.updatedAt|date('d-m-Y') }}
                                </div>
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block"> Modifié par :</span>
                                </div>
                                <div class="uk-width-1-2">
                                    {% if bien.createdBy %}
                                        {{ bien.createdBy }}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ul class="uk-tab" data-uk-tab="{connect:'#tabs', swiping: false}" id="tabs_1">
                <li class="uk-active"><a href="#">Général</a></li>
                <li><a href="#">Détails</a></li>
                <li><a href="#">Photos & Papiers</a></li>
            </ul>
            <ul id="tabs" class="uk-switcher uk-margin">
                <li>

                    <div class="uk-grid uk-grid-medium" data-uk-grid-margin>

                        <div class="uk-width-5-10  uk-width-large-5-10">
                            <div class="md-card">
                                <div class="md-card-toolbar">
                                    <h3 class="md-card-toolbar-heading-text">
                                        {{ form_label(form.address, "Adresse") }}
                                    </h3>
                                </div>
                                <div class="md-card-content">
                                    <div class="uk-grid">
                                        <div class="uk-width-8-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group" style="width: 100%">
                                                        {#<span class="uk-input-group-addon">#}
                                                        {##}
                                                        {#</span>#}
                                                        <span class="uk-form-help-block">Gouvernorat<i
                                                                    class="material-icons">&#xE55E;</i></span>
                                                        <select placeholder="Choisir une gouvenrnorat"
                                                                id="gouvernorat"
                                                                data-md-selectize data-md-selectize-bottom
                                                                onchange="getVilles(this)">
                                                            {% if bien.address is not null %}
                                                                <option value="{{ bien.address.rue.localite.ville.gouvernorat.id }}">
                                                                    {{ bien.address.rue.localite.ville.gouvernorat.name }}
                                                                </option>
                                                            {% endif %}
                                                            <option></option>
                                                            {% for gouvernorat in gouvernorats %}
                                                                <option value="{{ gouvernorat.id }}"> {{ gouvernorat.name }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-2-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <a hidden id="modifierGouvernorat"
                                                       title="Modifier la gouvernorat"
                                                       data-uk-modal="{target:'#modal-modifierGouvernorat'}">
                                                        <i class="material-icons md-24">&#xE254;</i>
                                                    </a>
                                                    <a hidden id="supprimerGouvernorat"
                                                       title="Supprimer la gouvernorat"
                                                       data-uk-modal="{target:'#modal-supprimerGouvernorat'}"
                                                       onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette gouvernorat ?',
                                                            function(){ supprimerGouvernorat($('#gouvernorat').val());});">
                                                        <i class="material-icons md-24">&#xE872;</i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid">
                                        <div class="uk-width-8-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group" style="width:100%;">
                                                        {#<span class="uk-input-group-addon">#}

                                                        {#</span>#}
                                                        <span class="uk-form-help-block">Ville<i class="material-icons">
                                                                &#xE55F;</i></span>
                                                        <select placeholder="Choisir une ville" id="ville"
                                                                data-md-selectize
                                                                data-md-selectize-bottom
                                                                onchange="getLocalites(this)">
                                                            {% if bien.id is not null %}
                                                                <option value="{{ bien.address.rue.localite.ville.id }}">
                                                                    {{ bien.address.rue.localite.ville.name }}
                                                                </option>
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-2-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <a hidden id="ajouterVille" title="Ajouter une ville"
                                                       data-uk-modal="{target:'#modal-ajouterVille'}">
                                                        <i class="material-icons md-24">&#xE146;</i>
                                                    </a>
                                                    <a hidden id="modifierVille" title="Modifier la ville"
                                                       data-uk-modal="{target:'#modal-modifierVille'}">
                                                        <i class="material-icons md-24">&#xE254;</i>
                                                    </a>
                                                    <a hidden id="supprimerVille" title="Supprimer la ville"
                                                       data-uk-modal="{target:'#modal-supprimerVille'}"
                                                       onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette ville ?',
                                                                    function(){ supprimerVille($('#ville').val());});">
                                                        <i class="material-icons md-24">&#xE872;</i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid">
                                        <div class="uk-width-8-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group" style="width: 100%">
                                                        {#<span class="uk-input-group-addon">#}

                                                        {#</span>#}
                                                        <span class="uk-form-help-block">Localité<i
                                                                    class="material-icons">&#xE569;</i></span>
                                                        <select placeholder="Choisir une localité" id="localite"
                                                                data-md-selectize data-md-selectize-bottom
                                                                onchange="getRues(this)">
                                                            {% if bien.id is not null %}
                                                                <option value="{{ bien.address.rue.localite.id }}">
                                                                    {{ bien.address.rue.localite.name }}
                                                                </option>
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-2-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <div class="uk-input-group">
                                                        <a hidden id="ajouterLocalite"
                                                           title="Ajouter une localité"
                                                           data-uk-modal="{target:'#modal-ajouterLocalite'}">
                                                            <i class="material-icons md-24">&#xE146;</i>
                                                        </a>
                                                        <a hidden id="modifierLocalite"
                                                           title="Modifier la localité"
                                                           data-uk-modal="{target:'#modal-modifierLocalite'}">
                                                            <i class="material-icons md-24">&#xE254;</i>
                                                        </a>
                                                        <a hidden id="supprimerLocalite"
                                                           title="Supprimer la localité"
                                                           data-uk-modal="{target:'#modal-supprimerLocalite'}"
                                                           onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette localité ?',
                                                                        function(){ supprimerLocalite($('#localite').val());});">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid">
                                        <div class="uk-width-8-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group" style="width:100%;">
                                                        {#<span class="uk-input-group-addon">  </span>#}
                                                        <span class="uk-form-help-block">Rue<i
                                                                    class="material-icons">&#xE566;</i></span>
                                                        <select placeholder="Choisir une rue" id="rue"
                                                                name="sbc_geotunisiebundle_adresse_rue"
                                                                data-md-selectize data-md-selectize-bottom
                                                                onchange="getAdresses(this)">
                                                            {% if bien.id is not null %}
                                                                <option value="{{ bien.address.rue.id }}">
                                                                    {{ bien.address.rue.name }}
                                                                </option>
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-2-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <div class="uk-input-group">
                                                        <a hidden id="ajouterRue" title="Ajouter une rue"
                                                           data-uk-modal="{target:'#modal-ajouterRue'}">
                                                            <i class="material-icons md-24">&#xE146;</i>
                                                        </a>
                                                        <a hidden id="modifierRue" title="Modifier la rue"
                                                           data-uk-modal="{target:'#modal-modifierRue'}">
                                                            <i class="material-icons md-24">&#xE254;</i>
                                                        </a>
                                                        <a hidden id="supprimerRue" title="Supprimer la rue"
                                                           data-uk-modal="{target:'#modal-supprimerRue'}"
                                                           onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette rue ?',
                                                                    function(){ supprimerRue($('#rue').val());});">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid">
                                        <div class="uk-width-8-10">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group" style="width:100%;">
                                                        {#<span class="uk-input-group-addon">#}
                                                        {##}
                                                        {#</span>#}
                                                        <span class="uk-form-help-block">Numéro<i
                                                                    class="material-icons">&#xE84F;</i></span>
                                                        {{ form_widget(form.address
                                                        ,{'attr': {'data-md-selectize':'', 'data-md-selectize-bottom':''}}) }}
                                                        <span> {{ form_errors(form.address) }} </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-2-10">
                                            <div class="parsley-row" style="padding-top: 22px;">
                                                <div class="uk-form-row">
                                                    <div class="uk-input-group">
                                                        <a hidden id="ajouterAdresse"
                                                           title="Ajouter une adresse"
                                                           data-uk-modal="{target:'#modal-ajouterAdresse'}">
                                                            <i class="material-icons md-24">&#xE146;</i>
                                                        </a>
                                                        <a hidden id="modifierAdresse"
                                                           title="Modifier l'adresse"
                                                           data-uk-modal="{target:'#modal-modifierAddresse'}">
                                                            <i class="material-icons md-24">&#xE254;</i>
                                                        </a>
                                                        <a hidden id="supprimerAdresse"
                                                           title="Supprimer l'adresse"
                                                           data-uk-modal="{target:'#modal-supprimerAdresse'}"
                                                           onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette adresse ?',
                                                                     function(){ supprimerAdresse($('#adresse').val());});">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>

                        </div>
                        <div class="uk-width-xLarge-5-10  uk-width-large-5-10">
                            <div class="md-card">
                                <div class="md-card-toolbar">
                                    <h3 class="md-card-toolbar-heading-text">
                                        Map
                                        {#{{ form_widget(form.ismapped#}
                                        {#, {'attr': {'data-md-icheck': ''}}#}
                                        {#) }}#}
                                    </h3>
                                </div>
                                <div class="md-card-content large-padding">
                                    <div id="">
                                        <div id="map-canvas" style="width: 100%; height: 375px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="md-card">
                        <div class="md-card-toolbar">
                            <h3 class="md-card-toolbar-heading-text">
                                Responsables de la propriété
                            </h3>
                        </div>
                        <div class="md-card-content large-padding">
                            <div class="uk-grid">
                                {#<div class="uk-width-1-4">#}

                                    {#En qualité de :#}
                                {#</div>#}
                                {#<div class="uk-width-3-4">#}

                                    {#{{ form_widget(form.representants) }}#}
                                {#</div>#}

                            </div>

                            <div class="uk-grid">
                                <div class="uk-width-1-4">

                                    Propriétaire <a id="addOwner"><i class="material-icons md-24">&#xE146;</i></a>
                                    :
                                </div>
                                <div style="border-bottom:1px solid" class="uk-width-3-4">
                                    <div class="md-card-content large-padding">
                                        {% if bien.id == 0 or form.owners|length ==0 %}
                                            {{ form_widget(form.owners) }}
                                        {% else %}
                                            <div id="{{ form.owners.vars.id }}" class="uk-grid"
                                                 data-uk-grid-margin
                                                 data-prototype="{{ form_widget(form.owners.vars.prototype)|e('html_attr') }}">
                                                {% for owner in form.owners %}
                                                    <div class="uk-width-medium-2-4 blockSection">
                                                        <div class="uk-form-row">
                                                            <div class="parsley-row">
                                                                {{ form_label(owner.client,   "Propriétaire"  ) }}
                                                                {{ form_widget(owner.client) }}
                                                                <span>{{ form_errors(owner.client) }}</span>
                                                            </div>
                                                        </div>
                                                        <a class="btn-close">
                                                            <i class="material-icons md-24">account_circle</i>
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% endif %}

                                    </div>
                                </div>

                                <div class="uk-width-1-4">

                                    Représenté par <a id="addRepresentant"><i class="material-icons md-24">&#xE146;</i></a>
                                    :
                                </div>
                                <div style="border-bottom:1px solid"  class="uk-width-2-4">
                                    <div class="md-card-content large-padding">
                                        {% if bien.id == 0 or form.representants|length ==0 %}
                                            {{ form_widget(form.representants) }}
                                        {% else %}
                                            <div id="{{ form.representants.vars.id }}" class="uk-grid"
                                                 data-uk-grid-margin
                                                 data-prototype="{{ form_widget(form.representants.vars.prototype)|e('html_attr') }}">
                                                {% for rep in form.representants %}
                                                    <div class="uk-width-medium-2-4 blockSection">
                                                        <div class="uk-form-row">
                                                            <div class="parsley-row">
                                                                {{ form_label(rep.client,   "Propriétaire"  ) }}
                                                                {{ form_widget(rep.client) }}
                                                                <span>{{ form_errors(rep.client) }}</span>
                                                            </div>
                                                        </div>
                                                        <a class="btn-close">
                                                            <i class="material-icons md-24">account_circle</i>
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% endif %}

                                    </div>
                                </div>
                                <div class="uk-width-1-4">

                                        <div class="uk-input-group" style="width:100%;">
                                            {#<span class="uk-input-group-addon">#}
                                            {##}
                                            {#</span>#}
                                            <span class="uk-form-help-block">Comme</span>
                                            {{ form_widget(form.representantscomme) }}
                                            <span> {{ form_errors(form.representantscomme) }} </span>

                                    </div>


                                </div>
                                <div class="uk-width-1-4">

                                    Locataires <a id="addLocataire"><i class="material-icons md-24">&#xE146;</i></a>
                                    :
                                </div>
                                <div  style="border-bottom:1px solid" class="uk-width-3-4">
                                    <div class="md-card-content large-padding">
                                        {% if bien.id == 0 or form.locataires|length ==0 %}
                                            {{ form_widget(form.locataires) }}
                                        {% else %}
                                            <div id="{{ form.locataires.vars.id }}" class="uk-grid"
                                                 data-uk-grid-margin
                                                 data-prototype="{{ form_widget(form.locataires.vars.prototype)|e('html_attr') }}">
                                                {% for loc in form.locataires %}
                                                    <div class="uk-width-medium-2-4 blockSection">
                                                        <div class="uk-form-row">
                                                            <div class="parsley-row">
                                                                {{ form_label(loc.client,   "Propriétaire"  ) }}
                                                                {{ form_widget(loc.client) }}
                                                                <span>{{ form_errors(loc.client) }}</span>
                                                            </div>
                                                        </div>
                                                        <a class="btn-close">
                                                            <i class="material-icons md-24">account_circle</i>
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% endif %}

                                    </div>
                                </div>

                            </div>

                            {#<div id="procurations_div" class="uk-grid">#}
                                {#<div class="uk-width-1-4">#}
                                    {#Procurations <a id="addProcuration"><i class="material-icons md-24">&#xE146;</i></a>#}

                                {#</div>#}
                                {#<div class="uk-width-3-4">#}
                                    {#<div class="md-card-content large-padding">#}
                                        {#{% if bien.id == 0 or form.procurations|length ==0 %}#}
                                            {#{{ form_widget(form.procurations) }}#}
                                        {#{% else %}#}
                                            {#<div id="{{ form.procurations.vars.id }}" class="uk-grid"#}
                                                 {#data-uk-grid-margin#}
                                                 {#data-prototype="{{ form_widget(form.procurations.vars.prototype)|e('html_attr') }}">#}
                                                {#{% for procuration in form.procurations %}#}
                                                    {#<div class="uk-width-medium-1-4 blockSection">#}
                                                        {#<div class="uk-form-row">#}
                                                            {#<div class="parsley-row">#}
                                                                {#{{ form_label(procuration.dateProcuration,   "Date procuration"  ) }}#}
                                                                {#{{ form_widget(procuration.dateProcuration) }}#}
                                                                {#<span>{{ form_errors(procuration.dateProcuration) }}</span>#}
                                                            {#</div>#}
                                                        {#</div>#}
                                                        {#<div class="uk-form-row">#}
                                                            {#<div class="parsley-row">#}
                                                                {#{{ form_label(procuration.lieu,   "Lieu"  ) }}#}
                                                                {#{{ form_widget(procuration.lieu) }}#}
                                                                {#<span> {{ form_errors(procuration.lieu) }}</span>#}
                                                            {#</div>#}
                                                        {#</div>#}

                                                        {#<div class="uk-form-row">#}
                                                            {#<div class="parsley-row">#}
                                                                {#{{ form_label(procuration.representant,   "Donne procuration à"  ) }}#}
                                                                {#{{ form_widget(procuration.representant) }}#}
                                                                {#<span>{{ form_errors(procuration.representant) }}</span>#}
                                                            {#</div>#}
                                                        {#</div>#}
                                                        {#<a class="btn-close">#}
                                                            {#<i class="material-icons md-24">&#xE872;</i>#}
                                                        {#</a>#}
                                                    {#</div>#}
                                                {#{% endfor %}#}
                                            {#</div>#}
                                        {#{% endif %}#}


                                    {#</div>#}
                                {#</div>#}
                            {#</div>#}
                            {#<div id="societe_div" class="uk-grid">#}
                                {#<div class="uk-width-1-4">Representant :</div>#}
                                {#<div class="uk-width-3-4">#}
                                    {#<div class="uk-input-group">#}
                                                   {#<span class="uk-input-group-addon">#}
                                        {#<label>Poste</label></span>#}
                                        {#{{ form_widget(form.societePoste) }}#}
                                    {#</div>#}
                                    {#<div class="uk-input-group">#}
                                                   {#<span class="uk-input-group-addon">#}
                                        {#<label>Nom et prénom</label></span>#}
                                        {#{{ form_widget(form.representantNom) }}#}
                                    {#</div>#}
                                {#</div>#}

                            {#</div>#}

                        </div>

                    </div>

                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">
                        <div class="uk-grid">
                            <div class="uk-width-1-2">
                                <div class="md-card">
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Superficie
                                        </h3>
                                    </div>
                                    <div class="md-card-content">
                                        <div class="uk-grid">
                                            <div class="uk-width-1-1">
                                                <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                    {{ form_label(form.totalArea,   "Superficie terrain"  ) }}</span>
                                                    {{ form_widget(form.totalArea, {'attr': {'class': 'md-input numeric'}}) }}
                                                    <span>     {{ form_errors(form.totalArea) }} </span>
                                                </div>
                                            </div>
                                            <div class="uk-width-1-1">
                                                <div class="uk-input-group">
                                                   <span class="uk-input-group-addon">
                                                       {{ form_label(form.coveredArea,   "Superficie couverte"  ) }}</span>
                                                    {{ form_widget(form.coveredArea, {'attr': {'class': 'md-input numeric'}}) }}
                                                    <span>     {{ form_errors(form.coveredArea) }} </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="md-card">
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Statut juridique
                                        </h3>
                                    </div>
                                    <div class="md-card-content large-padding">
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                   <span class="uk-input-group-addon">
                                                  {{ form_label(form.title,   "Titre de propriété"  ) }}</span>
                                                {{ form_widget(form.title,
                                                {'attr': {'class': 'md-input'}}) }}
                                                <span>     {{ form_errors(form.title) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                   <span class="uk-input-group-addon">
                                                  {{ form_label(form.nomProp,   "Nom propriété"  ) }}</span>
                                                {{ form_widget(form.nomProp) }}
                                                <span>     {{ form_errors(form.nomProp) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                   <span class="uk-input-group-addon">
                                                  {{ form_label(form.provenance,   "Provenance"  ) }}</span>
                                                {{ form_widget(form.provenance) }}
                                                <span>     {{ form_errors(form.provenance) }} </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1-2">
                                <div class="md-card">
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Statut de construction
                                        </h3>
                                    </div>
                                    <div class="md-card-content large-padding">
                                        <div class="uk-width-large-2-2">

                                            <div class="uk-input-group">
                                                   <span class="uk-form-help-block">
                                                {{ form_label(form.statutConstruction,   "Statut de construction" ) }}</span>
                                                {{ form_widget(form.statutConstruction) }}
                                                <span>     {{ form_errors(form.statutConstruction) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-width-large-2-2">

                                            <div class="uk-input-group">
                                                   <span class="uk-input-group-addon">
                                                {{ form_label(form.construction,   "Date de contruction" ) }}</span>
                                                {{ form_widget(form.construction) }}
                                                <span>     {{ form_errors(form.construction) }} </span>
                                            </div>


                                        </div>
                                        <div class="uk-width-large-2-2">

                                            <div class="uk-input-group">
                                                   <span class="uk-input-group-addon">
                                                {{ form_label(form.renovation,   "Date de rénovation" ) }}</span>
                                                {{ form_widget(form.renovation) }}
                                                <span>     {{ form_errors(form.renovation) }} </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="md-card">
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Urbanisme
                                        </h3>
                                    </div>
                                    <div class="md-card-content large-padding">
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                    {{ form_label(form.zone,   "Zone"  ) }}</span>
                                                {{ form_widget(form.zone,
                                                {'attr': {'class': 'md-input'}}) }}
                                                <span>     {{ form_errors(form.zone) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                    {{ form_label(form.coSol,   "Coefficient d'occupation du sol"  ) }}</span>
                                                {{ form_widget(form.coSol) }}
                                                <span>     {{ form_errors(form.coSol) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                    {{ form_label(form.coFinanciere,   "Coefficient d'occupation financière"  ) }}</span>
                                                {{ form_widget(form.coFinanciere) }}
                                                <span>     {{ form_errors(form.coFinanciere) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                    {{ form_label(form.usage,   "usage"  ) }}</span>
                                                {{ form_widget(form.usage) }}
                                                <span>     {{ form_errors(form.usage) }} </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        {#<div class="md-card">#}
                            {#<div class="md-card-toolbar">#}
                                {#<h3 class="md-card-toolbar-heading-text">#}
                                    {#{{ form_label(form.description, "Texte descriptif (Site)") }}#}
                                {#</h3>#}
                            {#</div>#}
                            {#<div class="md-card-content large-padding">#}
                                {#<div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>#}
                                    {#<div class="uk-width-large-2-2">#}
                                        {#<div class="uk-form-row">#}
                                            {#<div class="uk-input-group">#}
                                                    {#<span class="uk-input-group-addon">#}
                                                {#{{ form_label(form.titre,'Titre du bien') }}</span>#}
                                                {#{{ form_widget(form.titre) }}#}
                                                {#<span> {{ form_errors(form.titre) }} </span>#}
                                            {#</div>#}
                                        {#</div>#}
                                    {#</div>#}
                                    {#<div class="uk-width-large-2-2">#}
                                        {#<div class="uk-form-row">#}
                                            {#<div class="uk-input-group">#}
                                                  {#<span class="uk-form-help-block">#}
                                        {#{{ form_label(form.vitrine,   "Description"  ) }}</span>#}
                                                {#{{ form_widget(form.description, {'attr': {'class': 'md-input', 'name':'description',#}
                                                    {#'cols':'10', 'rows':'8', 'data-parsley-trigger':'keyup',#}
                                                    {#'data-parsley-validation-threshold':'10'}}) }}#}
                                                {#<span> {{ form_errors(form.description) }} </span>#}
                                            {#</div>#}
                                        {#</div>#}
                                    {#</div>#}
                                {#</div>#}
                                {#<div class="uk-width-large-2-2">#}
                                    {#<div class="uk-input-group">#}
                                                    {#<span class="uk-form-help-block">#}
                                        {#{{ form_label(form.vitrine,   "Texte fiche vitrine"  ) }}</span>#}
                                        {#{{ form_widget(form.vitrine, {'attr': {'class': 'md-input', 'name':'description',#}
                                            {#'cols':'10', 'rows':'8', 'data-parsley-trigger':'keyup',#}
                                            {#'data-parsley-validation-threshold':'10'}}) }}#}

                                    {#</div>#}
                                {#</div>#}
                            {#</div>#}

                        {#</div>#}
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Autre détails
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>

                                    <div class="uk-width-large-1-2">

                                        <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                            {{ form_label(form.bedroom,   "Nombre de chambre" ) }}</span>
                                            {{ form_widget(form.bedroom, {'attr': {'class': 'md-input'}}) }}
                                            <span>     {{ form_errors(form.bedroom) }} </span>
                                        </div>


                                    </div>
                                    <div class="uk-width-large-1-2">
                                        <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                            {{ form_label(form.piece,   "Nombre de pièce"  ) }}</span>
                                            {{ form_widget(form.piece, {'attr': {'class': 'md-input'}}) }}

                                            <span>     {{ form_errors(form.piece) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-1-2">

                                        <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                            {{ form_label(form.bathroom,   "Nombre de SDB" ) }}</span>
                                            {{ form_widget(form.bathroom, {'attr': {'class': 'md-input'}}) }}
                                            <span>     {{ form_errors(form.bathroom) }} </span>
                                        </div>


                                    </div>
                                    <div class="uk-width-large-1-2">
                                        <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                            {{ form_label(form.sde,   "Nombre de SDE"  ) }}</span>
                                            {{ form_widget(form.sde, {'attr': {'class': 'md-input'}}) }}

                                            <span>     {{ form_errors(form.sde) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-1-2">
                                        <div class="parsley-row">
                                        <span class="uk-form-help-block">Equipements(Cliquez pour selectionner)
                                          <a id="addEquipement" title="Ajouter un équipement"
                                             data-uk-modal="{target:'#modal-addEquipement'}">
                                              <i class="material-icons md-24">&#xE146;</i>
                                          </a>
                                        </span>
                                            <ul class="equipements-list">
                                                {% for elem in form.equipements %}
                                                    <li>
                                                            <span>
                                                            {{ form_widget(elem) }}
                                                                {{ form_label(elem) }}
                                                            </span>
                                                    </li>
                                                {% endfor %}
                                            </ul>

                                            <span>     {{ form_errors(form.equipements) }} </span>

                                        </div>
                                    </div>

                                    {#<div class="uk-width-large-2-2">#}
                                        {#<div class="parsley-row">#}
                                            {#{{ form_label(form.exterieur,   "A l'extérieur"  ) }}#}
                                            {#{{ form_widget(form.exterieur) }}#}

                                        {#</div>#}
                                    {#</div>#}

                                </div>
                            </div>
                        </div>


                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>

                                        <div class="uk-width-1-2">
                                            <div class="md-card">
                                                <div class="md-card-toolbar">
                                                    <h3 class="md-card-toolbar-heading-text">
                                                        Terrain
                                                    </h3>
                                                </div>
                                                <div class="md-card-content large-padding">
                                            <div class="uk-width-2-2">

                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                                    {{ form_label(form.formeTerrain,   "Forme de terrain" ) }}</span>
                                                    {{ form_widget(form.formeTerrain) }}
                                                    <span>     {{ form_errors(form.formeTerrain) }} </span>
                                                </div>
                                            </div>
                                            <div class="uk-width-2-2">

                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                                    {{ form_label(form.delimination,   "Délimination du terrain par rapport aux propriètés voisines " ) }}</span>
                                                    {{ form_widget(form.delimination) }}
                                                    <span>     {{ form_errors(form.delimination) }} </span>
                                                </div>
                                            </div>
                                                    </div>
                                                </div>
                                            <div class="md-card">
                                                {#<div class="md-card-toolbar">#}
                                                    {#<h3 class="md-card-toolbar-heading-text">#}
                                                        {##}
                                                    {#</h3>#}
                                                {#</div>#}
                                                <div class="md-card-content large-padding">
                                                    <div class="uk-width-large-2-2">

                                                        <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                                            {{ form_label(form.orientation,   "Orientation" ) }}</span>
                                                            {{ form_widget(form.orientation) }}
                                                            <span>     {{ form_errors(form.orientation) }} </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-1-2">
                                            <div class="md-card">
                                                <div class="md-card-toolbar">
                                                <h3 class="md-card-toolbar-heading-text">
                                                Facade
                                                </h3>
                                                </div>
                                                <div class="md-card-content large-padding">
                                                    <div class="uk-width-large-2-2">

                                                        <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                            {{ form_label(form.largeurFacade,   "Largeur facade" ) }}</span>
                                                            {{ form_widget(form.largeurFacade) }}
                                                            <span>     {{ form_errors(form.largeurFacade) }} </span>
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-large-2-2">

                                                        <div class="uk-input-group">
                                                    <span class="uk-input-group-addon">
                                                            {{ form_label(form.profondeurFacade,   "Profondeur facade" ) }}</span>
                                                            {{ form_widget(form.profondeurFacade) }}
                                                            <span>     {{ form_errors(form.profondeurFacade) }} </span>
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-large-2-2">
                                                        <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                                            {{ form_label(form.facade,   "Facade"  ) }}</span>
                                                            {{ form_widget(form.facade) }}

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="md-card">

                                                <div class="md-card-content large-padding">

                                                    <div class="uk-width-large-2-2">
                                                        <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                                            {{ form_label(form.panorama,   "Panorama visuel"  ) }}</span>
                                                            {{ form_widget(form.panorama) }}

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    <div class="uk-width-large-2-2">
                                        <div class="md-card">
                                            {#<div class="md-card-toolbar">#}
                                            {#<h3 class="md-card-toolbar-heading-text">#}
                                            {##}
                                            {#</h3>#}
                                            {#</div>#}
                                            <div class="md-card-content large-padding">
                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                            {{ form_label(form.exterieur,   "A l'exterieur" ) }}</span>
                                                    {{ form_widget(form.exterieur) }}
                                                    <span>     {{ form_errors(form.exterieur) }} </span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>





                                    <div class="uk-width-large-1-2">
                                        <div class="md-card">
                                            {#<div class="md-card-toolbar">#}
                                            {#<h3 class="md-card-toolbar-heading-text">#}
                                            {##}
                                            {#</h3>#}
                                            {#</div>#}
                                            <div class="md-card-content large-padding">
                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                           {{ form_label(form.stationnement,   "Accées & Stationnement" ) }}</span>
                                                    {{ form_widget(form.stationnement) }}
                                                    <span>     {{ form_errors(form.stationnement) }} </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Equipement de voirie et canalisation
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>

                                    <div class="uk-width-large-3-4">
                                        Présence d'élétricité STEG
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.steg) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'eau de ville SONEDE
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.sonede) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence de gaz de ville
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.gaz) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'égout ONAS
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.onas) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'éclairage publique
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.eclairage) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence de réseau téléphonique
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.telephone) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'équipement routiers
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.route) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence trottoires
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.canalisations.trottoir) }}
                                    </div>


                                </div>
                            </div>
                        </div>

                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Environnement & voisinage
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid uk-grid-divider uk-grid-medium">
                                    <div class="uk-width-large-2-2">
                                        <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                           {{ form_label(form.style,   "Style des constructions existantes dans le secteur" ) }}</span>
                                            {{ form_widget(form.style) }}
                                            <span>     {{ form_errors(form.style) }} </span>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="uk-grid">
                            <div class="uk-width-1-2">
                                <div class="md-card">
                                    <div class="md-card-content">
                                        <div class="uk-grid uk-grid-divider uk-grid-medium">
                                            <div class="uk-width-large-2-2">
                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                           {{ form_label(form.paysage,   "Paysages" ) }}</span>
                                                    {{ form_widget(form.paysage) }}
                                                    <span>     {{ form_errors(form.paysage) }} </span>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1-2">
                                <div class="md-card">
                                    <div class="md-card-content">
                                        <div class="uk-grid uk-grid-divider uk-grid-medium">
                                            <div class="uk-width-large-2-2">
                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                           {{ form_label(form.loisir,   "Loisir" ) }}</span>
                                                    {{ form_widget(form.loisir) }}
                                                    <span>     {{ form_errors(form.loisir) }} </span>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-2-2" style="margin-top: 3%">
                                <div class="md-card">

                                    <div class="md-card-content large-padding">
                                        <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                            <div class="parsley-row">
                                        <span class="uk-form-help-block">Proximité de services

                                        </span>
                                                <ul class="equipements-list" style="height: auto !important">
                                                    {% for elem in form.proximite %}
                                                        <li>
                                                            <span>
                                                            {{ form_widget(elem) }}
                                                                {{ form_label(elem) }}
                                                            </span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>

                                                <span>     {{ form_errors(form.proximite) }} </span>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="uk-width-2-2">
                                <div class="md-card">

                                    <div class="md-card-content">
                                        <div class="uk-grid uk-grid-divider uk-grid-medium">
                                            <div class="uk-width-large-2-2">
                                                <div class="uk-input-group">
                                                    <span class="uk-form-help-block">
                                           {{ form_label(form.distanceCV,   "Distance du centre ville" ) }}</span>
                                                    {{ form_widget(form.distanceCV) }}
                                                    <span>     {{ form_errors(form.distanceCV) }} </span>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="uk-width-2-2">
                                <div class="md-card">

                                    <div class="md-card-content large-padding">
                                        <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                            <div class="parsley-row">
                                        <span class="uk-form-help-block">Influence génante de voisinage

                                        </span>
                                                <ul class="equipements-list" style="height: auto !important">
                                                    {% for elem in form.influence %}
                                                        <li>
                                                            <span>
                                                            {{ form_widget(elem) }}
                                                                {{ form_label(elem) }}
                                                            </span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>

                                                <span>     {{ form_errors(form.influence) }} </span>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>



                    </div>
                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Gallerie
                                    <a id="addPicture"><i class="material-icons md-24">&#xE146;</i></a>
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                {% if bien.id == 0 or form.pictures|length ==0 %}
                                    {{ form_widget(form.pictures) }}
                                {% else %}
                                    <div id="{{ form.pictures.vars.id }}" class="uk-grid"
                                         data-uk-grid-margin
                                         data-prototype="{{ form_widget(form.pictures.vars.prototype)|e('html_attr') }}">
                                        {% for bienPicture in form.pictures %}
                                            <div class="uk-width-medium-1-4 blockSection">
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        Image
                                                        {% set urle = asset('fichiers/biens/pictures/')~  bien.bien.pictures.get(loop.index-1).fileName %}
                                                        {{ form_widget(bienPicture.file,
                                                        {'attr': {'class': 'dropify-fr', 'data-default-file': urle }}) }}
                                                        <span>{{ form_errors(bienPicture.file) }}</span>
                                                    </div>
                                                </div>
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        {{ form_label(bienPicture.description, "Déscription de l'image") }}
                                                        {{ form_widget(bienPicture.description, {'attr': {'class': 'md-input'}}) }}
                                                        <span>{{ form_errors(bienPicture.description) }}</span>
                                                    </div>
                                                </div>
                                                <a class="btn-close">
                                                    <i class="material-icons md-24">&#xE872;</i>
                                                </a>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}

                            </div>
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Papiers
                                    <a id="addPaper"><i class="material-icons md-24">&#xE146;</i></a>
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">

                                {% if bien.id == 0 or form.papers|length ==0 %}



                                    {{ form_widget(form.papers) }}

                                {% else %}
                                    <div id="{{ form.papers.vars.id }}" class="uk-grid"
                                         data-uk-grid-margin
                                         data-prototype="{{ form_widget(form.papers.vars.prototype)|e('html_attr') }}">
                                        {% for bienPicture in form.papers %}
                                            <div class="uk-width-medium-1-4 blockSection">
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        Image
                                                        {% set urle = asset('fichiers/biens/pictures/')~  bien.bien.papers.get(loop.index-1).fileName %}
                                                        {{ form_widget(bienPicture.file,
                                                        {'attr': {'class': 'dropify-fr', 'data-default-file': urle }}) }}
                                                        <span>{{ form_errors(bienPicture.file) }}</span>
                                                    </div>
                                                </div>
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        {{ form_label(bienPicture.description, "Déscription de l'image") }}
                                                        {{ form_widget(bienPicture.description, {'attr': {'class': 'md-input'}}) }}
                                                        <span>{{ form_errors(bienPicture.description) }}</span>
                                                    </div>
                                                </div>
                                                <a class="btn-close">
                                                    <i class="material-icons md-24">&#xE872;</i>
                                                </a>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>

                        </div>
                    </div>
                </li>
            </ul>

        </div>
    </div>
    {{ form_widget(form.longitude) }}
    {{ form_widget(form.latitude) }}
    <div class="md-fab-wrapper">
        <button class="md-fab md-fab-accent md-fab-wave-light" href="#" id="bien_add"
                data-uk-tooltip="{cls:'uk-tooltip-small',pos:'left'}" title="Enregistrer" name="save">
            <i class="material-icons">&#xE161;</i>
        </button>
    </div>
    {#{{ form_rest(form) }}#}
    {{ form_end(form, {'render_rest': false}) }}
    {#{{ form_end(form) }}#}
    <div class="uk-modal" id="modal-ajouterVille">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une ville</h2></div>
            <form method="POST" name="form_ville" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="gov"></label>
                                <input id="gov" class="md-input" name="" type="text" value="" readonly/>
                                <input id="govValue" name="gouvernoratt" type="hidden" value=""/>
                                <span class="uk-form-help-block">Gouvernorat</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55F;</i>
                                </span>
                                <label for="villeName">Ville</label>
                                <input id="villeName" class="md-input" name="villeName" type="text" value=""
                                       data-parsley-ville="3" required/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE0DA;</i>
                                </span>
                                <label for="postCodeName">Code postal</label>
                                <input id="postCodeName" class="md-input" name="postCodeName" type="number" value=""
                                       data-parsley-postcode="3" required data-parsley-maxlength="4"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newVille(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-ajouterLocalite">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une localité</h2></div>
            <form method="POST" name="form_localite" action="#">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55F;</i>
                                </span>
                                <label for="vill"></label>
                                <input id="vill" class="md-input" name="" type="text" value="" readonly/>
                                <input id="villValue" name="villee" type="hidden" value=""/>
                                <span class="uk-form-help-block">Ville</span>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE569;</i>
                                </span>
                                <label for="localiteName">Localité</label>
                                <input id="localiteName" class="md-input" name="localiteName" type="text" value=""
                                       data-parsley-localite="3" required/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newLocalite()">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-ajouterRue">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une rue</h2></div>
            <form method="POST" name="form_rue" action="#">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE569;</i>
                                </span>
                                <label for="local"></label>
                                <input id="local" class="md-input" name="" type="text" value="" readonly/>
                                <input id="localValue" name="localitee" type="hidden" value=""/>
                                <span class="uk-form-help-block">Localité</span>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE566;</i>
                                </span>
                                <label for="rueName">Rue</label>
                                <input id="rueName" class="md-input" name="rueName" type="text" value=""
                                       data-parsley-rue="3" required/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newRue()">Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-ajouterAdresse">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un numéro</h2></div>
            <form method="POST" name="form_adresse" action="#">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE569;</i>
                                </span>
                                <label for="ru"></label>
                                <input id="ru" class="md-input" name="" type="text" value="" readonly/>
                                <input id="ruValue" name="localitee" type="hidden" value=""/>
                                <span class="uk-form-help-block">Rue</span>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE566;</i>
                                </span>
                                <label for="adresseName">Numéro</label>
                                <input id="adresseName" class="md-input" name="adresseName" type="text" value=""
                                       data-parsley-adresse="3" required/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newAdresse()">Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierGouvernorat">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la gouvernorat</h2></div>
            <form method="POST" name="form_gouvernorat" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="govModif"></label>
                                <input id="govModif" class="md-input" name="" type="text" value=""
                                       data-parsley-govmodif="3" required/>
                                <input id="govValueModif" name="gouvernorattModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Gouvernorat</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierGouvernorat(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierVille">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la ville</h2></div>
            <form method="POST" name="form_ville" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="villeModif"></label>
                                <input id="villeModif" class="md-input" name="" type="text" value=""
                                       data-parsley-villemodif="3" required/>
                                <input id="villeValueModif" name="villeModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Ville</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierVille(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierLocalite">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la localité</h2></div>
            <form method="POST" name="form_localite" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="localiteModif"></label>
                                <input id="localiteModif" class="md-input" name="" type="text" value=""
                                       data-parsley-localitemodif="3" required/>
                                <input id="localiteValueModif" name="localiteModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Localité</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierLocalite(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierRue">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la rue</h2></div>
            <form method="POST" name="form_rue" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="rueModif"></label>
                                <input id="rueModif" class="md-input" name="" type="text" value=""
                                       data-parsley-ruemodif="3" required/>
                                <input id="rueModif" name="rueModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Rue</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierRue(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierAdresse">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier l'adresse</h2></div>
            <form method="POST" name="form_adresse" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="adresseModif"></label>
                                <input id="adresseModif" class="md-input" name="" type="text" value=""
                                       data-parsley-adressemodif="3" required/>
                                <input id="adresseModif" name="adresseModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Adresse</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="uk-modal" id="modal-addEquipement">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un équipement</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE531;</i>
                                </span>
                                <label for="equipement">Equipement</label>
                                <input id="equipement" value="" class="md-input" data-parsley-equipement="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newEquipement(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addCommodite">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une commodité</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55C;</i>
                                </span>
                                <label for="commodite">Commodité</label>
                                <input id="commodite" value="" class="md-input" data-parsley-commodite="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newCommodite(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addTypeBien">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un type de bien</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE86D;</i>
                                </span>
                                <label for="typeBien">Type de bien</label>
                                <input id="typeBien" value="" class="md-input" data-parsley-typebien="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2" style="padding-left: 0">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE85D;</i>
                                </span>
                                <select title="Catégories" class="md-input" id="categories"></select>
                                <span class="uk-form-help-block">Catégorie</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="equipped">Equipé</label>
                                <input type="checkbox" id="equipped" value="" data-switchery
                                       data-parsley-equipped="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="bedroom">Chambre</label>
                                <input type="checkbox" id="bedroom" value="" data-switchery
                                       data-parsley-bedroom="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="furnished">Meublé</label>
                                <input type="checkbox" id="furnished" value="" data-switchery
                                       data-parsley-furnished="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="bathroom">S.Bains</label>
                                <input type="checkbox" id="bathroom" value="" data-switchery
                                       data-parsley-bathroom="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newTypeBien(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addAgency">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une agence</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE84F;</i>
                                </span>
                                <label for="agency">Agence</label>
                                <input id="agency" value="" class="md-input" data-parsley-agency="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newAgency(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addOwner">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un propriétaire</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="codeClient">Code</label>
                                <input id="codeClient" value="" class="md-input" data-parsley-codeclient="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="denominationClient">Dénomination</label>
                                <input id="denominationClient" value="" class="md-input"
                                       data-parsley-denominationclient="3"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="identifiantClient">Identifiant</label>
                                <input id="identifiantClient" value="" class="md-input"
                                       data-parsley-identifiantclient="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="telephoneClient">Téléphone</label>
                                <input id="telephoneClient" value="" class="md-input"
                                       data-parsley-telephoneclient="3"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-2-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="addressClient">Adresse</label>
                                <input id="addressClient" value="" class="md-input" data-parsley-addressclient="3"/>

                            </div>
                        </div>
                    </div>
                </div>

            </form>
            <div class="uk-modal-footer uk-text-right">
                <button type="button" class="md-btn md-btn-primary" onclick="newOwner(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addDemandeur">
        <form method="post" id="clientform" action="/demos/immobilier/web/app_dev.php/client/add">

            <div class="uk-modal-dialog" style="width: 100%">
                <button type="button" class="uk-modal-close uk-close"></button>
                <div class="uk-modal-header"><h2>Ajouter un client</h2></div>
                <div class="uk-grid uk-grid-medium" data-uk-grid-margin>
                    <div class="uk-width-xLarge-2-10 uk-width-large-3-10">
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Cin (recto-verso)
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>


                                    <div class="uk-width-medium-1-2">
                                        {{ form_widget(clientform.cinRecto.file, {'attr': {'class': ''  }}) }}
                                        <span> {{ form_errors(clientform.cinRecto.file) }} </span>
                                        {{ form_widget(clientform.cinRecto.description, {'attr': {'class': ''  }}) }}
                                    </div>
                                    <div class="uk-width-medium-1-2">
                                        {{ form_widget(clientform.cinVerso.file, {'attr': {'class': ''  }}) }}
                                        <span> {{ form_errors(clientform.cinRecto.file) }} </span>
                                        {{ form_widget(clientform.cinVerso.description, {'attr': {'class': ''  }}) }}
                                    </div>


                                </div>

                            </div>
                        </div>


                        <div class="md-card">

                            <div class="md-card-content">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-form-row parsley-row">
                                        Nom :
                                        <label for="product_edit_manufacturer_control" id="label_nom">

                                        </label>
                                        <br>
                                        Prénom :
                                        <label for="product_edit_manufacturer_control" id="label_prenom">

                                        </label>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="md-card">

                            <div class="md-card-content">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>


                                    <div class="uk-form-row parsley-row">
                                        Portable :
                                        <label for="product_edit_manufacturer_control" id="tel_label">

                                        </label>

                                    </div>


                                </div>

                            </div>
                        </div>
                        <div class="md-card">

                            <div class="md-card-content">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>


                                    <div class="uk-form-row parsley-row">
                                        Email :

                                        <label for="product_edit_manufacturer_control" id="mail_label">

                                        </label>
                                        {#<input type="text" class="md-input" id="product_edit_manufacturer_control" name="product_edit_manufacturer_control" value="Samsung"/>#}

                                    </div>


                                </div>

                            </div>
                        </div>
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Préférences
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-width-1-2">
                                        <label id="Lundi" style="color : red">Lundi</label><br>

                                        <label id="Mercredi" style="color : red">Mercredi</label><br>

                                        <label id="Vendredi" style="color : red">Vendredi</label><br>

                                        <label id="Dimanche" style="color : red">Dimanche</label><br>
                                    </div>
                                    <div class="uk-width-1-2">
                                        <label id="Mardi" style="color : red">Mardi</label><br>
                                        <label id="Jeudi" style="color : red">Jeudi</label><br>
                                        <label id="Samedi" style="color : red">Samedi</label><br>
                                    </div>
                                    <div class="uk-width-1-2">
                                        De :
                                        <br>
                                        A :
                                    </div>
                                    <div class="uk-width-1-2">
                                        <label id="de_label"></label>
                                        <br>
                                        <label id="a_label"></label>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="uk-width-xLarge-8-10  uk-width-large-8-10">


                        <div class="uk-grid uk-grid-medium" data-uk-grid-margin>

                            <!--==================================================-->
                            <div class="uk-width-xLarge-10-10  uk-width-large-10-10">
                                <div class="md-card">
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Détails
                                        </h3>
                                    </div>
                                    <div class="md-card-content">
                                        <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                            <div class="uk-width-large-1-2">

                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Prenom</label></span>
                                                        {{ form_widget(clientform.prenom) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Nom</label></span>
                                                        {{ form_widget(clientform.denomination) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>CIN/RC</label></span>
                                                        {{ form_widget(clientform.identifier,{'attr': {'class': 'md-input'}}) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Date de naissance</label></span>
                                                        {{ form_widget(clientform.naissance) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Lieu</label></span>
                                                        {{ form_widget(clientform.birthplace) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Nationalité</label></span>
                                                        {{ form_widget(clientform.nationalite) }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="uk-width-large-1-2">
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Sexe</label></span>
                                                        {{ form_widget(clientform.sexe) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                    <span class="uk-input-group-addon"><label>Situation
                                                            familiale</label></span>
                                                        {{ form_widget(clientform.familySituation) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                    <span class="uk-input-group-addon"><label>Niveau
                                                            d'études</label></span>
                                                        {{ form_widget(clientform.etude) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Travail</label></span>
                                                        {{ form_widget(clientform.travail) }}
                                                    </div>
                                                </div>
                                                <div class="uk-width-1-1">
                                                    <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Domaine</label></span>
                                                        {{ form_widget(clientform.domaine) }}
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="uk-width-large-1-2">
                                                <div class="md-card-toolbar">
                                                    <h3 class="md-card-toolbar-heading-text">
                                                        Contact
                                                    </h3>
                                                </div>
                                                <div class="md-card-content">
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Portable
                                                                favoris</label></span>
                                                            {{ form_widget(clientform.tel) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Portable
                                                                1</label></span>
                                                            {{ form_widget(clientform.secondtel) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Portable
                                                                2</label></span>
                                                            {{ form_widget(clientform.thirdtel) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Tél
                                                                bureau</label></span>
                                                            {{ form_widget(clientform.telbureau) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-grid uk-form-row">
                                                        <div class="uk-width-large-1-3">
                                                        </div>
                                                    </div>

                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                            <span class="uk-input-group-addon"><label>Fax</label></span>
                                                            {{ form_widget(clientform.fax) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                            <span class="uk-input-group-addon"><label>Email</label></span>
                                                            {{ form_widget(clientform.website) }}
                                                        </div>
                                                    </div>


                                                    <div style="margin-top:30%;">
                                                        <label>Préférences de contact</label>
                                                        <div class="uk-form-row parsley-row" style="margin-top: 5%">
                                                            {{ form_widget(clientform.preferences.lundi) }}
                                                            Lundi
                                                            {{ form_widget(clientform.preferences.mardi) }}
                                                            Mardi
                                                            {{ form_widget(clientform.preferences.mercredi) }}
                                                            Mercredi


                                                            {#</div>#}
                                                            {#<div class="uk-form-row parsley-row">#}
                                                            {{ form_widget(clientform.preferences.jeudi) }}
                                                            jeudi
                                                            {{ form_widget(clientform.preferences.vendredi) }}
                                                            vendredi
                                                            {{ form_widget(clientform.preferences.samedi) }}
                                                            samedi
                                                            {#</div>#}
                                                            {#<div class="uk-form-row parsley-row">#}
                                                            {{ form_widget(clientform.preferences.dimanche) }}
                                                            dimanche
                                                        </div>
                                                        <div class="uk-grid uk-form-row">
                                                            <div class="uk-width-1-2">
                                                                De :
                                                                {{ form_widget(clientform.preferences.heure) }}
                                                            </div>
                                                            <div class="uk-width-1-2">
                                                                A :
                                                                {{ form_widget(clientform.preferences.heureFin) }}
                                                            </div>
                                                        </div>
                                                        <div class="uk-form-row parsley-row">

                                                            Notes de contact :
                                                            {{ form_widget(clientform.preferences.note) }}
                                                        </div>
                                                    </div>
                                                    {#<hr class="uk-grid-divider">#}

                                                </div>
                                            </div>
                                            <div class="uk-width-large-1-2">
                                                <div class="md-card-toolbar">
                                                    <h3 class="md-card-toolbar-heading-text">
                                                        Adresse
                                                    </h3>
                                                </div>
                                                <div class="md-card-content">
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                            <span class="uk-input-group-addon"><label>Adresse</label></span>
                                                            {{ form_widget(clientform.mainAddress.address) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                        <span class="uk-input-group-addon"><label>Code
                                                                postale</label></span>
                                                            {{ form_widget(clientform.mainAddress.zipCode) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                            <span class="uk-input-group-addon"><label>Ville</label></span>
                                                            {{ form_widget(clientform.mainAddress.city) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-1-1">
                                                        <div class="uk-input-group">
                                                            <span class="uk-input-group-addon"><label>Gouvernorate</label></span>
                                                            {{ form_widget(clientform.mainAddress.governorate) }}
                                                        </div>
                                                    </div>
                                                    <div class="uk-form-row" style="margin-top: 53%">
                                                        <label for="product_edit_sn_control">Origine</label>
                                                        {#<input type="text" class="md-input" id="product_edit_sn_control" name="product_edit_sn_control" value="SM-G925TZKFTMB"/>#}
                                                        {{ form_widget(clientform.origine) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="md-card">
                            <div class="md-card-content">
                                <div class="uk-form-row">
                                    <label for="product_edit_description_control">Autre détails</label>
                                    {#<textarea class="md-input" name="product_edit_description_control" id="product_edit_description_control" cols="30" rows="4">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad aliquam necessitatibus suscipit velit voluptatibus! Ab accusamus ad adipisci alias aliquid at atque consectetur, dicta dignissimos, distinctio dolores esse fugiat iste laborum libero magni maiores maxime modi nemo neque, nesciunt nisi nulla optio placeat quas quia quibusdam quis saepe sit ullam!</textarea>#}
                                    {{ form_widget(clientform.moreInformations) }}
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
                <div class="uk-modal-footer uk-text-left">
                    <button type="submit" class="md-btn md-btn-primary" onclick="newDemandeur(this)">
                        Ajouter
                    </button>
                </div>
            </div>

        </form>
    </div>
</div>
<script src="{{ asset('js/compiled/mainWithDropify_dropify.min_1.js') }}"></script>

<!--  form file input functions -->
{#<script src="{{ asset('template/assets/js/kendoui_custom.min.js') }}"></script>#}
    {#<script src="{{ asset('template/assets/js/kendoui_custom.min.js') }}"></script>#}
<script src="{{ asset('bundles/immobilier/assets/js/pages/forms_file_input.min.js') }}"></script>
<script>

    $(function () {
        if ($('#gouvernorat').text() !== '') {
            $('#modifierGouvernorat').show();
            $('#supprimerGouvernorat').show();
            $('#ajouterVille').show();
        }
        $('.select').kendoComboBox({
            filter: "contains",
            suggest: true
        });
        var ismapped = $('#sbc_bienbundle_bien_ismapped');
//        if (!ismapped.is(':checked')) {
//        $('#displaymap').css("display", "none");
//        }
//        ismapped.on('ifChanged', function () {
//        ismapped.on('ifChecked', function () {
//        $('#displaymap').css("display", "block");

        {% if  bien.id != null %}
        googleMapApiLaunch($('#sbc_bienbundle_bien_longitude').val(), $('#sbc_bienbundle_bien_latitude').val());
        {% else %}
        googleMapApiLaunch(10.227091, 36.771820);
        {% endif %}

//        ismapped.on('ifUnchecked', function () {
//        $('#displaymap').css("display", "none");
//        });
//        });
        var categories = $('#categories');
        categories.selectize({
            placeholder: 'Choisir une catégorie....             ',
            hideSelected: true
        });
        getCategories(categories);
    });

    {% set lng = bien.longitude %}
    {% set lat = bien.latitude %}

    var init_lng = '{{ lng }}';
    var init_lat = '{{ lat }}';

//    setTimeout(function () {
//        googleMapApiLaunch(init_lng, init_lat);
//    }, 650);
    function googleMapApiLaunch(lng, lat) {

        var longitude = $('#sbc_bienbundle_bien_longitude');
        var latitude = $('#sbc_bienbundle_bien_latitude');
        {% if bien.id != 0 %}
        longitude.val(lng);
        latitude.val(lat);
        {% else %}
        if (lat === init_lat && lng === init_lng) {
            longitude.val('');
            latitude.val('');
        } else {
            longitude.val(lng);
            latitude.val(lat);
        }
        {% endif %}
        lat = parseFloat(lat);
        lng = parseFloat(lng);
        //map..
        var map = new google.maps.Map(document.getElementById('map-canvas'), {
            center: {
                lat: lat,
                lng: lng
            },
            zoom: 14
        });
        //marker..
        var marker = new google.maps.Marker({
            position: {
                lat: lat,
                lng: lng
            },
            map: map,
            draggable: true
        });
        //dragend event of maker
        google.maps.event.addListener(marker, 'dragend', function () {
            //console.log(marker.getPosition());
//            if ($('#sbc_bienbundle_bien_ismapped').is(':checked')) {
                longitude.val(marker.getPosition().lng());
                latitude.val(marker.getPosition().lat());
//            }
        });
    }
    function getCategories(select) {
        var categories = select[0].selectize;
        categories.clearOptions();
        var url = '{{ path('category_list') }}';
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        categories.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    UIkit.modal.alert('Rien', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Erreur', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    var ville = $('#ville');
    var localite = $('#localite');
    var rue = $('#rue');
    var gouvernorat = $('#gouvernorat');
    var adresse = $('#sbc_bienbundle_bien_address');
    var gov = $('#gov');
    var local = $('#local');
    var vill = $('#vill');
    var ru = $('#ru');
    var govValue = $('#govValue');
    var localValue = $('#localValue');
    var villValue = $('#villValue');
    var ruValue = $('#ruValue');
    var govValueModif = $('#govValueModif');
    var govModif = $('#govModif');
    var localiteValueModif = $('#localiteValueModif');
    var localiteModif = $('#localiteModif');
    var villeValueModif = $('#villeValueModif');
    var villeModif = $('#villeModif');
    var rueValueModif = $('#rueValueModif');
    var rueModif = $('#rueModif');
    function getVilles(select) {
        var modifierGouvernorat = $('#modifierGouvernorat');
        var supprimerGouvernorat = $('#supprimerGouvernorat');
        var ajouterVille = $('#ajouterVille');
        var modifierVille = $('#modifierVille');
        var supprimerVille = $('#supprimerVille');
        select = select || '#gouvernorat';
        {% if app.user.id == 1 or app.user.id == 2 %}
        modifierGouvernorat.show();
        supprimerGouvernorat.show();
        ajouterVille.show();
        {% endif %}
        validateGouvernorat();
        var gouvernorat = $(select).val();
        govValueModif.val(gouvernorat);
        govModif.val($(select).text());
        gov.val($(select).text());
        govValue.val(gouvernorat);
        var url = '{{ path('villes_bygouvernorat') }}';
        var villes = ville[0].selectize;
        villes.clearOptions();
        modifierVille.hide();
        supprimerVille.hide();
        if (gouvernorat !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + gouvernorat,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            villes.addOption({
                                text: element.text,
                                value: element.value
                            });
                            villes.open();
                        });
                    }
                    else {
                        ville.html("<option>No Data </option>");
                    }
                },
                error: function () {
                    ville.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            modifierGouvernorat.hide();
            supprimerGouvernorat.hide();
            ajouterVille.hide();
            modifierVille.hide();
            supprimerVille.hide();
            $('#ajouterLocalite').hide();
            $('#modifierLocalite').hide();
            $('#supprimerLocalite').hide();
            $('#ajouterRue').hide();
            $('#modifierRue').hide();
            $('#supprimerRue').hide();
            $('#ajouterAdresse').hide();
            $('#modifierAdresse').hide();
            $('#supprimerAdresse').hide();
        }
    }
    function getLocalites(select) {
        select = select || '#ville';

        var ajouterLocalite = $('#ajouterLocalite');
        var modifierLocalite = $('#modifierLocalite');
        var supprimerLocalite = $('#supprimerLocalite');
        {% if app.user.id == 1 or app.user.id == 2 %}
        ajouterLocalite.show();
        $('#modifierVille').show();
        $('#supprimerVille').show();
        {% endif %}
        validateVille();
        var ville = $(select).val();
        villeValueModif.val(ville);
        villeModif.val($(select).text());
        vill.val($(select).text());
        villValue.val(ville);
        var url = '{{ path('localites_byville') }}';
        var localites = localite[0].selectize;
        localites.clearOptions();
        modifierLocalite.hide();
        supprimerLocalite.hide();
        if (ville !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + ville,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            localites.addOption({
                                text: element.text,
                                value: element.value
                            });
                            localites.open();
                        });
                    }
                    else {
                        localite.html("<option>No Data </option>");
                    }
                },
                error: function () {
                    localite.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            ajouterLocalite.hide();
            modifierLocalite.hide();
            supprimerLocalite.hide();
            $('#ajouterRue').hide();
            $('#modifierRue').hide();
            $('#supprimerRue').hide();
            $('#ajouterAdresse').hide();
            $('#modifierAdresse').hide();
            $('#supprimerAdresse').hide();
        }
    }
    function getRues(select) {

        select = select || '#localite';

        var ajouterRue = $('#ajouterRue');
        {% if app.user.id == 1 or app.user.id == 2 %}
        ajouterRue.show();
        $('#modifierLocalite').show();
        $('#supprimerLocalite').show();
        {% endif %}
        validateLocalite();
        var localite = $(select).val();
        localiteValueModif.val(localite);
        localiteModif.val($(select).text());
        local.val($(select).text());
        localValue.val(localite);
        var url = '{{ path('rues_bylocalite') }}';
        var rues = rue[0].selectize;
        rues.clearOptions();
        var modifierRue = $('#modifierRue');
        var supprimerRue = $('#supprimerRue');
        modifierRue.hide();
        supprimerRue.hide();
        if (localite !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + localite,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            rues.addOption({
                                text: element.text,
                                value: element.value
                            });
                            rues.open();
                        });
                    }
                    else {
                        rue.html("<option>No Data </option>");
                    }
                },
                error: function () {
                    rue.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            ajouterRue.hide();
            modifierRue.hide();
            supprimerRue.hide();
            $('#ajouterAdresse').hide();
            $('#modifierAdresse').hide();
            $('#supprimerAdresse').hide();
        }
    }
    function getAdresses(select) {
        select = select || '#rue';
        {% if app.user.id == 1 or app.user.id == 2 %}
        $('#modifierRue').show();
        $('#supprimerRue').show();
        {% endif %}
        var ajouterAdresse = $('#ajouterAdresse');
        ajouterAdresse.show();
        validateRue();
        var rue = $(select).val();
        rueValueModif.val(rue);
        rueModif.val($(select).text());
        ru.val($(select).text());
        ruValue.val(rue);
        var url = '{{ path('adresses_byrue_notjoined') }}';
        var adresses = adresse[0].selectize;
        adresses.clearOptions();
        var modifierAdresse = $('#modifierAdresse');
        var supprimerAdresse = $('#supprimerAdresse');
        modifierAdresse.hide();
        supprimerAdresse.hide();
        if (rue !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + rue,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            adresses.addOption({
                                text: element.text,
                                value: element.value
                            });
                            adresses.open();
                        });
                    }
                    else {
                        adresse.html("<option>No Data </option>");
                    }
                },
                error: function () {

                    adresse.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            ajouterAdresse.hide();
            modifierAdresse.hide();
            supprimerAdresse.hide();
        }
    }
    function newVille() {
        var villeName = $('#villeName');
        var postCodeName = $('#postCodeName');
        var villeNameIsValid = villeName.parsley().isValid();
        var postCodeIsValid = postCodeName.parsley().isValid();
        if (villeNameIsValid || postCodeIsValid) {
            var url = '{{ path('ville_new') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "ville=" + villeName.val() + "&codepostale=" + postCodeName.val() + "&gouvernorat=" + govValue.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('ville', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette ville existe déjà.',
                                fr: "Cette ville existe déjà"
                            }
                        });
                        villeName.on('change', function () {
                            window.Parsley.addValidator('ville', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            villeName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('ville', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La ville a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var villes = ville[0].selectize;
                        villes.addOption({
                            text: json.villeName,
                            value: json.id
                        });
                        villes.addItem(json.id);
                    }
                    villeName.parsley().validate();
                },
                error: function () {
                    villeName.parsley().validate();
                }
            });
        }
        else {
            villeName.parsley().validate();
            postCodeName.parsley().validate();
        }
    }
    function newLocalite() {
        var localiteName = $('#localiteName');
        var localiteNameIsValid = localiteName.parsley().isValid();
        if (localiteNameIsValid) {
            var url = '{{ path('localite_new') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "localite=" + localiteName.val() + "&ville=" + villValue.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('localite', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette localité existe déjà.',
                                fr: "Cette localité existe déjà"
                            }
                        });
                        localiteName.on('change', function () {
                            window.Parsley.addValidator('localite', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            localiteName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('localite', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La localité a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var localites = localite[0].selectize;
                        localites.addOption({
                            text: json.localiteName,
                            value: json.id
                        });
                        localites.addItem(json.id);
                    }
                    localiteName.parsley().validate();
                },
                error: function () {
                    localiteName.parsley().validate();
                }
            });
        }
        else {
            localiteName.parsley().validate();
        }
    }
    function newRue() {
        var rueName = $('#rueName');
        var rueNameIsValid = rueName.parsley().isValid();
        if (rueNameIsValid) {
            var url = '{{ path('rue_new') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "rue=" + rueName.val() + "&localite=" + localValue.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('rue', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette rue existe déjà.',
                                fr: "Cette rue existe déjà"
                            }
                        });
                        rueName.on('change', function () {
                            window.Parsley.addValidator('rue', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            rueName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('rue', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La rue a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var rues = rue[0].selectize;
                        rues.addOption({
                            text: json.rueName,
                            value: json.id
                        });
                        rues.addItem(json.id);
                    }
                    rueName.parsley().validate();
                },
                error: function () {
                    rueName.parsley().validate();
                }
            });
        }
        else {
            rueName.parsley().validate();
        }
    }
    function newAdresse() {
        var adresseName = $('#adresseName');
        var adresseValide = adresseName.parsley().isValid();
        var rueVal = $('#rue').val();
        if (adresseValide) {
            var adresseNameValue = adresseName.val();
            var urlVerif = '{{ path('adresse_bynameandrue', {'name': 'namE', 'rue': 'ruE'}) }}';
            urlVerif = urlVerif.replace('namE', adresseNameValue);
            urlVerif = urlVerif.replace('ruE', rueVal);
            $.ajax({
                async: true,
                type: "GET",
                url: urlVerif,
                success: function (json) {
                    if (json.success === true) {
                        window.Parsley.addValidator('adresse', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette adresse existe déjà.',
                                fr: "Cette adresse existe déjà"
                            }
                        });
                        adresseName.on('change', function () {
                            window.Parsley.addValidator('adresse', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            adresseName.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('adresse', {
                            validateString: function () {
                                return true;
                            }
                        });
                        var url = '{{ path('adresse_add') }}';
                        $.ajax({
                            async: true,
                            type: "POST",
                            url: url,
                            data: "adresse=" + adresseNameValue + "&rue=" + rueVal,
                            success: function (json) {
                                if (json.success === false || json.message !== '') {
                                    window.Parsley.addValidator('adresse', {
                                        validateString: function () {
                                            return false;
                                        },
                                        messages: {
                                            en: 'Erreur d\'ajout de l\'adresse.',
                                            fr: "Erreur d\'ajout de l\'adresse."
                                        }
                                    });
                                    adresseName.on('change', function () {
                                        window.Parsley.addValidator('adresse', {
                                            validateString: function () {
                                                return true;
                                            }
                                        });
                                        adresseName.parsley().validate();
                                    });
                                } else {
                                    window.Parsley.addValidator('adresse', {
                                        validateString: function () {
                                            return true;
                                        }
                                    });
                                    UIkit.modal.alert('L\'adresse a été ajoutée avec succès', {
                                        labels: {
                                            Ok: 'Fermer'
                                        }
                                    });
                                    var adresses = adresse[0].selectize;
                                    adresses.addOption({
                                        text: json.adresseName,
                                        value: json.id
                                    });
                                    adresses.addItem(json.id);
                                }
                                adresseName.parsley().validate();
                            },
                            error: function () {
                                adresseName.parsley().validate();
                            }
                        });
                    }
                    adresseName.parsley().validate();
                }
            });
        }
        else {
            adresseName.parsley().validate();
        }
    }
    function modifierVille() {
        var villeId = $('#villeValueModif').val();
        var villeModifName = $('#villeModif');
        var villeModifValide = villeModifName.parsley().isValid();
        if (villeModifValide) {
            var name = villeModifName.val();
            var urlVerif = '{{ path('ville_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', villeId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('villemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de la ville.',
                                fr: "Erreur de modification de la ville."
                            }
                        });
                        villeModifName.on('change', function () {
                            window.Parsley.addValidator('villemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            villeModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('villemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La ville a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    villeModifName.parsley().validate();
                    refreshVilles($('#ville'));
                },
                error: function () {

                    villeModifName.parsley().validate();
                }
            });
        }
        else {
            villeModifName.parsley().validate();
        }
    }
    function validateVille() {
        var domVilleModif = $('#villeModif');
        var oldVilleName = domVilleModif.val().toUpperCase();
        domVilleModif.on('change', function () {
            var villename = domVilleModif.val().toUpperCase();
            var url = '{{ path('ville_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', villename);
            if (villename !== oldVilleName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('villemodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette ville existe déjà',
                                    fr: "Cete ville existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('villemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domVilleModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshVilles(select) {
        var url = '{{ path('ville_list') }}';
        var villes = select[0].selectize;
        villes.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        villes.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerVille($id) {
        var url = '{{ path('ville_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', $id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La ville a été supprimée avec succès.', {
                                labels: {
                                    Ok: 'Fermer'
                                }
                            }
                    ).on('hide.uk.modal', function () {
                        refreshVilles($('#ville'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette ville pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette ville pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierGouvernorat() {
        var govId = $('#govValueModif').val();
        var govModifName = $('#govModif');
        var govModifValide = govModifName.parsley().isValid();
        if (govModifValide) {
            var name = govModifName.val();
            var urlVerif = '{{ path('gouvernorat_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', govId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('govmodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de la gouvernorat.',
                                fr: "Erreur de modification de la gouvernorat."
                            }
                        });
                        govModifName.on('change', function () {
                            window.Parsley.addValidator('govmodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            govModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('govmodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La gouvernorat a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    govModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    govModifName.parsley().validate();
                }
            });
        }
        else {
            govModifName.parsley().validate();
        }
    }
    function validateGouvernorat() {
        var domGovModif = $('#govModif');
        var oldGovName = domGovModif.val().toUpperCase();
        domGovModif.on('change', function () {
            var govname = domGovModif.val().toUpperCase();
            var url = '{{ path('gouvernorat_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', govname);
            if (govname !== oldGovName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('govmodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette gouvenorat existe déjà',
                                    fr: "Cete gouvenorat existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('govmodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domGovModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshGouvernorats(select) {
        var url = '{{ path('gouvernorat_list') }}';
        var gouvernorats = select[0].selectize;
        gouvernorats.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {

                    $.each(data, function (key, element) {
                        gouvernorats.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerGouvernorat(id) {
        var url = '{{ path('gouvernorat_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La gouvernorat a été supprimée avec succès.'
                    ).on('hide.uk.modal', function () {
                        refreshGouvernorats($('#gouvernorat'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette gouvernorat pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette gouvernorat pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierLocalite() {
        var localiteId = $('#localiteValueModif').val();
        var localiteModifName = $('#localiteModif');
        var localiteModifValide = localiteModifName.parsley().isValid();
        if (localiteModifValide) {
            var name = localiteModifName.val();
            var urlVerif = '{{ path('localite_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', localiteId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('localitemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modification de la localité.',
                                fr: "Erreur de modification de la localité."
                            }
                        });
                        localiteModifName.on('change', function () {
                            window.Parsley.addValidator('localitemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            localiteModifName.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('localitemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La localité a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    localiteModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    localiteModifName.parsley().validate();
                }
            });
        }
        else {
            localiteModifName.parsley().validate();
        }
    }
    function validateLocalite() {
        var domlocaliteModif = $('#localiteModif');
        var oldlocaliteName = domlocaliteModif.val().toUpperCase();
        domlocaliteModif.on('change', function () {
            var localitename = domlocaliteModif.val().toUpperCase();
            var url = '{{ path('localite_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', localitename);
            if (localitename !== oldlocaliteName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('localitemodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette localité existe déjà',
                                    fr: "Cette localité existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('localitemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domlocaliteModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshLocalites(select) {
        var url = '{{ path('localite_list') }}';
        var localites = select[0].selectize;
        localites.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        localites.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerLocalite(id) {
        var url = '{{ path('localite_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La localité a été supprimée avec succès.', {
                                labels: {
                                    Ok: 'Fermer'
                                }
                            }
                    ).on('hide.uk.modal', function () {
                        refreshLocalites($('#localite'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette localité pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette localité pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierRue() {
        var rueId = $('#rueValueModif').val();
        var rueModifName = $('#rueModif');
        var rueModifValide = rueModifName.parsley().isValid();
        if (rueModifValide) {
            var name = rueModifName.val();
            var urlVerif = '{{ path('rue_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', rueId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('ruemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de la rue.',
                                fr: "Erreur de modification de la rue."
                            }
                        });
                        rueModifName.on('change', function () {
                            window.Parsley.addValidator('ruemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            rueModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('ruemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La rue a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    rueModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    rueModifName.parsley().validate();
                }
            });
        }
        else {
            rueModifName.parsley().validate();
        }
    }
    function validateRue() {
        var domrueModif = $('#rueModif');
        var oldrueName = domrueModif.val().toUpperCase();
        domrueModif.on('change', function () {
            var ruename = domrueModif.val().toUpperCase();
            var url = '{{ path('rue_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', ruename);
            if (ruename !== oldrueName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('ruemodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette rue existe déjà',
                                    fr: "Cete rue existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('ruemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domrueModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshRues(select) {
        var url = '{{ path('rue_list') }}';
        var rues = select[0].selectize;
        rues.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        rues.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerRue($id) {
        var url = '{{ path('rue_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', $id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La rue a été supprimée avec succès.', {
                                labels: {
                                    Ok: 'Fermer'
                                }
                            }
                    ).on('hide.uk.modal', function () {
                        refreshRues($('#rue'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette rue pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette rue pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierAdresse() {
        var adresseId = $('#adresseValueModif').val();
        var adresseModifName = $('#adresseModif');
        var adresseModifValide = adresseModifName.parsley().isValid();
        if (adresseModifValide) {
            var urlVerif = '{{ path('adresse_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', adresseId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + $name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('adressemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de l\'adresse.',
                                fr: "Erreur de modification de l'adresse."
                            }
                        });
                        adresseModifName.on('change', function () {
                            window.Parsley.addValidator('adressemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            adresseModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('adressemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('L\'adresse a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    adresseModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    adresseModifName.parsley().validate();
                }
            });
        }
        else {
            adresseModifName.parsley().validate();
        }
    }
    function refreshAdresses(select) {
        var url = '{{ path('adresse_list') }}';
        var adresses = select[0].selectize;
        adresses.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        adresses.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerAdresse($id) {
        var url = '{{ path('adresse_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', $id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('L\'adresse a été supprimée avec succès.', {
                                labels: {
                                    Ok: 'Fermer'
                                }
                            }
                    ).on('hide.uk.modal', function () {
                        refreshAdresses($('#adresse'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette adresse pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette adresse pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    $(function () {
        var ownersDOM = $('#' + '{{ form.owners.vars.id }}');
        var representantsDOM = $('#' + '{{ form.representants.vars.id }}');
        var locatairesDOM = $('#' + '{{ form.locataires.vars.id }}');
        var procurationsDOM = $('#' + '{{ form.procurations.vars.id }}');
        var picturesDOM = $('#' + '{{ form.pictures.vars.id }}');
        var papersDOM = $('#' + '{{ form.papers.vars.id }}');
        var buildPrototypes = {
            counterOwners: ownersDOM.children().length,
            counterRepresentants: representantsDOM.children().length,
            counterLocataires: locatairesDOM.children().length,
            prototypeOwners: ownersDOM.attr('data-prototype'),
            prototypeRepresentants: representantsDOM.attr('data-prototype'),
            prototypeLocataires: locatairesDOM.attr('data-prototype'),
            owners: ownersDOM,
            locataires: locatairesDOM,
//            prototypeRepresentants: representantsDOM.attr('data-prototype'),
            representants: representantsDOM,
            counterProcurations: procurationsDOM.children().length,
            prototypeProcurations: procurationsDOM.attr('data-prototype'),
            procurations: procurationsDOM,
            counterPictures: picturesDOM.children().length,
            prototypePictures: picturesDOM.attr('data-prototype'),
            pictures: picturesDOM,
            counterPapers: papersDOM.children().length,
            prototypePapers: papersDOM.attr('data-prototype'),
            papers: papersDOM,
            init: function () {
                $('#addOwner').on('click', function () {
                    buildPrototypes.buildOwnerSection();
                });
                $('#addRepresentant').on('click', function () {


                    buildPrototypes.buildRepresentantSection();
                });
                $('#addLocataire').on('click', function () {
                    buildPrototypes.buildLocataireSection();
                });
                $('#addProcuration').on('click', function () {
                    buildPrototypes.buildProcurationSection();
                });
                $('#addPicture').on('click', function () {
                    buildPrototypes.buildPictureSection();
                });
                $('#addPaper').on('click', function () {
                    buildPrototypes.buildPaperSection();
                });
                $('.btn-close').on('click', function () {
                    this.closest('div').remove();
                });
            },
            buildOwnerSection: function () {
                this.counterOwners++;
                prototypeOwnersDOM = $('<div/>').html(this.prototypeOwners).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeOwnersDOM, templateOwner());
                var block = temp.replace(/__name__/g, this.counterOwners);
                this.owners.append(block);
                this.owners.find('select').kendoComboBox({
//                    placeholder: "Select product",
                    dataTextField: "text",
                    dataValueField: "value",
                    filter: "contains",
                    autoBind: false,
                    minLength: 1,
                    dataSource: {
                        type: "odata",
                        serverFiltering: true,
                        transport: {
                            read: {
                                url: "{{ path('client_list') }}"
                            }
                        }
                    }
                });
                {#this.owners.find('select').kendoComboBox({#}
                    {#dataTextField: "text",#}
                    {#dataValueField: "value",#}
                    {#dataSource: {#}
                        {#url: "{{ path('client_list') }}",#}
                    {#},#}

                    {#filter: "contains",#}
                    {#suggest: true#}
                {#});#}
                this.reInit();
            },
            buildRepresentantSection: function () {
//                alert('here')
                this.counterRepresentants++;
                prototypeRepresentantsDOM = $('<div/>').html(this.prototypeRepresentants).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeRepresentantsDOM, templateRepresentant());
                var block = temp.replace(/__name__/g, this.counterRepresentants);
                this.representants.append(block);
                this.representants.find('select').kendoComboBox({
//                    placeholder: "Select product",
                    dataTextField: "text",
                    dataValueField: "value",
                    filter: "contains",
                    autoBind: false,
                    minLength: 1,
                    dataSource: {
                        type: "odata",
                        serverFiltering: true,
                        transport: {
                            read: {
                                url: "{{ path('client_list') }}"
                            }
                        }
                    }
                });
                {#this.owners.find('select').kendoComboBox({#}
                {#dataTextField: "text",#}
                {#dataValueField: "value",#}
                {#dataSource: {#}
                {#url: "{{ path('client_list') }}",#}
                {#},#}

                {#filter: "contains",#}
                {#suggest: true#}
                {#});#}
                this.reInit();
            },
            buildLocataireSection: function () {
                this.counterLocataires++;
                prototypeLocatairesDOM = $('<div/>').html(this.prototypeLocataires).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeLocatairesDOM, templateLocataire());
                var block = temp.replace(/__name__/g, this.counterLocataires);
                this.locataires.append(block);
                this.locataires.find('select').kendoComboBox({
//                    placeholder: "Select product",
                    dataTextField: "text",
                    dataValueField: "value",
                    filter: "contains",
                    autoBind: false,
                    minLength: 1,
                    dataSource: {
                        type: "odata",
                        serverFiltering: true,
                        transport: {
                            read: {
                                url: "{{ path('client_list') }}"
                            }
                        }
                    }
                });
                {#this.owners.find('select').kendoComboBox({#}
                {#dataTextField: "text",#}
                {#dataValueField: "value",#}
                {#dataSource: {#}
                {#url: "{{ path('client_list') }}",#}
                {#},#}

                {#filter: "contains",#}
                {#suggest: true#}
                {#});#}
                this.reInit();
            },
//            buildRepresentantSection: function () {
//                this.counterRepresentants++;
//                var prototypeRepresentantsDOM = $('<div/>').html(this.prototypeRepresentants).contents();
//                var temp = SFCollectionAnalyzer.buildTemplate(prototypeRepresentantsDOM, templateRepresentant());
//                var block = temp.replace(/__name__/g, this.counterRepresentants);
//                this.representants.append(block);
//                this.representants.find('select').kendoComboBox({
//                    filter: "contains",
//                    suggest: true
//                });
//                this.reInit();
//            },
            buildProcurationSection: function () {
                this.counterProcurations++;
                var prototypeProcurationsDOM = $('<div/>').html(this.prototypeProcurations).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeProcurationsDOM, templateProcuration());
                var block = temp.replace(/__name__/g, this.counterProcurations);
                this.procurations.append(block);
                this.procurations.find('select').kendoComboBox({
                    filter: "contains",
                    suggest: true
                });
                this.reInit();
            },
            buildPictureSection: function () {
                this.counterPictures++;
                var prototypePicturesDOM = $('<div/>').html(this.prototypePictures).contents();
                var picturesPrototype = prototypePicturesDOM.find('#sbc_bienbundle_bien_pictures___name___pictures').attr('data-prototype');
                var temp = SFCollectionAnalyzer.buildTemplate(prototypePicturesDOM, templatePicture(this.counterPictures));
                var block = temp.replace(/__name__/g, this.counterPictures);
                this.pictures.append(block);
                this.reInit();
            },
            buildPaperSection: function () {
                this.counterPapers++;
                var prototypePapersDOM = $('<div/>').html(this.prototypePapers).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypePapersDOM, templatePaper());
                var block = temp.replace(/__name__/g, this.counterPapers);
                this.papers.append(block);
                this.reInit();
            },
            reInit: function () {
                $('.btn-close').on('click', function () {
                    this.closest('div').remove();
                });
                altair_md.init();
                this.pictures.find('input[type=file]').dropify({
                    messages: {
                        'default': 'Cliquez ou glissez / déposez un fichier ici',
                        'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                        'remove': 'Supprimer',
                        'error': 'Une erreur s\'est survenue'
                    }
                });
                this.papers.find('input[type=file]').dropify({
                    messages: {
                        'default': 'Cliquez ou glissez / déposez un fichier ici',
                        'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                        'remove': 'Supprimer',
                        'error': 'Une erreur s\'est survenue'
                    }
                });
            }
        };
        buildPrototypes.init();
        setFormatNumber();
        CKEDITOR.replace('sbc_bienbundle_bien_description', {
            height: 250
        });
        CKEDITOR.replace('sbc_bienbundle_bien_vitrine', {
            height: 250
        });
        var ville = $('#ville');
        var localite = $('#localite');
        var rue = $('#rue');
        var adresse = $('#adresse');
        ville.next('div').on('click', function () {
            getVilles();
        });
        localite.next('div').on('click', function () {
            getLocalites();
        });
        rue.next('div').on('click', function () {
            getRues();
        });
        $('#sbc_bienbundle_bien_address').next('div').on('click', function () {
            getAdresses();
        });
        if (ville.val() !== '') {
            $('#modifierVille').show();
            $('#supprimerVille').show();
            $('#ajouterLocalite').show();
        }
        if (localite.val() !== '') {
            $('#modifierLocalite').show();
            $('#supprimerLocalite').show();
            $('#ajouterRue').show();
        }
        if (rue.val() !== '') {
            $('#modifierRue').show();
            $('#supprimerRue').show();
            $('#ajouterAdresse').show();
        }
        if (adresse.text() !== '') {
            $('#modifierAdresse').show();
            $('#supprimerAdresse').show();
        }
    });
    function setFormatNumber() {
        $('.numeric').blur(function () {
            $(this).parseNumber({format: "######0.00", locale: "us"});
            $(this).formatNumber({format: "######0.00", locale: "us"});
        });
        $('.money').blur(function () {
            $(this).parseNumber({format: "#,##0.000", locale: "fr"});
            $(this).formatNumber({format: '#,##0.000', locale: 'fr'});
        });
    }
    function newEquipement() {
        var equipement = $('#equipement');
        var equipementIsValid = equipement.parsley().isValid();
        if (equipementIsValid) {
            var url = '{{ path('equipement_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "equipement=" + equipement.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('equipement', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'cet équipement existe déjà.',
                                fr: "Cet équipement équipement existe déjà"
                            }
                        });
                        equipement.on('change', function () {
                            window.Parsley.addValidator('equipement', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            equipement.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('equipement', {
                            validateString: function () {
                                return true;
                            }
                        });

                        UIkit.modal.alert('L\'équipement a été ajouté avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var eq = $('#sbc_bienbundle_bien_equipements');
                        var equipements = eq[0].selectize;
                        equipements.addOption({
                            text: json.equipementName,
                            value: json.id
                        });
                        equipements.addItem(json.id);
                    }
                    equipement.parsley().validate();
                },
                error: function () {
                    equipement.parsley().validate();
                }
            });
        }
        else {
            equipement.parsley().validate();
        }
    }
    function newCommodite() {
        var commodite = $('#commodite');
        var commoditeIsValid = commodite.parsley().isValid();
        if (commoditeIsValid) {
            var url = '{{ path('commodite_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "commodite=" + commodite.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('commodite', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'cette commodité existe déjà.',
                                fr: "Cette commodité équipement existe déjà"
                            }
                        });
                        commodite.on('change', function () {
                            window.Parsley.addValidator('commodite', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            commodite.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('commodite', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La commodité a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var commo = $('#sbc_bienbundle_bien_commodites');
                        var commodites = commo[0].selectize;
                        commodites.addOption({
                            text: json.commoditeName,
                            value: json.id
                        });
                        commodites.addItem(json.id);
                    }
                    commodite.parsley().validate();
                },
                error: function () {
                    commodite.parsley().validate();
                }
            });
        }
        else {
            commodite.parsley().validate();
        }
    }
    function newAgency() {
        var agency = $('#agency');
        var agencyIsValid = agency.parsley().isValid();
        if (agencyIsValid) {
            var url = '{{ path('agency_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "agency=" + agency.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('agency', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette agence existe déjà.',
                                fr: "Cette agence équipement existe déjà"
                            }
                        });
                        agency.on('change', function () {
                            window.Parsley.addValidator('agency', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            agency.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('agency', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('L\'agence a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var agence = $('#sbc_bienbundle_bien_agency');
                        var agencies = agence[0].selectize;
                        agencies.addOption({
                            text: json.agencyName,
                            value: json.id
                        });
                        agencies.addItem(json.id);
                    }
                    agency.parsley().validate();
                },
                error: function () {
                    agency.parsley().validate();
                }
            });
        }
        else {
            agency.parsley().validate();
        }
    }
    function newTypeBien() {
        var typeBien = $('#typeBien');
        var typeBienIsValid = typeBien.parsley().isValid();
        if (typeBienIsValid) {
            var url = '{{ path('typebien_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "typeBien=" + typeBien.val() + '&category=' + $('#categories').val()
                + '&furnished=' + $('#furnished').is(':checked') + '&bathroom=' + $('#bathroom').is(':checked')
                + '&equipped=' + $('#equipped').is(':checked') + '&bedroom=' + $('#bedroom').is(':checked'),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('typebien', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Ce type de bien existe déjà.',
                                fr: "Ce type de bien existe déjà"
                            }
                        });
                        typeBien.on('change', function () {
                            window.Parsley.addValidator('typebien', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            typeBien.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('typebien', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('Le type de bien a été ajouté avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var typeB = $('#sbc_bienbundle_bien_typeBien');
                        var typeBiens = typeB[0].selectize;
                        typeBiens.addOption({
                            text: json.typeBienName,
                            value: json.id
                        });
                        typeBiens.addItem(json.id);
                    }
                    typeBien.parsley().validate();
                },
                error: function () {
                    typeBien.parsley().validate();
                }
            });
        }
        else {
            typeBien.parsley().validate();
        }
    }
    function newOwner() {
        var codeClient = $('#codeClient');
        var codeClientIsValid = codeClient.parsley().isValid();
        var denominationClient = $('#denominationClient');
        var identifiantClient = $('#identifiantClient');
        var telephoneClient = $('#telephoneClient');
        var addressClient = $('#addressClient');
        if (codeClientIsValid) {
            var url = '{{ path('client_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "code=" + codeClient.val() + '&denomination=' + denominationClient.val()
                + '&identifiant=' + identifiantClient.val() + '&telephone=' + telephoneClient.val()
                + '&address=' + addressClient.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('codeclient', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Ce propriétaire existe déjà.',
                                fr: "Ce propriétaire existe déjà"
                            }
                        });
                        codeClient.on('change', function () {
                            window.Parsley.addValidator('codeclient', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            codeClient.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('codeclient', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('Le propriétaire a été ajouté avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var owner = $('#sbc_bienbundle_bien_owner');
                        var owners = owner[0].selectize;
                        owners.addOption({
                            text: json.clientName,
                            value: json.id
                        });
                        owners.addItem(json.id);
                    }
                    codeClient.parsley().validate();
                },
                error: function () {
                    codeClient.parsley().validate();
                }
            });
        }
        else {
            codeClient.parsley().validate();
        }
    }
    function templateProcuration() {
        return '' +
                '<div class="uk-width-medium-1-4 bloc">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label> Date procuration</label>' +
                '#dateProcuration#' +
                '</div>' +
                '</div>' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label> Lieu</label>' +
                '#lieu#' +
                '</div>' +
                '</div>' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label>Propriétaire</label>' +
                '#client#' +
                '</div>' +
                '</div>' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label> Donne procuration à</label>' +
                '#representant#' +
                '</div>' +
                '</div>' +
                '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
                '</div>';
    }
//    function templateRepresentant() {
//        return '<div class="uk-width-medium-1-4 bloc">' +
//                '<div class="uk-form-row">' +
//                '<div class="parsley-row">' +
//                '<label>Propriétaire</label>' +
//                '#client#' +
//                '</div>' +
//                '</div>' +
//                '<div class="uk-form-row">' +
//                '<div class="parsley-row">' +
//                '<label>Representant</label>' +
//                '#representant#' +
//                '</div>' +
//                '</div>' +
//                '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
//                '</div>'
//                ;
//    }
    function templateOwner() {
        return '<div class="uk-width-medium-1-2 bloc">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label>Propriétaire</label>' +
                '#client#' +
                '</div>' +
                '</div>' +
                '<a  id="addDemandeur" onclick="dropify()"'+
'        title="Ajouter un demandeur"'+
      '  data-uk-modal="{target:\'#modal-addDemandeur\'}"><i class="material-icons md-24">account_circle</i><i class="material-icons md-24">&#xE872;</i></a>' +
                '</div>'
                ;
    }
    function templateRepresentant() {
        return '<div class="uk-width-medium-1-2 bloc">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label>Représentant</label>' +
                '#client#' +
                '</div>' +
                '</div>' +
                '<a  id="addDemandeur" onclick="dropify()"'+
                '        title="Ajouter un demandeur"'+
                '  data-uk-modal="{target:\'#modal-addDemandeur\'}"><i class="material-icons md-24">account_circle</i><i class="material-icons md-24">&#xE872;</i></a>' +
                '</div>'
                ;
    }
    function templateLocataire() {
        return '<div class="uk-width-medium-1-2 bloc">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label>Locataire</label>' +
                '#client#' +
                '</div>' +
                '</div>' +
                '<a  id="addDemandeur" onclick="dropify()"'+
                '        title="Ajouter un demandeur"'+
                '  data-uk-modal="{target:\'#modal-addDemandeur\'}"><i class="material-icons md-24">account_circle</i><i class="material-icons md-24">&#xE872;</i></a>' +
                '</div>'
                ;
    }
    function templatePicture(counter) {
        return '<div class="uk-width-medium-4-4 bloc" style="margin-top: 25px">' +
                '<div class="uk-grid"  id="bloc_' + counter + '">' +
                '<div class="uk-width-medium-4-4 bloc">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label>Pièce ' + counter + '</label>' +
                '<a onclick="addImg(' + counter + ')"><i class="material-icons md-24">add</i></a>' +
                '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
                '#bigDesciption#' +
                '<span></span>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<hr>'

                ;
    }
    function templatePaper() {
        return '<div class="uk-width-medium-4-4">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label></label>' +
                '#file#' +
                '<span></span>' +
                '</div>' +
                '</div>' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label></label>' +
                '#description#' +
                '<span></span>' +
                '</div>' +
                '</div>' +
                '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
                '</div>' +
                '<hr>';


    }
    $(function () {
        var picture = $('#sbc_bienbundle_bien_mainPictureFile');
        $('.dropify-clear').on('click', function () {
            picture.prop('required', false);
        });
        picture.dropify({
            maxWidth: 100,
            minWidth: 100,
            defaultFile: '{{ vich_uploader_asset(bien, 'mainPictureFile') }}',
            messages: {
                'default': 'Cliquez ou glissez / déposez un fichier ici',
                'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                'remove': 'Supprimer',
                'error': 'Une erreur s\'est survenue'
            }
        });
        var domTitle = $('#sbc_bienbundle_bien_title');
        var oldtitle = domTitle.val().toUpperCase();
        domTitle.on('change', function () {
            var title = domTitle.val().toUpperCase();
            var url = '{{ path('bien_index', {'name': 'namE'}) }}';
            url = url.replace('namE', title);
            if (title !== oldtitle) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('title', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Ce bien existe déjà',
                                    fr: "Ce bien existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('title', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domTitle.parsley().validate();
                    }
                });
            }
        });
    });


    function addImg(counter) {

        var container = $('#bloc_' + counter);
        var childs = container.children().length + 1;
        picturesDOM = $('#sbc_bienbundle_bien_pictures');
        papersDOM = $('#sbc_bienbundle_bien_papers');
        prototypePictures = picturesDOM.attr('data-prototype');
        var prototypePicturesDOM = $('<div/>').html(this.prototypePictures).contents();
        var picturesPrototype = prototypePicturesDOM.find('#sbc_bienbundle_bien_pictures___name___pictures').attr('data-prototype');
        var ImgDom = $('<div/>').html(picturesPrototype).contents();
        console.log(picturesPrototype);
        var temp = SFCollectionAnalyzer.buildTemplate(ImgDom, templateImg());
        var block = temp.replace(/__name__/g, counter);
        block = block.replace(/__second__/g, childs);
        container.append(block);
        $('.btn-close').on('click', function () {
            this.closest('div').remove();
        });
        altair_md.init();
        container.find('input[type=file]').dropify({
            messages: {
                'default': 'Cliquez ou glissez / déposez un fichier ici',
                'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                'remove': 'Supprimer',
                'error': 'Une erreur s\'est survenue'
            }
        });
    }

    function templateImg() {
        return '<div class="uk-width-medium-1-4">' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label></label>' +
                '#picture#' +
                '<span></span>' +
                '</div>' +
                '</div>' +
                '<div class="uk-form-row">' +
                '<div class="parsley-row">' +
                '<label></label>' +
                '#description#' +
                '<span></span>' +
                '</div>' +
                '</div>' +
                '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
                '</div>';


    }
    $(document).ready(function () {
        hideDivs();
        $('#procurations_div').hide();
        $('#societe_div').hide();
    });
    function displayedChanged() {
        $('#prixAffiche_span').html($('#sbc_bienbundle_bien_displayPrice').val())
    }
    function priceChanged() {
        $('#prixClient_span').html($('#sbc_bienbundle_bien_price').val())
    }
    function estimatedPriceChanged() {
        $('#prixGd_span').html($('#sbc_bienbundle_bien_estimatedPrice').val())
    }


    function qualityChanged() {
        var type = $('#sbc_bienbundle_bien_representants').val();
        switch (type) {
            case 'Propriétaire' :
                $('#procurations_div').hide();
                $('#societe_div').hide();
                break;
            case 'Par procuration' :
                $('#procurations_div').show();
                $('#societe_div').hide();
                break;
            case 'Représentant de société' :
                $('#procurations_div').hide();
                $('#societe_div').show();
                break;
            default :


        }

    }
    function dropify() {
        var cin_recto = $('#sbc_tiersbundle_client_cinRecto_file');
        var cin_verso = $('#sbc_tiersbundle_client_cinVerso_file');
        $('#sbc_tiersbundle_client_cinRecto_description').css('width', '-webkit-fill-available');
        $('#sbc_tiersbundle_client_cinVerso_description').css('width', '-webkit-fill-available');
        $(function ($) {

            $('.dropify-clear').on('click', function () {
                cin_recto.prop('required', false);
                cin_verso.prop('required', false);
            });
            cin_verso.dropify({
                {#defaultFile: '{{ vich_uploader_asset(client.cinRecto, 'file') }}',#}
                messages: {
                    'default': 'Cliquez ici',
                    'replace': 'Cliquez ici',
                    'remove': 'Supprimer',
                    'error': 'Une erreur s\'est survenue'
                }
            });
            cin_recto.dropify({
                {#defaultFile: '{{ vich_uploader_asset(client.cinRecto, 'file') }}',#}
                messages: {
                    'default': 'Cliquez ici',
                    'replace': 'Cliquez ici ',
                    'remove': 'Supprimer',
                    'error': 'Une erreur s\'est survenue'
                }
            });
            $('.dropify-wrapper').css('height', '60%');
        });
        (function () {
            /**add address and contact functions**/
            var addressDOM = $('.address-block');
            var contactDOM = $('.contact-block');
            var _countAddress = addressDOM.children().length;
            var _countContact = contactDOM.children().length;

            $('#addAddress').on('click', function (e) {
//                var addressForm = addressDOM.attr('data-prototype');
                var addressForm = addressBlock();
                addressForm = addressForm.replace(/__name__/g, _countAddress);
                addressDOM.append(addressForm);
                _countAddress++;
                altair_md.init();
                altair_forms.init();
            });

            $('#addContact').on('click', function (e) {
//                var contactForm = contactDOM.attr('data-prototype');
                var contactForm = contactBlock();
                contactForm = contactForm.replace(/__name__/g, _countContact);
                contactDOM.append(contactForm);
                _countContact++;
                altair_md.init();
            });
        })();

        function addressBlock() {
            block = '<div class="uk-width-medium-1-3 block-form">' +
                    '<div class="uk-form-row parsley-row">' +
                    '<label for="product_editnufacturer_control">Titre</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[addresses][__name__][title]" required/>' +
                    '</div>' +
                    '<div class="uk-form-row parsley-row">' +
                    '<label for="product_edit_manufacturer_control">Adresse</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[addresses][__name__][address]" required/>' +
                    '</div>' +
                    '<div class="uk-form-row">' +
                    '<label for="product_edit_manufacturer_control">Cité</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[addresses][__name__][city]"/>' +
                    '</div>' +
                    '<div class="uk-form-row">' +
                    '<label for="product_edit_manufacturer_control">Governorat</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[addresses][__name__][governorate]"/>' +
                    '</div>' +
                    '<div class="uk-form-row">' +
                    '<label for="product_edit_manufacturer_control">Code postal</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[addresses][__name__][zipCode]"/>' +
                    '</div>' +
                    '<br>' +
                    '<div class="uk-width-medium-1-6">' +
                    '<a class="md-btn md-btn-danger md-btn-wave-light" href="javascript:void(0)" onclick="deleteBlock(this)">Supprimer</a>' +
                    '</div>' +
                    '</div>';

            return block;
        }

        function contactBlock() {
            block = '<div class="uk-width-medium-1-3 block-form">' +
                    '<div class="uk-form-row parsley-row">' +
                    '<label for="product_editnufacturer_control">Dénomination</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[contacts][__name__][denomination]" required/>' +
                    '</div>' +
                    '<div class="uk-form-row">' +
                    '<label for="product_edit_manufacturer_control">Description</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[contacts][__name__][description]"/>' +
                    '</div>' +
                    '<div class="uk-form-row">' +
                    '<label for="product_edit_manufacturer_control">Adresse mail</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[contacts][__name__][mail]"/>' +
                    '</div>' +
                    '<div class="uk-form-row parsley-row">' +
                    '<label for="product_edit_manufacturer_control">Téléphone</label>' +
                    '<input type="text" class="md-input" name="sbc_tiersbundle_client[contacts][__name__][tel]" required/>' +
                    '</div>' +
                    '<br>' +
                    '<div class="uk-width-medium-1-6">' +
                    '<a class="md-btn md-btn-danger md-btn-wave-light" href="javascript:void(0)" onclick="deleteBlock(this)">Supprimer</a>' +
                    '</div>' +
                    '</div>';

            return block;
        }

        function deleteBlock(btn) {
            $(btn).closest('.block-form').remove();
        }

        $("#sbc_tiersbundle_client_preferences_lundi").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#Lundi').css('color', 'red');
            }
            else {
                $('#Lundi').css('color', 'green');
            }
        });
        $("#sbc_tiersbundle_client_preferences_mardi").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#Mardi').css('color', 'red');
            }
            else {
                $('#Mardi').css('color', 'green');
            }
        });
        $("#sbc_tiersbundle_client_preferences_mercredi").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#Mercredi').css('color', 'red');
            }
            else {
                $('#Mercredi').css('color', 'green');
            }
        });
        $("#sbc_tiersbundle_client_preferences_jeudi").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#Jeudi').css('color', 'red');
            }
            else {
                $('#Jeudi').css('color', 'green');
            }
        });
        $("#sbc_tiersbundle_client_preferences_vendredi").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#Vendredi').css('color', 'red');
            }
            else {
                $('#Vendredi').css('color', 'green');
            }
        });
        $("#sbc_tiersbundle_client_preferences_samedi").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#samedi').css('color', 'red');
            }
            else {
                $('#Samedi').css('color', 'green');
            }
        });
        $("#sbc_tiersbundle_client_preferences_dimanche").on('ifChanged', function () {
            if ($(this).closest('div').hasClass('checked')) {
                $('#Dimanche').css('color', 'red');
            }
            else {
                $('#Dimanche').css('color', 'green');
            }
        });
        $('#sbc_tiersbundle_client_preferences_heure_minute').on('change', function () {
            var minute = $('#sbc_tiersbundle_client_preferences_heure_minute  option:selected').text();
            var heure = $('#sbc_tiersbundle_client_preferences_heure_hour  option:selected').text();
            $('#de_label').text(heure + ":" + minute);
        });
        $('#sbc_tiersbundle_client_preferences_heure_hour').on('change', function () {
            var minute = $('#sbc_tiersbundle_client_preferences_heure_minute  option:selected').text();
            var heure = $('#sbc_tiersbundle_client_preferences_heure_hour  option:selected').text();
            $('#de_label').text(heure + ":" + minute);
        });
        $('#sbc_tiersbundle_client_preferences_heureFin_minute').on('change', function () {
            var minute = $('#sbc_tiersbundle_client_preferences_heureFin_minute  option:selected').text();
            var heure = $('#sbc_tiersbundle_client_preferences_heureFin_hour  option:selected').text();
            $('#de_label').text(heure + ":" + minute);
        });

        $('#sbc_tiersbundle_client_preferences_heureFin_hour').on('change', function () {
            var minute = $('#sbc_tiersbundle_client_preferences_heureFin_minute  option:selected').text();
            var heure = $('#sbc_tiersbundle_client_preferences_heureFin_hour  option:selected').text();
            $('#a_label').text(heure + ":" + minute);
        })

    }
    function newDemandeur(elem) {

        var frm = $('#clientform');

//        alert($(elem('id')))

        frm.submit(function (e) {

            e.preventDefault();
            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),
                success: function (data) {
//                    $(".dynamic").each(function() {
//                        var mySelect = $(this).find('select');
//                        var widget = mySelect.data('kendoComboBox');
//                        var dataSource = widget.dataSource;
//                        dataSource.add({
//                            dataTextField: data.denomination,
//                            dataValueField: data.code
//                        });
//
//                        dataSource.one("sync", function() {
//                            widget.select(dataSource.view().length - 1);
//                        });
//
//                        dataSource.sync();
//                    });
//                    this.reInit();
                    console.log('Submission was successful.');


                    UIkit.modal.alert('Le client a été ajouté avec succès', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                },
                error: function (data) {
                    console.log('An error occurred.');
                    console.log(data);
                }
            });
        });


    }

    function getClientDetails(code) {

    }
</script>