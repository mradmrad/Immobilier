<div id="page_content_inner">
    <script src="https://cdn.ckeditor.com/4.6.2/standard-all/ckeditor.js"></script>
    <style>
        .controls {
            margin-top: 10px;
            border: 1px solid transparent;
            border-radius: 2px 0 0 2px;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            height: 32px;
            outline: none;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        #pac-input {
            background-color: #fff;
            font-family: Roboto;
            font-size: 15px;
            font-weight: 300;
            margin-left: 12px;
            padding: 3px;
            margin-top: 10px;
            text-overflow: ellipsis;
            width: 300px;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBK8ckSg8MXqpU9fQoZG_yoMnLb1zPmWM&v=3.exp&libraries=places">
    </script>
    {{ form_start(form, {'attr':{'class':'uk-form-stacked' , 'id' : 'form_validation'}}) }}
    {{ form_errors(form) }}

    <div class="uk-grid">
        <div class="uk-width-3-10">
            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Image principale
                    </h3>
                </div>
                <div class="md-card-content">
                    <div class="uk-margin-bottom uk-text-center uk-position-relative">
                        {{ form_widget(form.acquisition.bien.mainPictureFile) }}
                        <span>     {{ form_errors(form.acquisition.bien.mainPictureFile) }} </span>
                    </div>
                </div>
            </div>
            <div class="md-card">
                <div class="md-card-content">
                    <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                        <div class="uk-width-large-2-2">

                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.displayPrice,   "N° mandat"  ) }}

                                    <span class="uk-form-help-block">
                                     {{ mandat.numero }}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    Date prise :
                                    <span class="uk-form-help-block" id="dateStart_span">
                                     -
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    Date fin :
                                    <span class="uk-form-help-block" id="dateEnd_span">
                                     -
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Détails
                    </h3>
                </div>
                <div class="md-card-content">
                    <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                        <div class="uk-width-large-2-2">

                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.displayPrice,   "Prix à afficher"  ) }}

                                    <span class="uk-form-help-block" id="prixAffiche_span">
                                      {% if mandat.acquisition %}
                                      {% else %}
                                          -
                                      {% endif %}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="md-card">
                <div class="md-card-toolbar">
                    <h3 class="md-card-toolbar-heading-text">
                        Adresses
                    </h3>
                </div>
                <div class="md-card-content">
                    <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                        <div class="uk-width-large-2-2">
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Rue :</span>
                                    <span id="rue_span">
                                        {% if mandat.acquisition %}
                                            {{ mandat.acquisition.bien.address.rue }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Sous ville :</span>
                                    <span id="sousVille_span">
                                        {% if mandat.acquisition %}
                                            {{ mandat.acquisition.bien.address.rue.localite }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Ville :</span>
                                    <span id="ville_span">
                                    {% if mandat.acquisition %}
                                        {{ mandat.acquisition.bien.address.rue.localite.ville }}
                                    {% else %}
                                        -
                                    {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    <span class="uk-form-help-block">Gouvernorat :</span>
                                    <span id="gouvernorat_span">
                                       {% if mandat.acquisition %}
                                           {{ mandat.acquisition.bien.address.rue }}
                                       {% else %}
                                           -
                                       {% endif %}
                                    </span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-width-7-10">
            <div class="uk-grid">
                <div class="uk-width-7-10">
                    <div class="md-card">

                        <div class="md-card-content">
                            <div class="uk-grid">
                                <div class="uk-width-1-4">
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block"> Nom et prénom</span>
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block"> Tél</span>
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block"> Email</span>
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block">Propriétaire :</span>

                                </div>
                                <div class="uk-width-1-4">

                                    {% if mandat.acquisition %}
                                        {% for owner in  mandat.acquisition.bien.owners %}
                                            {{ owner.client.denomination }}
                                            {{ owner.client.prenom }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}

                                </div>
                                <div class="uk-width-1-4">
                                    {% if mandat.acquisition %}
                                        {% for owner in  mandat.acquisition.bien.owners %}
                                            {{ owner.client.tel }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    {% if mandat.acquisition %}
                                        {% for owner in  mandat.acquisition.bien.owners %}
                                            {{ owner.client.website }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block">Representé par :</span>
                                </div>
                                <div class="uk-width-1-4">
                                    {% if mandat.acquisition %}
                                        {% for representant in  mandat.acquisition.bien.representants %}
                                            {{ representant.representant.denomination }}
                                            {{ representant.representant.prenom }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    {% if mandat.acquisition %}
                                        {% for representant in  mandat.acquisition.bien.representants %}
                                            {{ representant.representant.tel }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    {% if mandat.acquisition %}
                                        {% for representant in  mandat.acquisition.bien.representants %}
                                            {{ representant.representant.website }}
                                            <br>
                                        {% endfor %}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-4">
                                    <span class="uk-form-help-block">Locataire :</span>
                                </div>
                                <div class="uk-width-1-4">

                                    -
                                </div>
                                <div class="uk-width-1-4">
                                    -
                                </div>
                                <div class="uk-width-1-4">
                                    -
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-width-3-10">
                    <div class="md-card">

                        <div class="md-card-content">
                            <div class="uk-grid">
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block">    Date d'insertion : </span>
                                </div>
                                <div class="uk-width-1-2">
                                    {{ mandat.creationDate|date('d-m-Y') }}
                                </div>
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block">  Inseré par :</span>
                                </div>
                                <div class="uk-width-1-2">
                                    {% if mandat.acquisition %}
                                        {{ mandat.acquisition.bien.createdBy }}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block">  Dernière modification :</span>
                                </div>
                                <div class="uk-width-1-2">
                                    {{ mandat.updatedAt|date('d-m-Y') }}
                                </div>
                                <div class="uk-width-1-2">
                                    <span class="uk-form-help-block"> Modifié par :</span>
                                </div>
                                <div class="uk-width-1-2">
                                    {% if mandat.acquisition %}
                                        {{ mandat.acquisition.bien.createdBy }}
                                    {% else %}
                                        -
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ul class="uk-tab" data-uk-tab="{connect:'#tabs'}" id="tabs_1">
                <li class="uk-active"><a href="#">Général</a></li>
                <li><a href="#">Détails</a></li>
                <li><a href="#">Statut et modalité de paiement</a></li>
                <li><a href="#">Photos & Papiers</a></li>
                <li><a href="#">Offres et acceptations</a></li>
                <li><a href="#">Commissions</a></li>
            </ul>
            <ul id="tabs" class="uk-switcher uk-margin">
                <li>
                    <div class="uk-grid uk-grid-medium" data-uk-grid-margin>

                        <div class="uk-width-xLarge-10-10  uk-width-large-10-10">

                            <div class="md-card">
                                <div class="md-card-toolbar">
                                    <h3 class="md-card-toolbar-heading-text">
                                        Details
                                    </h3>
                                </div>
                                <div class="md-card-content large-padding">
                                    {#<div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>#}


                                    <div class="uk-form-row">
                                        <div class="uk-grid uk-grid-small" data-uk-grid-margin>
                                            <div class="uk-width-large-2-3">
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        <span class="uk-form-help-block">Type de bien</span>
                                                        {{ form_widget(form.acquisition.bien.typeBien,
                                                        {'attr': {'data-md-selectize':'', 'data-md-selectize-bottom':'' , 'onchange' : 'checkType()'}}) }}
                                                    </div>
                                                    <span>     {{ form_errors(form.acquisition.bien.typeBien) }} </span>
                                                </div>
                                            </div>
                                            <div class="uk-width-large-1-3">
                                                <div class="uk-form-row" style="padding-top: 30px;">
                                                    <a id="addTypeBien" title="Ajouter un type de bien"
                                                       data-uk-modal="{target:'#modal-addTypeBien'}">
                                                        <i class="material-icons md-24">&#xE146;</i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {#<div class="uk-form-row">#}
                                    {#<div class="parsley-row">#}
                                    {#<span class="uk-form-help-block">Vente/Location</span>#}
                                    {#{{ form_widget(form.acquisition.bien.nature) }}#}
                                    {#<span>     {{ form_errors(form.acquisition.bien.nature) }} </span>#}
                                    {#</div>#}
                                    {#</div>#}


                                    {#<div class="uk-grid uk-grid-small" data-uk-grid-margin>#}
                                    {#<div class="uk-width-large-2-3">#}
                                    {#<div class="uk-form-row">#}
                                    {#<div class="parsley-row">#}
                                    {#<span class="uk-form-help-block">Agence</span>#}
                                    {#{{ form_widget(form.acquisition.bien.agency) }}#}
                                    {#</div>#}
                                    {#<span>     {{ form_errors(form.acquisition.bien.agency) }} </span>#}
                                    {#</div>#}
                                    {#</div>#}
                                    {#<div class="uk-width-large-1-3">#}
                                    {#<div class="uk-form-row" style="padding-top: 30px;">#}
                                    {#<a id="addAgency" title="Ajouter une agence"#}
                                    {#data-uk-modal="{target:'#modal-addAgency'}">#}
                                    {#<i class="material-icons md-24">&#xE146;</i>#}
                                    {#</a>#}
                                    {#</div>#}
                                    {#</div>#}
                                    {#</div>#}
                                    <div class="uk-form-row">
                                        <div class="parsley-row">
                                            <span class="uk-form-help-block">Raison</span>
                                            {{ form_widget(form.acquisition.bien.nature) }}
                                            <span>     {{ form_errors(form.acquisition.bien.nature) }} </span>
                                        </div>
                                    </div>

                                    {#</div>#}
                                </div>
                            </div>
                            <div class="md-card">
                                <div class="md-card-toolbar">
                                    <h3 class="md-card-toolbar-heading-text">
                                        {{ form_label(form.acquisition.bien.address, "Adresse") }}
                                    </h3>
                                </div>
                                <div class="md-card-content">
                                    <div class="uk-grid" data-uk-grid-margin>
                                        <div class="uk-width-medium-2-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group">
                                        <span class="uk-input-group-addon">
                                                                <i class="material-icons">&#xE55E;</i>
                                                            </span>
                                                        <span class="uk-form-help-block">Gouvernorat</span>
                                                        <select placeholder="Choisir une gouvenrnorat"
                                                                id="gouvernorat"
                                                                data-md-selectize data-md-selectize-bottom
                                                                onchange="getVilles(this)">
                                                            {% if mandat.id is not null %}
                                                                <option value="{{ mandat.acquisition.bien.address.rue.localite.ville.gouvernorat.id }}">
                                                                    {{ mandat.acquisition.bien.address.rue.localite.ville.gouvernorat.name }}
                                                                </option>
                                                            {% endif %}
                                                            <option></option>
                                                            {% for gouvernorat in gouvernorats %}
                                                                <option value="{{ gouvernorat.id }}"> {{ gouvernorat.name }}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-medium-1-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <a hidden id="modifierGouvernorat"
                                                       title="Modifier la gouvernorat"
                                                       data-uk-modal="{target:'#modal-modifierGouvernorat'}">
                                                        <i class="material-icons md-24">&#xE254;</i>
                                                    </a>
                                                    <a hidden id="supprimerGouvernorat"
                                                       title="Supprimer la gouvernorat"
                                                       data-uk-modal="{target:'#modal-supprimerGouvernorat'}"
                                                       onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette gouvernorat ?',
                                                            function(){ supprimerGouvernorat($('#gouvernorat').val());});">
                                                        <i class="material-icons md-24">&#xE872;</i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid" data-uk-grid-margin>
                                        <div class="uk-width-medium-2-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group">
                                                            <span class="uk-input-group-addon">
                                                                <i class="material-icons">&#xE55F;</i>
                                                            </span>
                                                        <span class="uk-form-help-block">Ville</span>
                                                        <select placeholder="Choisir une ville" id="ville"
                                                                data-md-selectize
                                                                data-md-selectize-bottom
                                                                onchange="getLocalites(this)">
                                                            {% if mandat.id is not null %}
                                                                <option value="{{ mandat.acquisition.bien.address.rue.localite.ville.id }}">
                                                                    {{ mandat.acquisition.bien.address.rue.localite.ville.name }}
                                                                </option>
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-medium-1-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <a hidden id="ajouterVille" title="Ajouter une ville"
                                                       data-uk-modal="{target:'#modal-ajouterVille'}">
                                                        <i class="material-icons md-24">&#xE146;</i>
                                                    </a>
                                                    <a hidden id="modifierVille" title="Modifier la ville"
                                                       data-uk-modal="{target:'#modal-modifierVille'}">
                                                        <i class="material-icons md-24">&#xE254;</i>
                                                    </a>
                                                    <a hidden id="supprimerVille" title="Supprimer la ville"
                                                       data-uk-modal="{target:'#modal-supprimerVille'}"
                                                       onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette ville ?',
                                                                    function(){ supprimerVille($('#ville').val());});">
                                                        <i class="material-icons md-24">&#xE872;</i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid" data-uk-grid-margin>
                                        <div class="uk-width-medium-2-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group">
                                                            <span class="uk-input-group-addon">
                                                                <i class="material-icons">&#xE569;</i>
                                                            </span>
                                                        <span class="uk-form-help-block">Localité</span>
                                                        <select placeholder="Choisir une localité" id="localite"
                                                                data-md-selectize data-md-selectize-bottom
                                                                onchange="getRues(this)">
                                                            {% if mandat.id is not null %}
                                                                <option value="{{ mandat.acquisition.bien.address.rue.localite.id }}">
                                                                    {{ mandat.acquisition.bien.address.rue.localite.name }}
                                                                </option>
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-medium-1-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <div class="uk-input-group">
                                                        <a hidden id="ajouterLocalite"
                                                           title="Ajouter une localité"
                                                           data-uk-modal="{target:'#modal-ajouterLocalite'}">
                                                            <i class="material-icons md-24">&#xE146;</i>
                                                        </a>
                                                        <a hidden id="modifierLocalite"
                                                           title="Modifier la localité"
                                                           data-uk-modal="{target:'#modal-modifierLocalite'}">
                                                            <i class="material-icons md-24">&#xE254;</i>
                                                        </a>
                                                        <a hidden id="supprimerLocalite"
                                                           title="Supprimer la localité"
                                                           data-uk-modal="{target:'#modal-supprimerLocalite'}"
                                                           onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette localité ?',
                                                                        function(){ supprimerLocalite($('#localite').val());});">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid" data-uk-grid-margin>
                                        <div class="uk-width-medium-2-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group">
                                                                    <span class="uk-input-group-addon"><i
                                                                                class="material-icons">&#xE566;</i>  </span>
                                                        <span class="uk-form-help-block">Rue</span>
                                                        <select placeholder="Choisir une rue" id="rue"
                                                                name="sbc_geotunisiebundle_adresse_rue"
                                                                data-md-selectize data-md-selectize-bottom
                                                                onchange="getAdresses(this)">
                                                            {% if mandat.id is not null %}
                                                                <option value="{{ mandat.acquisition.bien.address.rue.id }}">
                                                                    {{ mandat.acquisition.bien.address.rue.name }}
                                                                </option>
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-medium-1-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row" style="padding-top: 22px;">
                                                    <div class="uk-input-group">
                                                        <a hidden id="ajouterRue" title="Ajouter une rue"
                                                           data-uk-modal="{target:'#modal-ajouterRue'}">
                                                            <i class="material-icons md-24">&#xE146;</i>
                                                        </a>
                                                        <a hidden id="modifierRue" title="Modifier la rue"
                                                           data-uk-modal="{target:'#modal-modifierRue'}">
                                                            <i class="material-icons md-24">&#xE254;</i>
                                                        </a>
                                                        <a hidden id="supprimerRue" title="Supprimer la rue"
                                                           data-uk-modal="{target:'#modal-supprimerRue'}"
                                                           onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette rue ?',
                                                                    function(){ supprimerRue($('#rue').val());});">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-grid" data-uk-grid-margin>
                                        <div class="uk-width-medium-2-3">
                                            <div class="uk-form-row">
                                                <div class="parsley-row">
                                                    <div class="uk-input-group">
                                                            <span class="uk-input-group-addon">
                                                                <i class="material-icons">&#xE84F;</i>
                                                            </span>
                                                        <span class="uk-form-help-block">Numéro</span>
                                                        {{ form_widget(form.acquisition.bien.address
                                                        ,{'attr': {'data-md-selectize':'', 'data-md-selectize-bottom':''}}) }}
                                                        <span> {{ form_errors(form.acquisition.bien.address) }} </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-medium-1-3">
                                            <div class="parsley-row" style="padding-top: 22px;">
                                                <div class="uk-form-row">
                                                    <div class="uk-input-group">
                                                        <a hidden id="ajouterAdresse"
                                                           title="Ajouter une adresse"
                                                           data-uk-modal="{target:'#modal-ajouterAdresse'}">
                                                            <i class="material-icons md-24">&#xE146;</i>
                                                        </a>
                                                        <a hidden id="modifierAdresse"
                                                           title="Modifier l'adresse"
                                                           data-uk-modal="{target:'#modal-modifierAddresse'}">
                                                            <i class="material-icons md-24">&#xE254;</i>
                                                        </a>
                                                        <a hidden id="supprimerAdresse"
                                                           title="Supprimer l'adresse"
                                                           data-uk-modal="{target:'#modal-supprimerAdresse'}"
                                                           onclick="UIkit.modal.confirm('Voulez vous vraiment supprimer cette adresse ?',
                                                                     function(){ supprimerAdresse($('#adresse').val());});">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 20px">
                                        <div class="uk-grid">

                                            <div class="uk-width-medium-4-4">
                                            <span class="uk-form-help-block">
                                                - En cas ou c'est un appartement dans un complexe
                                            </span>
                                            </div>
                                            <div class="uk-width-medium-3-4">
                                                <div class="uk-form-row">
                                                    {{ form_label(form.acquisition.bien.residence, "Résidence") }}
                                                    {{ form_widget(form.acquisition.bien.residence) }}
                                                </div>
                                            </div>
                                            <div class="uk-width-medium-1-4">
                                                <div class="uk-form-row">
                                                    {{ form_label(form.acquisition.bien.bloc, "Bloc") }}
                                                    {{ form_widget(form.acquisition.bien.bloc) }}
                                                </div>
                                            </div>
                                            <div class="uk-width-medium-1-2">
                                                <div class="uk-form-row">
                                                    {{ form_label(form.acquisition.bien.etage, "Etage") }}
                                                    {{ form_widget(form.acquisition.bien.etage) }}
                                                </div>
                                            </div>
                                            <div class="uk-width-medium-1-2">
                                                <div class="uk-form-row">
                                                    {{ form_label(form.acquisition.bien.nbrEtage, "Nbr étages") }}
                                                    {{ form_widget(form.acquisition.bien.nbrEtage) }}
                                                </div>
                                            </div>
                                            <div class="uk-width-medium-1-2">
                                                <div class="uk-form-row">
                                                    {{ form_label(form.acquisition.bien.numApp, "Numéro appartement") }}
                                                    {{ form_widget(form.acquisition.bien.numApp) }}
                                                </div>
                                            </div>
                                            <div class="uk-width-medium-1-2">
                                                <div class="uk-form-row">
                                                    {{ form_label(form.acquisition.bien.espaceCommun, "Superficie couvert avec espace commun") }}
                                                    {{ form_widget(form.acquisition.bien.espaceCommun) }}
                                                </div>
                                            </div>


                                        </div>
                                        <div class="uk-grid">
                                            <div class="parsley-row ">
                                                <div class="uk-grid uk-grid-divider uk-grid-medium"
                                                     data-uk-grid-margin>
                                                    <div class="uk-width-medium-1-3">
                                                        <div class="parsley-row uk-form-row">
                                                            {{ form_label(form.fraisDeCorporite, "Frais de corporité") }}
                                                            {{ form_widget(form.fraisDeCorporite) }}
                                                            <span>     {{ form_errors(form.fraisDeCorporite) }} </span>
                                                        </div>
                                                    </div>
                                                    <div class="uk-width-medium-2-3">
                                                        <div class="parsley-row uk-form-row">
                                                                    <span class="uk-form-help-block">
                                                                        {{ form_label(form.periodeFraisDeCorporite, "Période" ) }}
                                                                    </span>
                                                            <div class="dynamic_radio uk-margin-small-top">
                                                                {% for child in form.periodeFraisDeCorporite %}
                                                                    <span class="icheck-inline">
                                                                                {{ form_widget(child) }}
                                                                        {{ form_label(child) }}
                                                                            </span>
                                                                {% endfor %}
                                                                <span>{{ form_errors(form.periodeFraisDeCorporite) }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Superficie
                                        </h3>
                                    </div>
                                    <div class="uk-grid" style="margin-top: 20px">
                                        <div class="uk-width-1-2">
                                            <div class="parsley-row">
                                                {{ form_label(form.acquisition.bien.totalArea,   "Superficie terrain"  ) }}
                                                {{ form_widget(form.acquisition.bien.totalArea, {'attr': {'class': 'md-input numeric'}}) }}
                                                <span>     {{ form_errors(form.acquisition.bien.totalArea) }} </span>
                                            </div>
                                        </div>
                                        <div class="uk-width-1-2">
                                            <div class="parsley-row">
                                                {{ form_label(form.acquisition.bien.coveredArea,   "Superficie couverte"  ) }}
                                                {{ form_widget(form.acquisition.bien.coveredArea, {'attr': {'class': 'md-input numeric'}}) }}
                                                <span>     {{ form_errors(form.acquisition.bien.coveredArea) }} </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="md-card">
                        <div class="md-card-toolbar">
                            <h3 class="md-card-toolbar-heading-text">
                                Statut juridique
                            </h3>
                        </div>
                        <div class="md-card-content large-padding">
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.title,   "Titre de propriété"  ) }}
                                    {{ form_widget(form.acquisition.bien.title,
                                    {'attr': {'class': 'md-input', 'required':'', 'data-parsley-title':'3'}}) }}
                                    <span>     {{ form_errors(form.acquisition.bien.title) }} </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.nomProp,   "Nom propriété"  ) }}
                                    {{ form_widget(form.acquisition.bien.nomProp) }}
                                    <span>     {{ form_errors(form.acquisition.bien.nomProp) }} </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.provenance,   "Provenance"  ) }}
                                    {{ form_widget(form.acquisition.bien.provenance) }}
                                    <span>     {{ form_errors(form.acquisition.bien.provenance) }} </span>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="md-card">
                        <div class="md-card-toolbar">
                            <h3 class="md-card-toolbar-heading-text">
                                Urbanisme
                            </h3>
                        </div>
                        <div class="md-card-content large-padding">
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.zone,   "Zone"  ) }}
                                    {{ form_widget(form.acquisition.bien.zone,
                                    {'attr': {'class': 'md-input', 'required':'', 'data-parsley-title':'3'}}) }}
                                    <span>     {{ form_errors(form.acquisition.bien.zone) }} </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.coSol,   "Coefficient d'occupation du sol"  ) }}
                                    {{ form_widget(form.acquisition.bien.coSol) }}
                                    <span>     {{ form_errors(form.acquisition.bien.coSol) }} </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.coFinanciere,   "Coefficient d'occupation financière"  ) }}
                                    {{ form_widget(form.acquisition.bien.coFinanciere) }}
                                    <span>     {{ form_errors(form.acquisition.bien.coFinanciere) }} </span>
                                </div>
                            </div>
                            <div class="uk-form-row">
                                <div class="parsley-row">
                                    {{ form_label(form.acquisition.bien.usage,   "usage"  ) }}
                                    {{ form_widget(form.acquisition.bien.usage) }}
                                    <span>     {{ form_errors(form.acquisition.bien.usage) }} </span>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="md-card">
                        <div class="md-card-toolbar">
                            <h3 class="md-card-toolbar-heading-text">
                                Map
                                {{ form_widget(form.acquisition.bien.ismapped
                                , {'attr': {'data-md-icheck': ''}}
                                ) }}
                            </h3>
                        </div>
                        <div class="md-card-content large-padding">
                            <div id="displaymap">
                                <div id="map-canvas" style="width: 100%; height: 375px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="md-card">
                        <div class="md-card-toolbar">
                            <h3 class="md-card-toolbar-heading-text">
                                Responsables de la propriété
                            </h3>
                        </div>
                        <div class="md-card-content large-padding">
                            <div class="uk-grid">
                                <div class="uk-width-1-4">

                                    En qualité de :
                                </div>
                                <div class="uk-width-3-4">

                                    {{ form_widget(form.acquisition.bien.representants) }}
                                </div>

                            </div>

                        <div class="uk-grid">
                            <div class="uk-width-1-4">

                                Propriétaire  <a id="addOwner"><i class="material-icons md-24">&#xE146;</i></a>
                                :
                            </div>
                            <div class="uk-width-3-4">
                                <div class="md-card-content large-padding">
                                    {% if mandat.id == 0 or form.acquisition.bien.owners|length ==0 %}
                                        {{ form_widget(form.acquisition.bien.owners) }}
                                    {% else %}
                                        <div id="{{ form.acquisition.bien.owners.vars.id }}" class="uk-grid"
                                             data-uk-grid-margin
                                             data-prototype="{{ form_widget(form.acquisition.bien.owners.vars.prototype)|e('html_attr') }}">
                                            {% for owner in form.acquisition.bien.owners %}
                                                <div class="uk-width-medium-2-4 blockSection">
                                                    <div class="uk-form-row">
                                                        <div class="parsley-row">
                                                            {{ form_label(owner.client,   "Propriétaire"  ) }}
                                                            {{ form_widget(owner.client) }}
                                                            <span>{{ form_errors(owner.client) }}</span>
                                                        </div>
                                                    </div>
                                                    <a class="btn-close">
                                                        <i class="material-icons md-24">&#xE872;</i>
                                                    </a>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    {% endif %}

                                </div>
                            </div>

                        </div>

                            <div id="procurations_div" class="uk-grid">
                                <div class="uk-width-1-4">
                                   Procurations    <a id="addProcuration"><i class="material-icons md-24">&#xE146;</i></a>

                                </div>
                                <div class="uk-width-3-4">
                                    <div class="md-card-content large-padding">
                                        {% if mandat.id == 0 or form.acquisition.bien.procurations|length ==0 %}
                                            {{ form_widget(form.acquisition.bien.procurations) }}
                                        {% else %}
                                            <div id="{{ form.acquisition.bien.procurations.vars.id }}" class="uk-grid"
                                                 data-uk-grid-margin
                                                 data-prototype="{{ form_widget(form.acquisition.bien.procurations.vars.prototype)|e('html_attr') }}">
                                                {% for procuration in form.procurations %}
                                                    <div class="uk-width-medium-1-4 blockSection">
                                                        <div class="uk-form-row">
                                                            <div class="parsley-row">
                                                                {{ form_label(procuration.dateProcuration,   "Date procuration"  ) }}
                                                                {{ form_widget(procuration.dateProcuration) }}
                                                                <span>{{ form_errors(procuration.dateProcuration) }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="uk-form-row">
                                                            <div class="parsley-row">
                                                                {{ form_label(procuration.lieu,   "Lieu"  ) }}
                                                                {{ form_widget(procuration.lieu) }}
                                                                <span> {{ form_errors(procuration.lieu) }}</span>
                                                            </div>
                                                        </div>

                                                        <div class="uk-form-row">
                                                            <div class="parsley-row">
                                                                {{ form_label(procuration.representant,   "Donne procuration à"  ) }}
                                                                {{ form_widget(procuration.representant) }}
                                                                <span>{{ form_errors(procuration.representant) }}</span>
                                                            </div>
                                                        </div>
                                                        <a class="btn-close">
                                                            <i class="material-icons md-24">&#xE872;</i>
                                                        </a>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% endif %}


                                    </div>
                                </div>
                            </div>
                        <div id="societe_div"  class="uk-grid">
                            <div class="uk-width-1-4">Representant :</div>
                            <div class="uk-width-3-4">
                                <div class="uk-form-row">

                                    <label>Poste</label>
                                    {{ form_widget(form.acquisition.bien.societePoste) }}
                                </div>
                                <div class="uk-form-row">
                                    <label>Nom et prénom</label>
                                    {{ form_widget(form.acquisition.bien.representantNom) }}
                                </div>
                            </div>

                        </div>

                        </div>

                    </div>

                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">

                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    {{ form_label(form.acquisition.bien.description, "Texte descriptif (Site)") }}
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-width-large-2-2">
                                        <div class="uk-form-row">
                                            <div class="parsley-row">
                                                {{ form_label(form.acquisition.bien.titre,'Titre du bien') }}
                                                {{ form_widget(form.acquisition.bien.titre) }}
                                                <span> {{ form_errors(form.acquisition.bien.titre) }} </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">
                                        <div class="uk-form-row">
                                            <div class="parsley-row">
                                                {{ form_widget(form.acquisition.bien.description, {'attr': {'class': 'md-input', 'name':'description',
                                                    'cols':'10', 'rows':'8', 'data-parsley-trigger':'keyup',
                                                    'data-parsley-validation-threshold':'10'}}) }}
                                                <span> {{ form_errors(form.acquisition.bien.description) }} </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="uk-width-large-2-2">
                                    <div class="parsley-row">
                                        {{ form_label(form.acquisition.bien.vitrine,   "Texte fiche vitrine"  ) }}
                                        {{ form_widget(form.acquisition.bien.vitrine) }}

                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Autre détails
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>

                                    <div class="uk-width-large-1-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.bedroom,   "Chambre(s)" ) }}
                                            {{ form_widget(form.acquisition.bien.bedroom, {'attr': {'class': 'md-input'}}) }}
                                            <span>     {{ form_errors(form.acquisition.bien.bedroom) }} </span>
                                        </div>


                                    </div>
                                    <div class="uk-width-large-1-2">
                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.bathroom,   "Salle(s) de bain"  ) }}
                                            {{ form_widget(form.acquisition.bien.bathroom, {'attr': {'class': 'md-input'}}) }}

                                            <span>     {{ form_errors(form.acquisition.bien.bathroom) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-1-2">
                                        <div class="parsley-row">
                                        <span class="uk-form-help-block">Equipements(Cliquez pour selectionner)
                                          <a id="addEquipement" title="Ajouter un équipement"
                                             data-uk-modal="{target:'#modal-addEquipement'}">
                                            <i class="material-icons md-24">&#xE146;</i>
                                        </a>
                                        </span>
                                            {{ form_widget(form.acquisition.bien.equipements,
                                            {'attr': {'data-md-selectize':'', 'data-md-selectize-bottom':''}}) }}

                                            <span>     {{ form_errors(form.acquisition.bien.equipements) }} </span>

                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">
                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.facade,   "Facade"  ) }}
                                            {{ form_widget(form.acquisition.bien.facade) }}

                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">
                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.exterieur,   "A l'extérieur"  ) }}
                                            {{ form_widget(form.acquisition.bien.exterieur) }}

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Détails architecturales
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>

                                    <div class="uk-width-large-2-2">
                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.architecture,   "Architecture" ) }}
                                            {{ form_widget(form.acquisition.bien.architecture) }}
                                            <span>     {{ form_errors(form.acquisition.bien.architecture) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-1-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.construction,   "Date de contruction" ) }}
                                            {{ form_widget(form.acquisition.bien.construction) }}
                                            <span>     {{ form_errors(form.acquisition.bien.construction) }} </span>
                                        </div>


                                    </div>
                                    <div class="uk-width-large-1-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.renovation,   "Date de rénovation" ) }}
                                            {{ form_widget(form.acquisition.bien.renovation) }}
                                            <span>     {{ form_errors(form.acquisition.bien.renovation) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.statutConstruction,   "Statut de construction" ) }}
                                            {{ form_widget(form.acquisition.bien.statutConstruction) }}
                                            <span>     {{ form_errors(form.acquisition.bien.statutConstruction) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.formeTerrain,   "Forme de terrain" ) }}
                                            {{ form_widget(form.acquisition.bien.formeTerrain) }}
                                            <span>     {{ form_errors(form.acquisition.bien.formeTerrain) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-1-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.largeurFacade,   "Largeur facade" ) }}
                                            {{ form_widget(form.acquisition.bien.largeurFacade) }}
                                            <span>     {{ form_errors(form.acquisition.bien.largeurFacade) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-1-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.profondeurFacade,   "Profondeur facade" ) }}
                                            {{ form_widget(form.acquisition.bien.profondeurFacade) }}
                                            <span>     {{ form_errors(form.acquisition.bien.profondeurFacade) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.orientation,   "Orientation" ) }}
                                            {{ form_widget(form.acquisition.bien.orientation) }}
                                            <span>     {{ form_errors(form.acquisition.bien.orientation) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.delimination,   "Délimination du terrain par rapport aux propriètés voisines " ) }}
                                            {{ form_widget(form.acquisition.bien.delimination) }}
                                            <span>     {{ form_errors(form.acquisition.bien.delimination) }} </span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-2">

                                        <div class="parsley-row">
                                            {{ form_label(form.acquisition.bien.stationnement,   "Accées & Stationnement" ) }}
                                            {{ form_widget(form.acquisition.bien.stationnement) }}
                                            <span>     {{ form_errors(form.acquisition.bien.stationnement) }} </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Equipement de voirie et canalisation
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>

                                    <div class="uk-width-large-3-4">
                                        Présence d'élétricité STEG
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.steg) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'eau de ville SONEDE
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.sonede) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence de gaz de ville
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.gaz) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'égout ONAS
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.onas) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'éclairage publique
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.eclairage) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence de réseau téléphonique
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.telephone) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence d'équipement routiers
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.route) }}
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        Présence trottoires
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.acquisition.bien.canalisations.trottoir) }}
                                    </div>


                                </div>
                            </div>
                        </div>

                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Autres
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-divider uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-width-large-2-4">
                                        Panorama visuel depuis la proprièté
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.acquisition.bien.panorama) }}
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Amenagement & paysages
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.acquisition.bien.paysage) }}
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Style des constructions existantes dans le secteur
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.acquisition.bien.style) }}

                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Proximité de services
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.acquisition.bien.proximite) }}

                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Distance du centre ville
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.acquisition.bien.distanceCV) }}

                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Influence genantes de voisinage
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.acquisition.bien.influence) }}
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">

                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Prix
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-medium" data-uk-grid-margin>


                                    <div class="uk-width-1-4">
                                        Evaluation client
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.acquisition.bien.price,
                                        {'attr': {'class': 'md-input money', 'data-parsley-price':'3'}}) }}
                                    </div>
                                    <div class="uk-width-1-4">
                                        Evaluation Green-Duck
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.acquisition.bien.estimatedPrice, {'attr': {'class': 'md-input money',
                                            'data-parsley-estimatedprice':'3'}}) }}
                                    </div>
                                    <div class="uk-width-1-4">
                                        Prix affiché
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.acquisition.bien.displayPrice, {'attr': {'class': 'md-input money',
                                            'data-parsley-displayprice':'3'}}) }}
                                    </div>
                                    <div class="uk-width-1-4">
                                        Marge de négociation
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.acquisition.bien.margeNegociation) }}
                                    </div>


                                </div>
                            </div>


                        </div>
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Mandat
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-width-1-4">
                                        N° mandat
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.numero) }}
                                    </div>


                                    <div class="uk-width-large-2-4">
                                        Date prise de mandat :
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.dateDebutEffetMandat ,{'attr' : { 'placeholder' : 'De' }}) }}
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Date fin de mandat :
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.dateExpirationEffetMandat ,{'attr' : { 'placeholder' : 'A' }}) }}
                                    </div>
                                    <div class="uk-width-4-4">
                                    <span class="uk-form-help-block">
                                    {{ form_label(form.resoluOuRenouvele, "Résolu ou tacitement renouvelé" ) }}
                                    </span>
                                        <div class="dynamic_radio uk-margin-small-top">
                                            {% for child in form.resoluOuRenouvele %}
                                                <span class="icheck-inline">
                                    {{ form_widget(child) }}
                                                    {{ form_label(child) }}
                                    </span>
                                            {% endfor %}
                                            <span>{{ form_errors(form.resoluOuRenouvele) }}</span>
                                        </div>
                                    </div>
                                    <div class="uk-width-1-4">
                                        Type de mandat
                                    </div>
                                    <div class="uk-width-3-4">
                                        {{ form_widget(form.isExclusif) }}
                                    </div>
                                    <div class="uk-width-1-4">
                                        Origine du mandat
                                    </div>
                                    <div class="uk-width-3-4">
                                        {{ form_widget(form.origine) }}
                                    </div>
                                    <div class="uk-width-1-4">
                                        Type du mandat
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.typeMandat) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="md-card" id="vente_card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Mandat de vente
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-medium" data-uk-grid-margin>

                                    {#<div class="uk-width-1-4">#}

                                    {#Prix de propriété#}
                                    {#</div>#}
                                    {#<div class="uk-width-3-4">#}

                                    {#{{ form_widget(form.prixDeVenteDemande) }}#}
                                    {#</div>#}
                                    {#<div class="uk-width-1-4">#}

                                    {#Prix de propriété (en texte)#}
                                    {#</div>#}
                                    {#<div class="uk-width-3-4">#}

                                    {#{{ form_widget(form.prixDeVenteDemandeTexte) }}#}
                                    {#</div>#}
                                    <div class="uk-width-1-4">

                                        La propriété est :
                                    </div>
                                    <div class="uk-width-2-4">

                                        {{ form_widget(form.hypotheque) }}
                                    </div>
                                    <div class="uk-width-1-4" id="hypothequeFor">
                                        {{ form_label(form.hypothequeFor, "Hypothèque de") }}
                                        {{ form_widget(form.hypothequeFor) }}
                                        <span>     {{ form_errors(form.hypothequeFor) }} </span>
                                    </div>
                                    <div class="uk-width-4-4">
                                        <p>
                                            La promesse de vente sera reglé comme suit : <br>
                                            * {{ form_widget(form.avance) }} % du prix sera reglé comme avance . <br>
                                            * Le solde sera payé à la signature de l'acte de vente . Ce dernier devra
                                            etre
                                            signé <br> entre
                                            {{ form_widget(form.intervalMinSignatureActe) }}
                                            et {{ form_widget(form.intervalMaxSignatureActe) }}
                                            mois la signature de la promesse de vente. <br>
                                        </p>
                                    </div>

                                    <div class="uk-width-1-4">
                                        * Le bien sera consigné
                                    </div>
                                    <div class="uk-width-2-4">
                                        <div class="dynamic_radio uk-margin-small-top">
                                            {% for child in form.consigne %}
                                                <span class="icheck-inline">
                                        {{ form_widget(child) }}
                                                    {{ form_label(child) }}
                                        </span>
                                            {% endfor %}
                                            <span>{{ form_errors(form.consigne) }}</span>
                                        </div>
                                    </div>
                                    <div class="uk-width-1-4">
                                        {{ form_widget(form.consigneDate) }}
                                    </div>

                                    </p>

                                </div>
                            </div>
                        </div>
                        <div class="md-card" id="location_card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Mandat de localtion
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid">
                                    <div class="uk-width-large-1-4">
                                        Loyer de
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.loyeDe) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Type de contrat
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.typeContrat) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Usage
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.usage) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Retenue à la source
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.retenueSource) }}
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        Retenue à la source
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.retenueSource) }}
                                    </div>
                                    <div class="uk-width-large-6-10">
                                        <p>
                                            Modalité de paiement de loyer le {{ form_widget(form.payementLe) }}
                                            de chaque
                                        </p>
                                    </div>
                                    <div class="uk-width-large-4-10">
                                        {{ form_widget(form.modalitePaiement) }}
                                    </div>
                                    <div class="uk-width-large-1-4" style="margin-top: 30px">
                                        Caution de
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.caution) }}
                                    </div>
                                    <div class="uk-width-large-4-4">
                                        Dans le cas de location pluri annuelle , le loyer sera augmenté
                                        de {{ form_widget(form.augmentationTaux) }}%
                                        par {{ form_widget(form.augmentationPer) }} an(s)
                                    </div>

                                    <div class="uk-width-large-1-4">
                                        Date disponibilité du bien
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.visite) }}
                                    </div>
                                    <div class="uk-width-large-1-4" id="contactVisite">
                                        {{ form_widget(form.contactVisite , {'attr' : {'placeholder' : 'Choisissez la date'}}) }}
                                    </div>


                                </div>
                            </div>
                        </div>
                        <div class="md-card" id="fc_card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Mandat de vente de fonds de commerce
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-width-large-1-4">
                                        Prix fonds de commerce
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.fcprix) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Loyer de
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.fcloyer) }}
                                    </div>


                                            <div class="uk-width-large-2-4">
                                                Date début du contrat de location
                                            </div>
                                            <div class="uk-width-large-2-4">
                                                {{ form_widget(form.fcdateDebut) }}
                                            </div>
                                            <div class="uk-width-large-1-4">
                                                Titre de propriété
                                            </div>
                                            <div class="uk-width-large-3-4">
                                                {{ form_widget(form.fctitre) }}
                                            </div>
                                            <div class="uk-width-large-4-4" style="margin-top: 20px">
                                                Le loyer sera augmenté de {{ form_widget(form.fcaugmentation) }}
                                                % par {{ form_widget(form.fcaugmentationPer) }} ans(s)
                                            </div>

                                            <div class="uk-width-large-1-4">
                                                Retenue à la source de 15% du loyer
                                            </div>
                                            <div class="uk-width-large-3-4">
                                                {{ form_widget(form.fcretenue) }}
                                            </div>
                                            <div class="uk-width-large-1-4">
                                                Usage et activité autorisé
                                            </div>
                                            <div class="uk-width-large-3-4">
                                                {{ form_widget(form.fcusage) }}
                                            </div>
                                            <div class="uk-width-large-4-4" style="margin-top: 20px">
                                                Depot de garantie payé au propriétaire est
                                                de {{ form_widget(form.fcgarantie) }}
                                            </div>
                                            <div class="uk-width-large-2-4" style="margin-top: 25px">
                                                Déclaration d'impot de trois (03) ans du propriétaire du fond de
                                                commerce
                                            </div>
                                            <div class="uk-width-large-2-4" style="margin-top: 25px">
                                                {{ form_widget(form.fcimpot) }}
                                            </div>
                                    <div class="uk-width-large-2-4" style="margin-top: 25px">
                                        Hypothéque
                                    </div>
                                    <div class="uk-width-large-2-4" style="margin-top: 25px">
                                        {{ form_widget(form.hypothequefc) }}
                                    </div>
                                    <div class="md-card-toolbar">
                                        <h3 class="md-card-toolbar-heading-text">
                                            Modalité de paiement
                                        </h3>
                                    </div>
                                    <div class="uk-width-large-4-4">
                                        La prommese de vente sera reglé comme suit :
                                    </div>
                                    <div class="uk-width-large-4-4">
                                        * {{ form_widget(form.fcavance) }} % du prix de fonds de commerce sera reglé
                                        comme avance
                                    </div>
                                    <div class="uk-width-large-4-4">
                                        * Le solde sera payé à la signature de l'acte de vente . Ce dernier
                                        devra etre signé entre {{ form_widget(form.fcavanceMin) }}
                                        et {{ form_widget(form.fcavanceMax) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Ce bien sera consigné :
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.fcconsigne) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.fcconsigneDate) }}
                                    </div>


                                </div>
                            </div>
                        </div>
                        <div class="md-card" id="de_card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Mandat de vente de fonds de commerce
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                <div class="uk-grid uk-grid-medium" data-uk-grid-margin>
                                    <div class="uk-width-large-1-4">
                                        Loyer de
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.deloyer) }}
                                    </div>

                                    <div class="uk-width-large-1-4">
                                        Prix droit d'entrée
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.deprix) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Type de contrat
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.detype) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Usage
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.deusage) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Activité autorisé
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.deactivite) }}
                                    </div>
                                    <div class="uk-width-large-1-4" style="margin-top: 25px">
                                        Retenue à la source
                                    </div>
                                    <div class="uk-width-large-3-4" style="margin-top: 25px">
                                        {{ form_widget(form.deretenue) }}
                                    </div>
                                    <div class="uk-width-large-4-4" style="margin-top: 25px">
                                        Modalité de paiement de loyer le {{ form_widget(form.depaiementDate) }}
                                        de chaque {{ form_widget(form.depaiementPer) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        Caution de
                                    </div>
                                    <div class="uk-width-large-3-4">
                                        {{ form_widget(form.decaution) }}
                                    </div>
                                    <div class="uk-width-large-4-4" style="margin-top: 25px">
                                        Dans le cas de location pluriannuelle , le loyer sera augmenté
                                        de {{ form_widget(form.deaugmentation) }} % par
                                        {{ form_widget(form.deaugmentationPer) }} an(s)
                                    </div>


                                    <div class="uk-width-large-1-4">
                                        Date disponibilité du bien
                                    </div>
                                    <div class="uk-width-large-2-4">
                                        {{ form_widget(form.dedisponibilite) }}
                                    </div>
                                    <div class="uk-width-large-1-4">
                                        {{ form_widget(form.dedisponibiliteDate) }}
                                    </div>

                                    <div class="uk-width-large-1-4" style="margin-top: 25px">
                                        Le bien est
                                    </div>
                                    <div class="uk-width-large-2-4" style="margin-top: 25px">
                                        {{ form_widget(form.destate) }}
                                    </div>
                                    <div class="uk-width-large-1-4" style="margin-top: 25px">
                                        {{ form_widget(form.destateDate) }}
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>

                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Gallerie
                                    <a id="addPicture"><i class="material-icons md-24">&#xE146;</i></a>
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">
                                {% if mandat.id == 0 or form.acquisition.bien.pictures|length ==0 %}
                                    {{ form_widget(form.acquisition.bien.pictures) }}
                                {% else %}
                                    <div id="{{ form.acquisition.bien.pictures.vars.id }}" class="uk-grid"
                                         data-uk-grid-margin
                                         data-prototype="{{ form_widget(form.acquisition.bien.pictures.vars.prototype)|e('html_attr') }}">
                                        {% for bienPicture in form.pictures %}
                                            <div class="uk-width-medium-1-4 blockSection">
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        Image
                                                        {% set urle = asset('fichiers/biens/pictures/')~  bien.bien.pictures.get(loop.index-1).fileName %}
                                                        {{ form_widget(bienPicture.file,
                                                        {'attr': {'class': 'dropify-fr', 'data-default-file': urle }}) }}
                                                        <span>{{ form_errors(bienPicture.file) }}</span>
                                                    </div>
                                                </div>
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        {{ form_label(bienPicture.description, "Déscription de l'image") }}
                                                        {{ form_widget(bienPicture.description, {'attr': {'class': 'md-input'}}) }}
                                                        <span>{{ form_errors(bienPicture.description) }}</span>
                                                    </div>
                                                </div>
                                                <a class="btn-close">
                                                    <i class="material-icons md-24">&#xE872;</i>
                                                </a>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}

                            </div>
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Papiers
                                    <a id="addPaper"><i class="material-icons md-24">&#xE146;</i></a>
                                </h3>
                            </div>
                            <div class="md-card-content large-padding">

                                {% if mandat.id == 0 or form.acquisition.bien.papers|length ==0 %}



                                    {{ form_widget(form.acquisition.bien.papers) }}

                                {% else %}
                                    <div id="{{ form.acquisition.bien.papers.vars.id }}" class="uk-grid"
                                         data-uk-grid-margin
                                         data-prototype="{{ form_widget(form.acquisition.bien.papers.vars.prototype)|e('html_attr') }}">
                                        {% for bienPicture in form.papers %}
                                            <div class="uk-width-medium-1-4 blockSection">
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        Image
                                                        {% set urle = asset('fichiers/biens/pictures/')~  bien.bien.papers.get(loop.index-1).fileName %}
                                                        {{ form_widget(bienPicture.file,
                                                        {'attr': {'class': 'dropify-fr', 'data-default-file': urle }}) }}
                                                        <span>{{ form_errors(bienPicture.file) }}</span>
                                                    </div>
                                                </div>
                                                <div class="uk-form-row">
                                                    <div class="parsley-row">
                                                        {{ form_label(bienPicture.description, "Déscription de l'image") }}
                                                        {{ form_widget(bienPicture.description, {'attr': {'class': 'md-input'}}) }}
                                                        <span>{{ form_errors(bienPicture.description) }}</span>
                                                    </div>
                                                </div>
                                                <a class="btn-close">
                                                    <i class="material-icons md-24">&#xE872;</i>
                                                </a>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>

                        </div>
                    </div>
                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">
                        <div class="md-card">
                    <div class="md-card-toolbar">
                        <h3 class="md-card-toolbar-heading-text">
                            Nouvelle offre
                            <a id="addOffre"><i class="material-icons md-24">&#xE146;</i></a>
                        </h3>
                    </div>
                    <div class="md-card-content large-padding">

                        {% if mandat.id == 0 or form.propositions|length ==0 %}



                            {{ form_widget(form.propositions) }}

                        {% else %}
                            <div id="{{ form.propositions.vars.id }}" class="uk-grid"
                                 data-uk-grid-margin
                                 data-prototype="{{ form_widget(form.propositions.vars.prototype)|e('html_attr') }}">
                                {% for proposition in form.propositions %}
                                    <h4>Offre & conditions de paiement </h4>
                                    <p style="line-height: 30px;"> 1) Prix offert : {{ form_widget(proposition.proposedPriceText) }} <br>
                                        Dinars Tout Taxes Comprise ( {{ form_widget(proposition.proposedPrice) }} DT TTC). <br>
                                        2) Le montant de la vente sera réglé comme suit :{{ form_widget(proposition.avance) }} % du prix à titre d'avance sous forme </p>{{ form_widget(proposition.avanceType) }}
                                    <p style="line-height: 30px;">et le solde du prix sera versé au vendeur sous forme </p> {{ form_widget(proposition.soldeType) }} <p style="line-height: 30px;">
                                    * Autre modalité de paiment : {{ form_widget(proposition.modalite) }} <br>
                                    3) l'acte de vente devre etre signé entre {{ form_widget(proposition.acteMin) }} et {{ form_widget(proposition.acteMax) }} mois de l'acceptation de l'offre d'achat ou de la signature de la promesse <br>
                                    de vente . <br>
                                    4) Les impots , taxes , frais d'enregistrement et des honoraires d'avocat seront à la charge de l'acheteur , sauf accord contraire des <br>
                                    deux parties. <br>
                                    5) Bien sera consigné :
                                    {{ form_widget(proposition.consigne) }}  <label> A la signature du contrat </label>
                                    {{ form_widget(proposition.consigne) }} <label> Le</label> ) }}consigneDate) }} <br>
                                    {{ form_widget(proposition.consigne) }} <label>Occupé du locataire avec l'accord de l'acheteur tout en respectant le contrat de location en cours</label>
                                    <br>

                                    * Autre conditions {{ form_widget(proposition.conditions) }}
                                    <br>
                                    <b>Honoraires de l'agence immobilière & Acompte sur offre</b>
                                    <br>
                                    1) Soit {{ form_widget(proposition.honorairesTTC) }} Dinars TTC ( {{ form_widget(proposition.honorairesHT) }} DT TTC). <br>
                                    2) Un acompte de 20% sur les honoraires dus à lagence immobilière devra etre remis lors de la signature de la <br>
                                    présente <br>
                                    Soit {{ form_widget(proposition.acompteTTC) }} Dinars ( {{ form_widget(proposition.acompteHT) }} DT)
                                    <br>
                                    <b>Acceptation</b>
                                    <br>
                                    Je soussigné(e) {{ form_widget(proposition.acceptation.name) }}<br>
                                    Titulaire CIN N° {{ form_widget(proposition.acceptation.identity) }} Délivrée le {{ form_widget(proposition.acceptation.delivered) }} <br>
                                </p>
                                    <div style="width:100%" ;>
                                        {{ form_widget(proposition.acceptation.quality) }}
                                    </div>
                                    <p style="line-height: 30px;">
                                        * Pour le compte de la société : {{ form_widget(proposition.acceptation.society) }} <br>
                                        * Pour le compte de Mr/Mme : {{ form_widget(proposition.acceptation.account) }} <br>
                                        Déclare avoir pris acte du contenu de l'offre de : </p><br>
                                    <div style="width:100%">
                                        {{ form_widget(proposition.acceptation.acte) }} <label>L'accepter intégralement</label><br>
                                        {{ form_widget(proposition.acceptation.acte) }} <label>La refuser</label><br>
                                        {{ form_widget(proposition.acceptation.acte) }} <label>L'accepter sous réserve</label>{{ form_widget(proposition.acceptation.reserve) }}<br>
                                        {{ form_widget(proposition.acceptation.acte) }} <label>Contre-offre suivante</label>{{ form_widget(proposition.acceptation.contreOffre) }}<br>
                                    </div>
                                    <br>
                                    <div >
                                        <p style="margin-top: 35px">
                                            Je soussigné(e) {{ form_widget(proposition.acceptation.nameO) }}<br>
                                            Titulaire CIN N° {{ form_widget(proposition.acceptation.identityO) }} Délivrée le {{ form_widget(proposition.acceptation.deliveredO) }} <br>
                                        </p>
                                        <div style="width:100%" ;>
                                            {{ form_widget(proposition.acceptation.qualityO) }}
                                        </div>
                                        <p style="line-height: 30px;">
                                            * Pour le compte de la société : {{ form_widget(proposition.acceptation.societyO) }} <br>
                                            * Pour le compte de Mr/Mme : {{ form_widget(proposition.acceptation.accountO) }} <br>
                                            Déclare avoir pris acte du contenu de l'offre de : </p><br>
                                        <div style="width:100%">
                                            {{ form_widget(proposition.acceptation.acteO) }} <label>L'accepter intégralement</label><br>
                                            {{ form_widget(proposition.acceptation.acteO) }} <label>La refuser</label><br>
                                            {{ form_widget(proposition.acceptation.acteO) }} <label>L'accepter sous réserve</label>{{ form_widget(proposition.acceptation.reserveO) }}<br>
                                            {{ form_widget(proposition.acceptation.acteO) }} <label>Contre-offre suivante</label>{{ form_widget(proposition.acceptation.contreOffreO) }}<br>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                        {% if mandat.id == 0 or form.propositionsLocation|length ==0 %}



                            {{ form_widget(form.propositionsLocation) }}

                        {% else %}
                            <div id="{{ form.formsLocation.vars.id }}" class="uk-grid"
                                 data-uk-grid-margin
                                 data-prototype="{{ form_widget(form.formsLocation.vars.prototype)|e('html_attr') }}">
                                {% for form in form.formsLocation %}
                                    <h4>Offre & conditions de paiement </h4>
                                    <p style="line-height: 30px;">
                                        1) Type de contrat de location : {{ form_widget ( form.contratType) }} <br>
                                        2) Usage : {{ form_widget ( form.usage) }} <br>
                                        3) Loyer offert {{ form_widget ( form.loyerHT) }} Dinars Hors taxes ( {{ form_widget ( form.loyerTTC) }} DT HT) par mois <br>
                                        4) Retenue à la source de 15% du loyer : {{ form_widget ( form.retenue_0) }} A la charge du propriétaire des murs
                                        {{ form_widget ( form.retenue_1) }} A la charge du locataire <br>
                                        5) Modalité de paiement de loyer : le {{ form_widget ( form.modalite) }} de chaque  {{ form_widget ( form.modalitePer_0) }} mois
                                        {{ form_widget ( form.modalitePer_1) }} trimestre {{ form_widget ( form.modalitePer_2) }} semestre {{ form_widget ( form.modalitePer_3) }} année <br>
                                        6) Dépot de garantie : le propriétaire demande un monatnt égal à {{ form_widget ( form.garantie) }} mois de loyer au locataire à titre de caution . <br>
                                        Cette caution sera restituée à la fin du bail lors de la remise des clés au propriétaire , après établissement de l'état des lieux de <br>
                                        sortie et déduction des frais de réparation ou remise en état du bien ou de règlement des factures impayées d'électricité , d'eau <br>
                                        ou d'autre , s'il y a lieu . <br>
                                        7) Dans le cas de location pluri annuelle , le loyer sera augmenté de {{ form_widget ( form.augmentation) }} % par {{ form_widget ( form.augmentationPer) }} an(s).<br>
                                        8) Date d'entée au bien : {{ form_widget ( form.entry_0) }} immédiate ,  {{ form_widget ( form.entry_1) }} Date souhaitée le  {{ form_widget ( form.entryDate) }} <br>
                                        9) Les impots , taxes  , frais d'enregistrement et les honoraires d'avocat seront à la charge du locataire , sauf accord contraire des <br>
                                        deux parties . <br>
                                    </p>
                                    <h4> * Dans le cas d'une location avec droit d'entrée (pas-de-porte)</h4>
                                    <p style="line-height: 30px;">
                                        10) Le prix de droit d'entrée (pas-de-porte) offert : {{ form_widget ( form.entryDETTC) }} Dinars TTC ( {{ form_widget ( form.prixDEHT) }} DT TTC). <br>
                                        11) La totalité du prix de droit d'entrée (pas-de-porte) sera versé au propriétaire au moyen : {{ form_widget ( form.moyenDEType_0) }} chèque {{ form_widget ( form.moyenDEType_1) }} espèce <br>
                                        ou le montant sera reglé comme suit : {{ form_widget ( form.avanceDE) }} % du prix à titre d'avance sous forme <br>
                                        {{ form_widget ( form.avanceType_0) }} Espèce {{ form_widget ( form.avanceType_1) }} Chèque  <br>
                                        Autre modalité de paiement : {{ form_widget ( form.modaliteDE) }} <br>
                                        Autres conditions : {{ form_widget ( form.conditionDE) }} <br>
                                    </p>
                                    <h4>Irrévocabilité de l'offre de location</h4> <br>
                                    <p style="line-height: 30px;">
                                        L'offre présente est irrévocable durant {{ form_widget ( form.irrevocabilite) }} jours , à partir de la signature de la présente offre et sera résiliée dans le cas ou <br>
                                        le propriétaire ou l'agent immobilier n'ont pas communiqué l'acceptation de l'offre .
                                        <br>
                                        <b>Honoraires de l'agence immobilière & Acompte sur offre</b>
                                        <br>
                                        1) Soit {{ form_widget ( form.honorairesTTC) }} Dinars TTC ( {{ form_widget ( form.honorairesHT) }} DT TTC). <br>
                                        2) Un acompte de 20% sur les honoraires dus à lagence immobilière devra etre remis lors de la signature de la <br>
                                        présente <br>
                                        Soit {{ form_widget ( form.acompteTTC) }} Dinars ( {{ form_widget ( form.acompteHT) }} DT)
                                        <br>
                                        <b>Acceptation</b>
                                        <br>
                                        Je soussigné(e) ) }}name) }}<br>
                                        Titulaire CIN N° {{ form_widget ( form.acceptation.identity) }} Délivrée le ) }}delivered) }} <br>
                                    </p>
                                    <div style="width:100%" ;>
                                        {{ form_widget ( form.acceptation.quality) }}
                                    </div>
                                    <p style="line-height: 30px;">
                                        * Pour le compte de la société : {{ form_widget ( form.acceptation.society) }} <br>
                                        * Pour le compte de Mr/Mme : {{ form_widget ( form.acceptation.account) }} <br>
                                        Déclare avoir pris acte du contenu de l'offre de : </p><br>
                                    <div style="width:100%">
                                        {{ form_widget ( form.acceptation.radio_0) }} <label>L'accepter intégralement</label><br>
                                        {{ form_widget ( form.acceptation.radio_1) }} <label>La refuser</label><br>
                                        {{ form_widget ( form.acceptation.radio_2) }} <label>L'accepter sous réserve</label>) }}reserve) }}<br>
                                        {{ form_widget ( form.acceptation.radio_3) }} <label>Contre-offre suivante</label>) }}contreOffre) }}<br>
                                    </div>
                                    <br>
                                    <div >
                                        <p style="margin-top: 35px">
                                            Je soussigné(e) {{ form_widget ( form.acceptation.nameO) }}<br>
                                            Titulaire CIN N° {{ form_widget ( form.acceptation.identityO) }} Délivrée le {{ form_widget ( form.acceptation.deliveredO) }} <br>
                                        </p>
                                        <div style="width:100%" ;>
                                            {{ form_widget ( form.acceptation.qualityO) }}
                                        </div>
                                        <p style="line-height: 30px;">
                                            * Pour le compte de la société : ) }}societyO) }} <br>
                                            * Pour le compte de Mr/Mme : ) }}accountO) }} <br>
                                            Déclare avoir pris acte du contenu de l'offre de : </p><br>
                                        <div style="width:100%">
                                            {{ form_widget ( form.acceptation.radioO_0) }} <label>L'accepter intégralement</label><br>
                                            {{ form_widget ( form.acceptation.radioO_1) }} <label>La refuser</label><br>
                                            {{ form_widget ( form.acceptation.radioO_2) }} <label>L'accepter sous réserve</label>) }}reserveO) }}<br>
                                            {{ form_widget ( proposition.acceptation.radioO_3) }} <label>Contre-offre suivante</label>) }}contreOffreO) }}<br>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                        </div>
                    </div>

                </li>
                <li>
                    <div class="uk-width-xLarge-10-10 uk-width-large-10-10">
                        <div class="md-card">
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Commission agence
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid">
                                    <div class="uk-width-1-4">
                                        * Commission agence
                                    </div>
                                    <div class="uk-width-1-4">
                                        {{ form_widget(form.acquisition.bien.commision.commisionPercent) }} %

                                    </div>
                                    <div class="uk-width-2-4">
                                        {{ form_widget(form.acquisition.bien.commision.comissionHt) }}

                                    </div>
                                    {#<div class="uk-width-1-4">#}
                                    {#{{ form_widget(form.acquisition.bien.commision.comissionTtc) }} Ttc#}

                                    {#</div>#}
                                    <div class="uk-width-1-4">
                                        * Remise
                                    </div>
                                    <div class="uk-width-3-4">
                                        {{ form_widget(form.acquisition.bien.commision.remise) }} %

                                    </div>


                                    <div class="uk-width-1-4">

                                        * Soit un montant de :
                                    </div>
                                    <div class="uk-width-2-4">
                                        {{ form_widget(form.acquisition.bien.commision.montantLettres) }}
                                    </div>
                                    <div class="uk-width-1-4">
                                        {{ form_widget(form.acquisition.bien.commision.montant) }}
                                    </div>

                                </div>

                            </div>
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Procedure de commissions de l'équipe
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid">
                                    <ul class="md-list md-list-addon" style="width:100%;">
                                        <li>

                                            <div class="uk-grid">
                                                <div class="uk-width-2-6">
                                                </div>
                                                <div class="uk-width-1-6"
                                                     style="text-align: center;font: 500 14px/50px Roboto,sans-serif;">
                                                    Nom et prénom
                                                </div>
                                                <div class="uk-width-1-6"
                                                     style="text-align: center;font: 500 14px/50px Roboto,sans-serif;">
                                                    %
                                                </div>
                                                <div class="uk-width-1-6"
                                                     style="text-align: center;font: 500 14px/50px Roboto,sans-serif;">
                                                    Montant
                                                </div>
                                                <div class="uk-width-2-6">
                                                    Commission de coordinatrice
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.coordiantriceNom) }}
                                                </div>
                                                <div class="uk-width-1-6" style="text-align: center;">
                                                    {{ form_widget(form.acquisition.bien.commision.coordiantricePercent) }}
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.coordiantriceMontant) }}
                                                </div>
                                            </div>
                                        </li>

                                        <li>

                                            <div class="uk-grid">
                                                <div class="uk-width-2-6">
                                                    Commission du digital marketeur
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.marketingNom) }}
                                                </div>
                                                <div class="uk-width-1-6" style="text-align: center;">
                                                    {{ form_widget(form.acquisition.bien.commision.marketingPercent) }}
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.marketingMontant) }}
                                                </div>
                                            </div>
                                        </li>

                                        <li>

                                            <div class="uk-grid">
                                                <div class="uk-width-2-6">
                                                    Commission responsable dossier
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.responsableNom) }}
                                                </div>
                                                <div class="uk-width-1-6" style="text-align: center;">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablePercent) }}
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.responsableMontant) }}
                                                </div>
                                            </div>
                                        </li>

                                        <li>

                                            <div class="uk-grid">
                                                <div class="uk-width-2-6">
                                                    Commission responsable qui a participé à la transaction
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablepNom) }}
                                                </div>
                                                <div class="uk-width-1-6" style="text-align: center;">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablepPercent) }}
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablepMontant) }}
                                                </div>
                                            </div>
                                        </li>

                                        <li>

                                            <div class="uk-grid">
                                                <div class="uk-width-2-6">
                                                    Commission superviseur
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.superviseurNom) }}
                                                </div>
                                                <div class="uk-width-1-6" style="text-align: center;">
                                                    {{ form_widget(form.acquisition.bien.commision.superviseurPercent) }}
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.superviseurMontant) }}
                                                </div>
                                            </div>
                                        </li>

                                        <li>

                                            <div class="uk-grid">
                                                <div class="uk-width-2-6">
                                                    Commission responsable qui a pris le mandat
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablemNom) }}
                                                </div>
                                                <div class="uk-width-1-6" style="text-align: center;">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablemPercent) }}
                                                </div>
                                                <div class="uk-width-1-6">
                                                    {{ form_widget(form.acquisition.bien.commision.responsablemMontant) }}
                                                </div>
                                            </div>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                            <div class="md-card-toolbar">
                                <h3 class="md-card-toolbar-heading-text">
                                    Commission intervenant
                                </h3>
                            </div>
                            <div class="md-card-content">
                                <div class="uk-grid">
                                    <div class="uk-width-1-2">
                                        Nom et prénom intervenant
                                    </div>
                                    <div class="uk-width-1-2">
                                        {{ form_widget(form.acquisition.bien.commision.intervenantNom) }}
                                    </div>
                                    <div class="uk-width-1-4" style="margin-top: 10px">
                                        Commission
                                    </div>
                                    <div class="uk-width-1-4" style="margin-top: 10px">
                                        {{ form_widget(form.acquisition.bien.commision.intervenantPercent) }}
                                    </div>
                                    <div class="uk-width-2-4" style="margin-top: 10px">
                                        {{ form_widget(form.acquisition.bien.commision.intervenantHt) }}
                                    </div>

                                    <div class="uk-width-1-2">
                                        Soit un montant de
                                    </div>
                                    <div class="uk-width-1-2">
                                        {{ form_widget(form.acquisition.bien.commision.intervenantMontant) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>

            </ul>

        </div>
    </div>
    {{ form_widget(form.acquisition.bien.longitude) }}
    {{ form_widget(form.acquisition.bien.latitude) }}
    <div class="md-fab-wrapper">
        <button class="md-fab md-fab-accent md-fab-wave-light" href="#" id="mandat_add"
                data-uk-tooltip="{cls:'uk-tooltip-small',pos:'left'}" title="Enregistrer" name="save">
            <i class="material-icons">&#xE161;</i>
        </button>
    </div>
    {{ form_rest(form) }}
    {{ form_end(form) }}
    <div class="uk-modal" id="modal-ajouterVille">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une ville</h2></div>
            <form method="POST" name="form_ville" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="gov"></label>
                                <input id="gov" class="md-input" name="" type="text" value="" readonly/>
                                <input id="govValue" name="gouvernoratt" type="hidden" value=""/>
                                <span class="uk-form-help-block">Gouvernorat</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55F;</i>
                                </span>
                                <label for="villeName">Ville</label>
                                <input id="villeName" class="md-input" name="villeName" type="text" value=""
                                       data-parsley-ville="3" required/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE0DA;</i>
                                </span>
                                <label for="postCodeName">Code postal</label>
                                <input id="postCodeName" class="md-input" name="postCodeName" type="number" value=""
                                       data-parsley-postcode="3" required data-parsley-maxlength="4"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newVille(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-ajouterLocalite">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une localité</h2></div>
            <form method="POST" name="form_localite" action="#">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55F;</i>
                                </span>
                                <label for="vill"></label>
                                <input id="vill" class="md-input" name="" type="text" value="" readonly/>
                                <input id="villValue" name="villee" type="hidden" value=""/>
                                <span class="uk-form-help-block">Ville</span>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE569;</i>
                                </span>
                                <label for="localiteName">Localité</label>
                                <input id="localiteName" class="md-input" name="localiteName" type="text" value=""
                                       data-parsley-localite="3" required/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newLocalite()">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-ajouterRue">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une rue</h2></div>
            <form method="POST" name="form_rue" action="#">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE569;</i>
                                </span>
                                <label for="local"></label>
                                <input id="local" class="md-input" name="" type="text" value="" readonly/>
                                <input id="localValue" name="localitee" type="hidden" value=""/>
                                <span class="uk-form-help-block">Localité</span>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE566;</i>
                                </span>
                                <label for="rueName">Rue</label>
                                <input id="rueName" class="md-input" name="rueName" type="text" value=""
                                       data-parsley-rue="3" required/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newRue()">Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-ajouterAdresse">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une adresse</h2></div>
            <form method="POST" name="form_adresse" action="#">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE569;</i>
                                </span>
                                <label for="ru"></label>
                                <input id="ru" class="md-input" name="" type="text" value="" readonly/>
                                <input id="ruValue" name="localitee" type="hidden" value=""/>
                                <span class="uk-form-help-block">Rue</span>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE566;</i>
                                </span>
                                <label for="adresseName">Adresse</label>
                                <input id="adresseName" class="md-input" name="adresseName" type="text" value=""
                                       data-parsley-adresse="3" required/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newAdresse()">Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierGouvernorat">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la gouvernorat</h2></div>
            <form method="POST" name="form_gouvernorat" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="govModif"></label>
                                <input id="govModif" class="md-input" name="" type="text" value=""
                                       data-parsley-govmodif="3" required/>
                                <input id="govValueModif" name="gouvernorattModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Gouvernorat</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierGouvernorat(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierVille">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la ville</h2></div>
            <form method="POST" name="form_ville" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="villeModif"></label>
                                <input id="villeModif" class="md-input" name="" type="text" value=""
                                       data-parsley-villemodif="3" required/>
                                <input id="villeValueModif" name="villeModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Ville</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierVille(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierLocalite">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la localité</h2></div>
            <form method="POST" name="form_localite" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="localiteModif"></label>
                                <input id="localiteModif" class="md-input" name="" type="text" value=""
                                       data-parsley-localitemodif="3" required/>
                                <input id="localiteValueModif" name="localiteModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Localité</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierLocalite(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierRue">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier la rue</h2></div>
            <form method="POST" name="form_rue" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="rueModif"></label>
                                <input id="rueModif" class="md-input" name="" type="text" value=""
                                       data-parsley-ruemodif="3" required/>
                                <input id="rueModif" name="rueModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Rue</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="modifierRue(this)">
                    Enregistrer
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-modifierAdresse">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Modifier l'adresse</h2></div>
            <form method="POST" name="form_adresse" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55E;</i>
                                </span>
                                <label for="adresseModif"></label>
                                <input id="adresseModif" class="md-input" name="" type="text" value=""
                                       data-parsley-adressemodif="3" required/>
                                <input id="adresseModif" name="adresseModif" type="hidden" value=""/>
                                <span class="uk-form-help-block">Adresse</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="uk-modal" id="modal-addEquipement">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un équipement</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE531;</i>
                                </span>
                                <label for="equipement">Equipement</label>
                                <input id="equipement" value="" class="md-input" data-parsley-equipement="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newEquipement(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addCommodite">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une commodité</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE55C;</i>
                                </span>
                                <label for="commodite">Commodité</label>
                                <input id="commodite" value="" class="md-input" data-parsley-commodite="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newCommodite(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addTypeBien">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un type de bien</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE86D;</i>
                                </span>
                                <label for="typeBien">Type de bien</label>
                                <input id="typeBien" value="" class="md-input" data-parsley-typebien="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2" style="padding-left: 0">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE85D;</i>
                                </span>
                                <select title="Catégories" class="md-input" id="categories"></select>
                                <span class="uk-form-help-block">Catégorie</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="equipped">Equipé</label>
                                <input type="checkbox" id="equipped" value="" data-switchery
                                       data-parsley-equipped="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="bedroom">Chambre</label>
                                <input type="checkbox" id="bedroom" value="" data-switchery
                                       data-parsley-bedroom="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="bathroom">S.Bains</label>
                                <input type="checkbox" id="bathroom" value="" data-switchery
                                       data-parsley-bathroom="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-4">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="furnished">Meublé</label>
                                <input type="checkbox" id="furnished" value="" data-switchery
                                       data-parsley-furnished="3"/>
                            </div>
                        </div>
                    </div>

                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newTypeBien(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addAgency">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter une agence</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <span class="uk-input-group-addon">
                                    <i class="material-icons">&#xE84F;</i>
                                </span>
                                <label for="agency">Agence</label>
                                <input id="agency" value="" class="md-input" data-parsley-agency="3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-left">
                <button type="button" class="md-btn md-btn-primary" onclick="newAgency(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
    <div class="uk-modal" id="modal-addOwner">
        <div class="uk-modal-dialog">
            <button type="button" class="uk-modal-close uk-close"></button>
            <div class="uk-modal-header"><h2>Ajouter un propriétaire</h2></div>
            <form method="POST" name="form_equipement" action="#" class="uk-form-stacked">
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="codeClient">Code</label>
                                <input id="codeClient" value="" class="md-input" data-parsley-codeclient="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="denominationClient">Dénomination</label>
                                <input id="denominationClient" value="" class="md-input"
                                       data-parsley-denominationclient="3"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="identifiantClient">Identifiant</label>
                                <input id="identifiantClient" value="" class="md-input"
                                       data-parsley-identifiantclient="3"/>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="telephoneClient">Téléphone</label>
                                <input id="telephoneClient" value="" class="md-input"
                                       data-parsley-telephoneclient="3"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-2-2">
                        <div class="parsley-row">
                            <div class="uk-input-group">
                                <label for="addressClient">Adresse</label>
                                <input id="addressClient" value="" class="md-input" data-parsley-addressclient="3"/>

                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <div class="uk-modal-footer uk-text-right">
                <button type="button" class="md-btn md-btn-primary" onclick="newOwner(this)">
                    Ajouter
                </button>
            </div>
        </div>
    </div>
</div>
<script>

    $(function () {
        if ($('#gouvernorat').text() !== '') {
            $('#modifierGouvernorat').show();
            $('#supprimerGouvernorat').show();
            $('#ajouterVille').show();
        }
        $('.select').kendoComboBox({
            filter: "contains",
            suggest: true
        });
        var ismapped = $('#sbc_bienbundle_mandat_acquisition_bien_ismapped');
//        if (!ismapped.is(':checked')) {
        $('#displaymap').css("display", "none");
//        }
        ismapped.on('ifChanged', function () {
            ismapped.on('ifChecked', function () {
                $('#displaymap').css("display", "block");
                {#{% if  acquisition.bien.ismapped %}#}
                {#googleMapApiLaunch($('#sbc_bienbundle_nouvelle_longitude').val(), $('#sbc_bienbundle_nouvelle_latitude').val());#}
                {#{% else %}#}
                googleMapApiLaunch(10.227091, 36.771820);
                {#{% endif %}#}
            });
            ismapped.on('ifUnchecked', function () {
                $('#displaymap').css("display", "none");
            });
        });
        var categories = $('#categories');
        categories.selectize({
            placeholder: 'Choisir une catégorie....             ',
            hideSelected: true
        });
        getCategories(categories);
    });
    {#{% if  acquisition.bien.ismapped %}#}
    {#{% set lng = acquisition.bien.longitude %}#}
    {#{% set lat = acquisition.bien.latitude %}#}
    {#{% else %}#}
    {#{% set lng = 10.227091 %}#}
    {#{% set lat = 36.771820 %}#}
    {#{% endif %}#}
    var init_lng = 10.227091;
    var init_lat = 36.771820;
    setTimeout(function () {
        googleMapApiLaunch(init_lng, init_lat);
    }, 650);
    function googleMapApiLaunch(lng, lat) {
        var longitude = $('#sbc_bienbundle_mandat_acquisition_bien_longitude');
        var latitude = $('#sbc_bienbundle_mandat_acquisition_bien_latitude');
        {#{% if nouvelle.id != 0 %}#}
        {#longitude.val(lng);#}
        {#latitude.val(lat);#}
        {#{% else %}#}
        if (lat === init_lat && lng === init_lng) {
            longitude.val('');
            latitude.val('');
        } else {
            longitude.val(lng);
            latitude.val(lat);
        }
        {#{% endif %}#}
        lat = parseFloat(lat);
        lng = parseFloat(lng);
        //map..
        var map = new google.maps.Map(document.getElementById('map-canvas'), {
            center: {
                lat: lat,
                lng: lng
            },
            zoom: 14
        });
        //marker..
        var marker = new google.maps.Marker({
            position: {
                lat: lat,
                lng: lng
            },
            map: map,
            draggable: true
        });
        //dragend event of maker
        google.maps.event.addListener(marker, 'dragend', function () {
            //console.log(marker.getPosition());
            if ($('#sbc_bienbundle_mandat_acquisition_bien_ismapped').is(':checked')) {
                longitude.val(marker.getPosition().lng());
                latitude.val(marker.getPosition().lat());
            }
        });
    }
    function getCategories(select) {
        var categories = select[0].selectize;
        categories.clearOptions();
        var url = '{{ path('category_list') }}';
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        categories.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    UIkit.modal.alert('Rien', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Erreur', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    var ville = $('#ville');
    var localite = $('#localite');
    var rue = $('#rue');
    var gouvernorat = $('#gouvernorat');
    var adresse = $('#sbc_bienbundle_mandat_acquisition_bien_address');
    var gov = $('#gov');
    var local = $('#local');
    var vill = $('#vill');
    var ru = $('#ru');
    var govValue = $('#govValue');
    var localValue = $('#localValue');
    var villValue = $('#villValue');
    var ruValue = $('#ruValue');
    var govValueModif = $('#govValueModif');
    var govModif = $('#govModif');
    var localiteValueModif = $('#localiteValueModif');
    var localiteModif = $('#localiteModif');
    var villeValueModif = $('#villeValueModif');
    var villeModif = $('#villeModif');
    var rueValueModif = $('#rueValueModif');
    var rueModif = $('#rueModif');
    function getVilles(select) {
        $('#gouvernorat_span').html($(select).text());
        var modifierGouvernorat = $('#modifierGouvernorat');
        var supprimerGouvernorat = $('#supprimerGouvernorat');
        var ajouterVille = $('#ajouterVille');
        var modifierVille = $('#modifierVille');
        var supprimerVille = $('#supprimerVille');
        select = select || '#gouvernorat';
        {% if app.user.id == 2 or app.user.id == 14 %}
        modifierGouvernorat.show();
        supprimerGouvernorat.show();
        ajouterVille.show();
        {% endif %}
        validateGouvernorat();
        var gouvernorat = $(select).val();
        govValueModif.val(gouvernorat);
        govModif.val($(select).text());
        gov.val($(select).text());
        govValue.val(gouvernorat);
        var url = '{{ path('villes_bygouvernorat') }}';
        var villes = ville[0].selectize;
        villes.clearOptions();
        modifierVille.hide();
        supprimerVille.hide();
        if (gouvernorat !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + gouvernorat,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            villes.addOption({
                                text: element.text,
                                value: element.value
                            });
                            villes.open();
                        });
                    }
                    else {
                        ville.html("<option>No Data </option>");
                    }
                },
                error: function () {
                    ville.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            modifierGouvernorat.hide();
            supprimerGouvernorat.hide();
            ajouterVille.hide();
            modifierVille.hide();
            supprimerVille.hide();
            $('#ajouterLocalite').hide();
            $('#modifierLocalite').hide();
            $('#supprimerLocalite').hide();
            $('#ajouterRue').hide();
            $('#modifierRue').hide();
            $('#supprimerRue').hide();
            $('#ajouterAdresse').hide();
            $('#modifierAdresse').hide();
            $('#supprimerAdresse').hide();
        }
    }
    function getLocalites(select) {
        $('#ville_span').html($(select).text());
        select = select || '#ville';

        var ajouterLocalite = $('#ajouterLocalite');
        var modifierLocalite = $('#modifierLocalite');
        var supprimerLocalite = $('#supprimerLocalite');
        {% if app.user.id == 2 or app.user.id == 14 %}
        ajouterLocalite.show();
        $('#modifierVille').show();
        $('#supprimerVille').show();
        {% endif %}
        validateVille();
        var ville = $(select).val();
        villeValueModif.val(ville);
        villeModif.val($(select).text());
        vill.val($(select).text());
        villValue.val(ville);
        var url = '{{ path('localites_byville') }}';
        var localites = localite[0].selectize;
        localites.clearOptions();
        modifierLocalite.hide();
        supprimerLocalite.hide();
        if (ville !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + ville,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            localites.addOption({
                                text: element.text,
                                value: element.value
                            });
                            localites.open();
                        });
                    }
                    else {
                        localite.html("<option>No Data </option>");
                    }
                },
                error: function () {
                    localite.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            ajouterLocalite.hide();
            modifierLocalite.hide();
            supprimerLocalite.hide();
            $('#ajouterRue').hide();
            $('#modifierRue').hide();
            $('#supprimerRue').hide();
            $('#ajouterAdresse').hide();
            $('#modifierAdresse').hide();
            $('#supprimerAdresse').hide();
        }
    }
    function getRues(select) {
        $('#sousVille_span').html($(select).text());
        select = select || '#localite';

        var ajouterRue = $('#ajouterRue');
        {% if app.user.id == 2 or app.user.id == 14 %}
        ajouterRue.show();
        $('#modifierLocalite').show();
        $('#supprimerLocalite').show();
        {% endif %}
        validateLocalite();
        var localite = $(select).val();
        localiteValueModif.val(localite);
        localiteModif.val($(select).text());
        local.val($(select).text());
        localValue.val(localite);
        var url = '{{ path('rues_bylocalite') }}';
        var rues = rue[0].selectize;
        rues.clearOptions();
        var modifierRue = $('#modifierRue');
        var supprimerRue = $('#supprimerRue');
        modifierRue.hide();
        supprimerRue.hide();
        if (localite !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + localite,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            rues.addOption({
                                text: element.text,
                                value: element.value
                            });
                            rues.open();
                        });
                    }
                    else {
                        rue.html("<option>No Data </option>");
                    }
                },
                error: function () {
                    rue.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            ajouterRue.hide();
            modifierRue.hide();
            supprimerRue.hide();
            $('#ajouterAdresse').hide();
            $('#modifierAdresse').hide();
            $('#supprimerAdresse').hide();
        }
    }
    function getAdresses(select) {
        $('#rue_span').html($(select).text());
        select = select || '#rue';
        {% if app.user.id == 2 or app.user.id == 14 %}
        $('#modifierRue').show();
        $('#supprimerRue').show();
        {% endif %}
        var ajouterAdresse = $('#ajouterAdresse');
        ajouterAdresse.show();
        validateRue();
        var rue = $(select).val();
        rueValueModif.val(rue);
        rueModif.val($(select).text());
        ru.val($(select).text());
        ruValue.val(rue);
        var url = '{{ path('adresses_byrue_notjoined') }}';
        var adresses = adresse[0].selectize;
        adresses.clearOptions();
        var modifierAdresse = $('#modifierAdresse');
        var supprimerAdresse = $('#supprimerAdresse');
        modifierAdresse.hide();
        supprimerAdresse.hide();
        if (rue !== '') {
            $.ajax({
                url: url,
                type: 'POST',
                data: 'q=' + rue,
                success: function (data) {
                    if (data !== null) {
                        $.each(data, function (key, element) {
                            adresses.addOption({
                                text: element.text,
                                value: element.value
                            });
                            adresses.open();
                        });
                    }
                    else {
                        adresse.html("<option>No Data </option>");
                    }
                },
                error: function () {

                    adresse.html("<option>ERROR 500</option>");
                }
            });
        }
        else {
            ajouterAdresse.hide();
            modifierAdresse.hide();
            supprimerAdresse.hide();
        }
    }
    function newVille() {
        var villeName = $('#villeName');
        var postCodeName = $('#postCodeName');
        var villeNameIsValid = villeName.parsley().isValid();
        var postCodeIsValid = postCodeName.parsley().isValid();
        if (villeNameIsValid || postCodeIsValid) {
            var url = '{{ path('ville_new') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "ville=" + villeName.val() + "&codepostale=" + postCodeName.val() + "&gouvernorat=" + govValue.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('ville', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette ville existe déjà.',
                                fr: "Cette ville existe déjà"
                            }
                        });
                        villeName.on('change', function () {
                            window.Parsley.addValidator('ville', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            villeName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('ville', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La ville a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var villes = ville[0].selectize;
                        villes.addOption({
                            text: json.villeName,
                            value: json.id
                        });
                        villes.addItem(json.id);
                    }
                    villeName.parsley().validate();
                },
                error: function () {
                    villeName.parsley().validate();
                }
            });
        }
        else {
            villeName.parsley().validate();
            postCodeName.parsley().validate();
        }
    }
    function newLocalite() {
        var localiteName = $('#localiteName');
        var localiteNameIsValid = localiteName.parsley().isValid();
        if (localiteNameIsValid) {
            var url = '{{ path('localite_new') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "localite=" + localiteName.val() + "&ville=" + villValue.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('localite', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette localité existe déjà.',
                                fr: "Cette localité existe déjà"
                            }
                        });
                        localiteName.on('change', function () {
                            window.Parsley.addValidator('localite', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            localiteName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('localite', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La localité a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var localites = localite[0].selectize;
                        localites.addOption({
                            text: json.localiteName,
                            value: json.id
                        });
                        localites.addItem(json.id);
                    }
                    localiteName.parsley().validate();
                },
                error: function () {
                    localiteName.parsley().validate();
                }
            });
        }
        else {
            localiteName.parsley().validate();
        }
    }
    function newRue() {
        var rueName = $('#rueName');
        var rueNameIsValid = rueName.parsley().isValid();
        if (rueNameIsValid) {
            var url = '{{ path('rue_new') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "rue=" + rueName.val() + "&localite=" + localValue.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('rue', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette rue existe déjà.',
                                fr: "Cette rue existe déjà"
                            }
                        });
                        rueName.on('change', function () {
                            window.Parsley.addValidator('rue', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            rueName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('rue', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La rue a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var rues = rue[0].selectize;
                        rues.addOption({
                            text: json.rueName,
                            value: json.id
                        });
                        rues.addItem(json.id);
                    }
                    rueName.parsley().validate();
                },
                error: function () {
                    rueName.parsley().validate();
                }
            });
        }
        else {
            rueName.parsley().validate();
        }
    }
    function newAdresse() {
        var adresseName = $('#adresseName');
        var adresseValide = adresseName.parsley().isValid();
        var rueVal = $('#rue').val();
        if (adresseValide) {
            var adresseNameValue = adresseName.val();
            var urlVerif = '{{ path('adresse_bynameandrue', {'name': 'namE', 'rue': 'ruE'}) }}';
            urlVerif = urlVerif.replace('namE', adresseNameValue);
            urlVerif = urlVerif.replace('ruE', rueVal);
            $.ajax({
                async: true,
                type: "GET",
                url: urlVerif,
                success: function (json) {
                    if (json.success === true) {
                        window.Parsley.addValidator('adresse', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette adresse existe déjà.',
                                fr: "Cette adresse existe déjà"
                            }
                        });
                        adresseName.on('change', function () {
                            window.Parsley.addValidator('adresse', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            adresseName.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('adresse', {
                            validateString: function () {
                                return true;
                            }
                        });
                        var url = '{{ path('adresse_add') }}';
                        $.ajax({
                            async: true,
                            type: "POST",
                            url: url,
                            data: "adresse=" + adresseNameValue + "&rue=" + rueVal,
                            success: function (json) {
                                if (json.success === false || json.message !== '') {
                                    window.Parsley.addValidator('adresse', {
                                        validateString: function () {
                                            return false;
                                        },
                                        messages: {
                                            en: 'Erreur d\'ajout de l\'adresse.',
                                            fr: "Erreur d\'ajout de l\'adresse."
                                        }
                                    });
                                    adresseName.on('change', function () {
                                        window.Parsley.addValidator('adresse', {
                                            validateString: function () {
                                                return true;
                                            }
                                        });
                                        adresseName.parsley().validate();
                                    });
                                } else {
                                    window.Parsley.addValidator('adresse', {
                                        validateString: function () {
                                            return true;
                                        }
                                    });
                                    UIkit.modal.alert('L\'adresse a été ajoutée avec succès', {
                                        labels: {
                                            Ok: 'Fermer'
                                        }
                                    });
                                    var adresses = adresse[0].selectize;
                                    adresses.addOption({
                                        text: json.adresseName,
                                        value: json.id
                                    });
                                    adresses.addItem(json.id);
                                }
                                adresseName.parsley().validate();
                            },
                            error: function () {
                                adresseName.parsley().validate();
                            }
                        });
                    }
                    adresseName.parsley().validate();
                }
            });
        }
        else {
            adresseName.parsley().validate();
        }
    }
    function modifierVille() {
        var villeId = $('#villeValueModif').val();
        var villeModifName = $('#villeModif');
        var villeModifValide = villeModifName.parsley().isValid();
        if (villeModifValide) {
            var name = villeModifName.val();
            var urlVerif = '{{ path('ville_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', villeId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('villemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de la ville.',
                                fr: "Erreur de modification de la ville."
                            }
                        });
                        villeModifName.on('change', function () {
                            window.Parsley.addValidator('villemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            villeModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('villemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La ville a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    villeModifName.parsley().validate();
                    refreshVilles($('#ville'));
                },
                error: function () {

                    villeModifName.parsley().validate();
                }
            });
        }
        else {
            villeModifName.parsley().validate();
        }
    }
    function validateVille() {
        var domVilleModif = $('#villeModif');
        var oldVilleName = domVilleModif.val().toUpperCase();
        domVilleModif.on('change', function () {
            var villename = domVilleModif.val().toUpperCase();
            var url = '{{ path('ville_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', villename);
            if (villename !== oldVilleName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('villemodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette ville existe déjà',
                                    fr: "Cete ville existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('villemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domVilleModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshVilles(select) {
        var url = '{{ path('ville_list') }}';
        var villes = select[0].selectize;
        villes.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        villes.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerVille($id) {
        var url = '{{ path('ville_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', $id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La ville a été supprimée avec succès.', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        }
                    ).on('hide.uk.modal', function () {
                        refreshVilles($('#ville'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette ville pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette ville pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierGouvernorat() {
        var govId = $('#govValueModif').val();
        var govModifName = $('#govModif');
        var govModifValide = govModifName.parsley().isValid();
        if (govModifValide) {
            var name = govModifName.val();
            var urlVerif = '{{ path('gouvernorat_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', govId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('govmodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de la gouvernorat.',
                                fr: "Erreur de modification de la gouvernorat."
                            }
                        });
                        govModifName.on('change', function () {
                            window.Parsley.addValidator('govmodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            govModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('govmodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La gouvernorat a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    govModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    govModifName.parsley().validate();
                }
            });
        }
        else {
            govModifName.parsley().validate();
        }
    }
    function validateGouvernorat() {
        var domGovModif = $('#govModif');
        var oldGovName = domGovModif.val().toUpperCase();
        domGovModif.on('change', function () {
            var govname = domGovModif.val().toUpperCase();
            var url = '{{ path('gouvernorat_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', govname);
            if (govname !== oldGovName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('govmodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette gouvenorat existe déjà',
                                    fr: "Cette gouvenorat existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('govmodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domGovModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshGouvernorats(select) {
        var url = '{{ path('gouvernorat_list') }}';
        var gouvernorats = select[0].selectize;
        gouvernorats.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {

                    $.each(data, function (key, element) {
                        gouvernorats.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerGouvernorat(id) {
        var url = '{{ path('gouvernorat_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La gouvernorat a été supprimée avec succès.'
                    ).on('hide.uk.modal', function () {
                        refreshGouvernorats($('#gouvernorat'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette gouvernorat pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette gouvernorat pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierLocalite() {
        var localiteId = $('#localiteValueModif').val();
        var localiteModifName = $('#localiteModif');
        var localiteModifValide = localiteModifName.parsley().isValid();
        if (localiteModifValide) {
            var name = localiteModifName.val();
            var urlVerif = '{{ path('localite_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', localiteId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('localitemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modification de la localité.',
                                fr: "Erreur de modification de la localité."
                            }
                        });
                        localiteModifName.on('change', function () {
                            window.Parsley.addValidator('localitemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            localiteModifName.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('localitemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La localité a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    localiteModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    localiteModifName.parsley().validate();
                }
            });
        }
        else {
            localiteModifName.parsley().validate();
        }
    }
    function validateLocalite() {
        var domlocaliteModif = $('#localiteModif');
        var oldlocaliteName = domlocaliteModif.val().toUpperCase();
        domlocaliteModif.on('change', function () {
            var localitename = domlocaliteModif.val().toUpperCase();
            var url = '{{ path('localite_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', localitename);
            if (localitename !== oldlocaliteName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('localitemodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette localité existe déjà',
                                    fr: "Cette localité existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('localitemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domlocaliteModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshLocalites(select) {
        var url = '{{ path('localite_list') }}';
        var localites = select[0].selectize;
        localites.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        localites.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerLocalite(id) {
        var url = '{{ path('localite_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La localité a été supprimée avec succès.', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        }
                    ).on('hide.uk.modal', function () {
                        refreshLocalites($('#localite'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette localité pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette localité pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierRue() {
        var rueId = $('#rueValueModif').val();
        var rueModifName = $('#rueModif');
        var rueModifValide = rueModifName.parsley().isValid();
        if (rueModifValide) {
            var name = rueModifName.val();
            var urlVerif = '{{ path('rue_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', rueId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('ruemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de la rue.',
                                fr: "Erreur de modification de la rue."
                            }
                        });
                        rueModifName.on('change', function () {
                            window.Parsley.addValidator('ruemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            rueModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('ruemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La rue a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    rueModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    rueModifName.parsley().validate();
                }
            });
        }
        else {
            rueModifName.parsley().validate();
        }
    }
    function validateRue() {
        var domrueModif = $('#rueModif');
        var oldrueName = domrueModif.val().toUpperCase();
        domrueModif.on('change', function () {
            var ruename = domrueModif.val().toUpperCase();
            var url = '{{ path('rue_byname', {'name': 'namE'}) }}';
            url = url.replace('namE', ruename);
            if (ruename !== oldrueName) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('ruemodif', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Cette rue existe déjà',
                                    fr: "Cete rue existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('ruemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domrueModif.parsley().validate();
                    }
                });
            }
        });
    }
    function refreshRues(select) {
        var url = '{{ path('rue_list') }}';
        var rues = select[0].selectize;
        rues.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        rues.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerRue($id) {
        var url = '{{ path('rue_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', $id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('La rue a été supprimée avec succès.', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        }
                    ).on('hide.uk.modal', function () {
                        refreshRues($('#rue'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette rue pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette rue pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    function modifierAdresse() {
        var adresseId = $('#adresseValueModif').val();
        var adresseModifName = $('#adresseModif');
        var adresseModifValide = adresseModifName.parsley().isValid();
        if (adresseModifValide) {
            var urlVerif = '{{ path('adresse_edit', {'id': 'iD'}) }}';
            urlVerif = urlVerif.replace('iD', adresseId);
            $.ajax({
                async: true,
                type: "POST",
                url: urlVerif,
                data: "newname=" + $name,
                success: function (json) {
                    if (json.success === false) {
                        window.Parsley.addValidator('adressemodif', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Erreur de modifiacation de l\'adresse.',
                                fr: "Erreur de modification de l'adresse."
                            }
                        });
                        adresseModifName.on('change', function () {
                            window.Parsley.addValidator('adressemodif', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            adresseModifName.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('adressemodif', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('L\'adresse a été modifiée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    }
                    adresseModifName.parsley().validate();
                    refreshGouvernorats($('#gouvernorat'));
                },
                error: function () {
                    adresseModifName.parsley().validate();
                }
            });
        }
        else {
            adresseModifName.parsley().validate();
        }
    }
    function refreshAdresses(select) {
        var url = '{{ path('adresse_list') }}';
        var adresses = select[0].selectize;
        adresses.clearOptions();
        $.ajax({
            url: url,
            type: 'POST',
            success: function (data) {
                if (data !== null) {
                    $.each(data, function (key, element) {
                        adresses.addOption({
                            text: element.text,
                            value: element.value
                        });
                    });
                }
                else {
                    select.html("<option>No Data </option>");
                }
            },
            error: function () {
                select.html("<option>ERROR 500</option>");
            }
        });
    }
    function supprimerAdresse($id) {
        var url = '{{ path('adresse_delete', {'id': 'iD'}) }}';
        url = url.replace('iD', $id);
        $.ajax({
            url: url,
            type: 'DELETE',
            success: function (json) {
                if (json.success) {
                    UIkit.modal.alert('L\'adresse a été supprimée avec succès.', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        }
                    ).on('hide.uk.modal', function () {
                        refreshAdresses($('#adresse'));
                    });
                }
                else {
                    UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette adresse pour des raisons de sécurité', {
                        labels: {
                            Ok: 'Fermer'
                        }
                    });
                }
            },
            error: function () {
                UIkit.modal.alert('Vous n\'avez pas le droit de supprimer cette adresse pour des raisons de sécurité', {
                    labels: {
                        Ok: 'Fermer'
                    }
                });
            }
        });
    }
    $(function () {
        var ownersDOM = $('#' + '{{ form.acquisition.bien.owners.vars.id }}');
        var representantsDOM = $('#' + '{{ form.acquisition.bien.representants.vars.id }}');
        var procurationsDOM = $('#' + '{{ form.acquisition.bien.procurations.vars.id }}');
        var picturesDOM = $('#' + '{{ form.acquisition.bien.pictures.vars.id }}');
        var papersDOM = $('#' + '{{ form.acquisition.bien.papers.vars.id }}');
        var offresDOM = $('#' + '{{ form.propositions.vars.id }}');
        var offresLocationDOM = $('#' + '{{ form.propositionsLocation.vars.id }}');
        var buildPrototypes = {
            counterOwners: ownersDOM.children().length,
            prototypeOwners: ownersDOM.attr('data-prototype'),
            owners: ownersDOM,
            counterRepresentants: representantsDOM.children().length,
            prototypeRepresentants: representantsDOM.attr('data-prototype'),
            representants: representantsDOM,
            counterProcurations: procurationsDOM.children().length,
            prototypeProcurations: procurationsDOM.attr('data-prototype'),
            procurations: procurationsDOM,
            counterPictures: picturesDOM.children().length,
            prototypePictures: picturesDOM.attr('data-prototype'),
            pictures: picturesDOM,
            counterPapers: papersDOM.children().length,
            prototypePapers: papersDOM.attr('data-prototype'),
            papers: papersDOM,
            counterOffres: offresDOM.children().length,
            prototypeOffres: offresDOM.attr('data-prototype'),
            offres: offresDOM,
            counterOffresLocation: offresLocationDOM.children().length,
            prototypeOffresLocation: offresLocationDOM.attr('data-prototype'),
            offreslocation: offresLocationDOM,
            init: function () {
                $('#addOwner').on('click', function () {
                    buildPrototypes.buildOwnerSection();
                });
                $('#addRepresentant').on('click', function () {
                    buildPrototypes.buildRepresentantSection();
                });
                $('#addProcuration').on('click', function () {
                    buildPrototypes.buildProcurationSection();
                });
                $('#addPicture').on('click', function () {
                    buildPrototypes.buildPictureSection();
                });
                $('#addPaper').on('click', function () {
                    buildPrototypes.buildPaperSection();
                });
                $('#addOffre').on('click', function () {
                    var type = $('#sbc_bienbundle_mandat_typeMandat').val();
                    if (type == '')
                        UIkit.modal.alert('Vous devez choisir le type du mandat pour pouvoir ajouter des propositions', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                    else if (type == '1' || type == '3')
                    buildPrototypes.buildOffreSection();
                    else
                        buildPrototypes.buildOffreLocationSection();
                });
                $('.btn-close').on('click', function () {
                    this.closest('div').remove();
                });
            },
            buildOwnerSection: function () {
                this.counterOwners++;
                prototypeOwnersDOM = $('<div/>').html(this.prototypeOwners).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeOwnersDOM, templateOwner());
                var block = temp.replace(/__name__/g, this.counterOwners);
                this.owners.append(block);
                this.owners.find('select').kendoComboBox({
                    filter: "contains",
                    suggest: true
                });
                this.reInit();
            },
            buildRepresentantSection: function () {
                this.counterRepresentants++;
                var prototypeRepresentantsDOM = $('<div/>').html(this.prototypeRepresentants).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeRepresentantsDOM, templateRepresentant());
                var block = temp.replace(/__name__/g, this.counterRepresentants);
                this.representants.append(block);
                this.representants.find('select').kendoComboBox({
                    filter: "contains",
                    suggest: true
                });
                this.reInit();
            },
            buildProcurationSection: function () {
                this.counterProcurations++;
                var prototypeProcurationsDOM = $('<div/>').html(this.prototypeProcurations).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeProcurationsDOM, templateProcuration());
                var block = temp.replace(/__name__/g, this.counterProcurations);
                this.procurations.append(block);
                this.procurations.find('select').kendoComboBox({
                    filter: "contains",
                    suggest: true
                });
                this.reInit();
            },
            buildPictureSection: function () {
                this.counterPictures++;
                var prototypePicturesDOM = $('<div/>').html(this.prototypePictures).contents();
                var picturesPrototype = prototypePicturesDOM.find('#sbc_bienbundle_mandat_acquisition_bien_pictures___name___pictures').attr('data-prototype');
                var temp = SFCollectionAnalyzer.buildTemplate(prototypePicturesDOM, templatePicture(this.counterPictures));
                var block = temp.replace(/__name__/g, this.counterPictures);
                this.pictures.append(block);
                this.reInit();
            },
            buildPaperSection: function () {
                this.counterPapers++;
                var prototypePapersDOM = $('<div/>').html(this.prototypePapers).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypePapersDOM, templatePaper());
                var block = temp.replace(/__name__/g, this.counterPapers);
                this.papers.append(block);
                this.reInit();
            },
            buildOffreSection: function () {
                this.counterOffres++;
                var prototypeOffresDOM = $('<div/>').html(this.prototypeOffres).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeOffresDOM, templateOffre());

                var block = temp.replace(/__name__/g, this.counterOffres);
                this.offres.append(block);
                this.reInit();
            },
            buildOffreLocationSection: function () {
                this.counterOffresLocation++;
                var prototypeOffresLocationDOM = $('<div/>').html(this.prototypeOffresLocation).contents();
                var temp = SFCollectionAnalyzer.buildTemplate(prototypeOffresLocationDOM, templateOffreLocation());

                var block = temp.replace(/__name__/g, this.counterOffresLocation);
                this.offreslocation.append(block);
                this.reInit();
            },
            reInit: function () {
                $('.btn-close').on('click', function () {
                    this.closest('div').remove();
                });
                altair_md.init();
                this.pictures.find('input[type=file]').dropify({
                    messages: {
                        'default': 'Cliquez ou glissez / déposez un fichier ici',
                        'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                        'remove': 'Supprimer',
                        'error': 'Une erreur s\'est survenue'
                    }
                });
                this.papers.find('input[type=file]').dropify({
                    messages: {
                        'default': 'Cliquez ou glissez / déposez un fichier ici',
                        'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                        'remove': 'Supprimer',
                        'error': 'Une erreur s\'est survenue'
                    }
                });
            }
        };
        buildPrototypes.init();
        setFormatNumber();
        CKEDITOR.replace('sbc_bienbundle_mandat_acquisition_bien_description', {
            height: 250
        });
        CKEDITOR.replace('sbc_bienbundle_mandat_acquisition_description', {
            height: 250
        });
        var ville = $('#ville');
        var localite = $('#localite');
        var rue = $('#rue');
        var adresse = $('#adresse');
        ville.next('div').on('click', function () {
            getVilles();
        });
        localite.next('div').on('click', function () {
            getLocalites();
        });
        rue.next('div').on('click', function () {
            getRues();
        });
        $('#sbc_bienbundle_mandat_acquisition_bien__address').next('div').on('click', function () {
            getAdresses();
        });
        if (ville.val() !== '') {
            $('#modifierVille').show();
            $('#supprimerVille').show();
            $('#ajouterLocalite').show();
        }
        if (localite.val() !== '') {
            $('#modifierLocalite').show();
            $('#supprimerLocalite').show();
            $('#ajouterRue').show();
        }
        if (rue.val() !== '') {
            $('#modifierRue').show();
            $('#supprimerRue').show();
            $('#ajouterAdresse').show();
        }
        if (adresse.text() !== '') {
            $('#modifierAdresse').show();
            $('#supprimerAdresse').show();
        }
    });
    function setFormatNumber() {
        $('.numeric').blur(function () {
            $(this).parseNumber({format: "######0.00", locale: "us"});
            $(this).formatNumber({format: "######0.00", locale: "us"});
        });
        $('.money').blur(function () {
            $(this).parseNumber({format: "#,##0.000", locale: "fr"});
            $(this).formatNumber({format: '#,##0.000', locale: 'fr'});
        });
    }
    function newEquipement() {
        var equipement = $('#equipement');
        var equipementIsValid = equipement.parsley().isValid();
        if (equipementIsValid) {
            var url = '{{ path('equipement_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "equipement=" + equipement.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('equipement', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'cet équipement existe déjà.',
                                fr: "Cet équipement équipement existe déjà"
                            }
                        });
                        equipement.on('change', function () {
                            window.Parsley.addValidator('equipement', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            equipement.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('equipement', {
                            validateString: function () {
                                return true;
                            }
                        });

                        UIkit.modal.alert('L\'équipement a été ajouté avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var eq = $('#sbc_bienbundle_mandat_acquisition_bien__equipements');
                        var equipements = eq[0].selectize;
                        equipements.addOption({
                            text: json.equipementName,
                            value: json.id
                        });
                        equipements.addItem(json.id);
                    }
                    equipement.parsley().validate();
                },
                error: function () {
                    equipement.parsley().validate();
                }
            });
        }
        else {
            equipement.parsley().validate();
        }
    }
    function newCommodite() {
        var commodite = $('#commodite');
        var commoditeIsValid = commodite.parsley().isValid();
        if (commoditeIsValid) {
            var url = '{{ path('commodite_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "commodite=" + commodite.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('commodite', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'cette commodité existe déjà.',
                                fr: "Cette commodité équipement existe déjà"
                            }
                        });
                        commodite.on('change', function () {
                            window.Parsley.addValidator('commodite', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            commodite.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('commodite', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('La commodité a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var commo = $('#sbc_bienbundle_mandat_acquisition_bien__commodites');
                        var commodites = commo[0].selectize;
                        commodites.addOption({
                            text: json.commoditeName,
                            value: json.id
                        });
                        commodites.addItem(json.id);
                    }
                    commodite.parsley().validate();
                },
                error: function () {
                    commodite.parsley().validate();
                }
            });
        }
        else {
            commodite.parsley().validate();
        }
    }
    function newAgency() {
        var agency = $('#agency');
        var agencyIsValid = agency.parsley().isValid();
        if (agencyIsValid) {
            var url = '{{ path('agency_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "agency=" + agency.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('agency', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Cette agence existe déjà.',
                                fr: "Cette agence existe déjà"
                            }
                        });
                        agency.on('change', function () {
                            window.Parsley.addValidator('agency', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            agency.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('agency', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('L\'agence a été ajoutée avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var agence = $('#sbc_bienbundle_mandat_acquisition_bien__agency');
                        var agencies = agence[0].selectize;
                        agencies.addOption({
                            text: json.agencyName,
                            value: json.id
                        });
                        agencies.addItem(json.id);
                    }
                    agency.parsley().validate();
                },
                error: function () {
                    agency.parsley().validate();
                }
            });
        }
        else {
            agency.parsley().validate();
        }
    }
    function newTypeBien() {
        var typeBien = $('#typeBien');
        var typeBienIsValid = typeBien.parsley().isValid();
        if (typeBienIsValid) {
            var url = '{{ path('typebien_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "typeBien=" + typeBien.val() + '&category=' + $('#categories').val()
                + '&furnished=' + $('#furnished').is(':checked') + '&bathroom=' + $('#bathroom').is(':checked')
                + '&equipped=' + $('#equipped').is(':checked') + '&bedroom=' + $('#bedroom').is(':checked'),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('typebien', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Ce type de bien existe déjà.',
                                fr: "Ce type de bien existe déjà"
                            }
                        });
                        typeBien.on('change', function () {
                            window.Parsley.addValidator('typebien', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            typeBien.parsley().validate();
                        });

                    } else {
                        window.Parsley.addValidator('typebien', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('Le type de bien a été ajouté avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var typeB = $('#sbc_bienbundle_mandat_acquisition_bien__typeBien');
                        var typeBiens = typeB[0].selectize;
                        typeBiens.addOption({
                            text: json.typeBienName,
                            value: json.id
                        });
                        typeBiens.addItem(json.id);
                    }
                    typeBien.parsley().validate();
                },
                error: function () {
                    typeBien.parsley().validate();
                }
            });
        }
        else {
            typeBien.parsley().validate();
        }
    }
    function newOwner() {
        var codeClient = $('#codeClient');
        var codeClientIsValid = codeClient.parsley().isValid();
        var denominationClient = $('#denominationClient');
        var identifiantClient = $('#identifiantClient');
        var telephoneClient = $('#telephoneClient');
        var addressClient = $('#addressClient');
        if (codeClientIsValid) {
            var url = '{{ path('client_add') }}';
            $.ajax({
                async: true,
                type: "POST",
                url: url,
                data: "code=" + codeClient.val() + '&denomination=' + denominationClient.val()
                + '&identifiant=' + identifiantClient.val() + '&telephone=' + telephoneClient.val()
                + '&address=' + addressClient.val(),
                success: function (json) {
                    if (json.success === false || json.message !== '') {
                        window.Parsley.addValidator('codeclient', {
                            validateString: function () {
                                return false;
                            },
                            messages: {
                                en: 'Ce propriétaire existe déjà.',
                                fr: "Ce propriétaire existe déjà"
                            }
                        });
                        codeClient.on('change', function () {
                            window.Parsley.addValidator('codeclient', {
                                validateString: function () {
                                    return true;
                                }
                            });
                            codeClient.parsley().validate();
                        });
                    } else {
                        window.Parsley.addValidator('codeclient', {
                            validateString: function () {
                                return true;
                            }
                        });
                        UIkit.modal.alert('Le propriétaire a été ajouté avec succès', {
                            labels: {
                                Ok: 'Fermer'
                            }
                        });
                        var owner = $('#sbc_bienbundle_mandat_acquisition_bien__owner');
                        var owners = owner[0].selectize;
                        owners.addOption({
                            text: json.clientName,
                            value: json.id
                        });
                        owners.addItem(json.id);
                    }
                    codeClient.parsley().validate();
                },
                error: function () {
                    codeClient.parsley().validate();
                }
            });
        }
        else {
            codeClient.parsley().validate();
        }
    }
    function templateProcuration() {
        return '' +
            '<div class="uk-width-medium-2-4 bloc">' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label> Date procuration</label>' +
            '#dateProcuration#' +
            '</div>' +
            '</div>' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label> Lieu</label>' +
            '#lieu#' +
            '</div>' +
            '</div>' +

            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label> Donne procuration à</label>' +
            '#representant#' +
            '</div>' +
            '</div>' +
            '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
            '</div>';
    }
    function templateRepresentant() {
        return '<div class="uk-width-medium-1-4 bloc">' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label>Propriétaire</label>' +
            '#client#' +
            '</div>' +
            '</div>' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label>Representant</label>' +
            '#representant#' +
            '</div>' +
            '</div>' +
            '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
            '</div>'
            ;
    }
    function templateOwner() {
        return '<div class="uk-width-medium-2-4 bloc">' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label>Propriétaire</label>' +
            '#client#' +
            '</div>' +
            '</div>' +
            '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
            '</div>'
            ;
    }
    function templatePicture(counter) {
        return '<div class="uk-width-medium-4-4 bloc" style="margin-top: 25px">' +
            '<div class="uk-grid"  id="bloc_' + counter + '">' +
            '<div class="uk-width-medium-4-4 bloc">' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label>Pièce ' + counter + '</label>' +
            '<a onclick="addImg(' + counter + ')"><i class="material-icons md-24">add</i></a>' +
            '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
            '#bigDesciption#' +
            '<span></span>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '<hr>'

            ;
    }
    function templatePaper() {
        return '<div class="uk-width-medium-4-4">' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label></label>' +
            '#file#' +
            '<span></span>' +
            '</div>' +
            '</div>' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label></label>' +
            '#description#' +
            '<span></span>' +
            '</div>' +
            '</div>' +
            '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
            '</div>' +
            '<hr>';


    }

    $(function () {
        var picture = $('#sbc_bienbundle_mandat_acquisition_bien_mainPictureFile');
        $('.dropify-clear').on('click', function () {
            picture.prop('required', false);
        });
        picture.dropify({
            {#defaultFile: '{{ vich_uploader_asset(nouvelle, 'mainPictureFile') }}',#}
            messages: {
                'default': 'Cliquez ou glissez / déposez un fichier ici',
                'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                'remove': 'Supprimer',
                'error': 'Une erreur s\'est survenue'
            }
        });
        var domTitle = $('#sbc_bienbundle_mandat_acquisition_bien_title');
        var oldtitle = domTitle.val().toUpperCase();
        domTitle.on('change', function () {
            var title = domTitle.val().toUpperCase();
            var url = '{{ path('bien_index', {'name': 'namE'}) }}';
            url = url.replace('namE', title);
            if (title !== oldtitle) {
                $.ajax({
                    async: true,
                    type: "POST",
                    url: url,
                    success: function (json) {
                        if (json.success) {
                            window.Parsley.addValidator('title', {
                                validateString: function () {
                                    return false;
                                },
                                messages: {
                                    en: 'Ce bien existe déjà',
                                    fr: "Ce bien existe déjà"
                                }
                            });
                        } else {
                            window.Parsley.addValidator('title', {
                                validateString: function () {
                                    return true;
                                }
                            });
                        }
                        domTitle.parsley().validate();
                    }
                });
            }
        });

    });


    $(function () {

        $('.kendoMultiSelect').kendoMultiSelect({
            filter: "contains",
            suggest: true
        });
//        $('#mandatParente').hide();
        //Conformité
        var isConforme0 = $('#sbc_bienbundle_mandat_isConforme_0');
        var isConforme1 = $('#sbc_bienbundle_mandat_isConforme_1');
        var isNotConformeFor = $("#sbc_bienbundle_mandat_isNotConformeFor");
        if (isConforme0.checked) {
            $('#isNotConformeFor').hide();
            isNotConformeFor.prop('required', false);
        } else if (isConforme1.checked) {
            $('#isNotConformeFor').show();
            isNotConformeFor.prop('required', true);
        } else {
            $('#isNotConformeFor').hide();
            isNotConformeFor.prop('required', false);
        }
        isConforme0.on('ifClicked', function () {
            $('#isNotConformeFor').hide();
            isNotConformeFor.prop('required', false);
            isNotConformeFor.val("");
        });
        isConforme1.on('ifClicked', function () {
            $('#isNotConformeFor').show();
            isNotConformeFor.prop('required', true);
        });
        //Hypotheque
        var hypotheque0 = $('#sbc_bienbundle_mandat_hypotheque_0');
        var hypotheque1 = $('#sbc_bienbundle_mandat_hypotheque_1');
        var hypothequeFor = $("#sbc_bienbundle_mandat_hypothequeFor");
        if (hypotheque0.checked) {
            $('#hypothequeFor').hide();
            hypothequeFor.prop('required', false);
        }
        else {
            $('#hypothequeFor').hide();
            hypothequeFor.prop('required', false);
        }
        hypotheque0.on('ifClicked', function () {
            $('#hypothequeFor').hide();
            hypothequeFor.prop('required', false);
            hypothequeFor.val("");
        });

        hypotheque1.on('ifClicked', function () {
            $('#hypothequeFor').show();
            hypothequeFor.prop('required', true);
        });
        //loué
        var etatBien0 = $('#sbc_bienbundle_mandat_etatBien_0');
        var etatBien2 = $('#sbc_bienbundle_mandat_etatBien_2');
        var loueA = $("#sbc_bienbundle_mandat_loueA");
        var loyeMensuel = $("#sbc_bienbundle_mandat_loyeMensuel");
        var dateFinLoyer = $("#sbc_bienbundle_mandat_dateFinLoyer");
        if (etatBien0.checked) {
            $('#loueA').hide();
            loyeMensuel.prop('required', false);
            dateFinLoyer.prop('required', false);

        } else if (etatBien2.checked) {
            $('#loueA').show();
            loyeMensuel.prop('required', true);
            dateFinLoyer.prop('required', true);

        } else {
            $('#loueA').hide();
            loyeMensuel.prop('required', false);
            dateFinLoyer.prop('required', false);
        }
        etatBien0.on('ifClicked', function () {
            $('#loueA').hide();
            loueA.prop('required', false);
            loyeMensuel.prop('required', false);
            dateFinLoyer.prop('required', false);
            loueA.val("");
            loyeMensuel.val("");
            dateFinLoyer.val("");
        });
        $('#sbc_bienbundle_mandat_etatBien_1').on('ifClicked', function () {
            $('#loueA').hide();
            loueA.prop('required', false);
            loyeMensuel.prop('required', false);
            dateFinLoyer.prop('required', false);
            loueA.val("");
            loyeMensuel.val("");
            dateFinLoyer.val("");
        });
        etatBien2.on('ifClicked', function () {
            $('#loueA').show();
            loueA.prop('required', true);
            loyeMensuel.prop('required', true);
            dateFinLoyer.prop('required', true);
        });
        //contacter
        var visite0 = $('#sbc_bienbundle_mandat_visite_0');
        var visite1 = $('#sbc_bienbundle_mandat_visite_1');
        var contactVisite = $("#sbc_bienbundle_mandat_contactVisite");
        if (visite0.checked) {
            $('#contactVisite').hide();
            contactVisite.prop('required', false);

        } else if (visite1.checked) {
            $('#contactVisite').show();
            contactVisite.prop('required', true);

        } else {
            $('#contactVisite').hide();
            contactVisite.prop('required', false);
        }
        visite0.on('ifClicked', function () {
            $('#contactVisite').hide();
            contactVisite.prop('required', false);
            contactVisite.val();
        });
        visite1.on('ifClicked', function () {
            $('#contactVisite').show();
            contactVisite.prop('required', true);
            contactVisite.val();
        });
        $('#sbc_bienbundle_mandat_visite_2').on('ifClicked', function () {
            $('#contactVisite').hide();
            contactVisite.prop('required', false);
            contactVisite.val();
        });
        setFormatNumber();
        CKEDITOR.replace('sbc_bienbundle_mandat_note', {
            height: 250
        });
    });

    function checkType() {
        if ($('#sbc_bienbundle_mandat_acquisition_bien_typeBien').val() == '1') {
            $('#appartements').show();
        }
        else {
            $('#appartements').hide();
        }

    }


    function addImg(counter) {

        var container = $('#bloc_' + counter);
        var childs = container.children().length + 1;
        picturesDOM = $('#sbc_bienbundle_mandat_acquisition_bien_pictures');
        papersDOM = $('#sbc_bienbundle_mandat_acquisition_bien_papers');
        prototypePictures = picturesDOM.attr('data-prototype');
        var prototypePicturesDOM = $('<div/>').html(this.prototypePictures).contents();
        var picturesPrototype = prototypePicturesDOM.find('#sbc_bienbundle_mandat_acquisition_bien_pictures___name___pictures').attr('data-prototype');
        var ImgDom = $('<div/>').html(picturesPrototype).contents();
        console.log(picturesPrototype);
        var temp = SFCollectionAnalyzer.buildTemplate(ImgDom, templateImg());
        var block = temp.replace(/__name__/g, counter);
        block = block.replace(/__second__/g, childs);
        container.append(block);
        $('.btn-close').on('click', function () {
            this.closest('div').remove();
        });
        altair_md.init();
        container.find('input[type=file]').dropify({
            messages: {
                'default': 'Cliquez ou glissez / déposez un fichier ici',
                'replace': 'Cliquez ou glissez / déposez un fichier ici pour remplacer',
                'remove': 'Supprimer',
                'error': 'Une erreur s\'est survenue'
            }
        });
    }

    function templateImg() {
        return '<div class="uk-width-medium-1-4">' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label></label>' +
            '#picture#' +
            '<span></span>' +
            '</div>' +
            '</div>' +
            '<div class="uk-form-row">' +
            '<div class="parsley-row">' +
            '<label></label>' +
            '#description#' +
            '<span></span>' +
            '</div>' +
            '</div>' +
            '<a class="btn-close"><i class="material-icons md-24">&#xE872;</i></a>' +
            '</div>';


    }
    $(document).ready(function () {
        hideDivs();
        $('#procurations_div').hide();
        $('#societe_div').hide();
    });
    function hideDivs() {
        $('#vente_card').hide();
        $('#location_card').hide();
        $('#fc_card').hide();
        $('#de_card').hide();


    }
    function mandatType() {
        hideDivs();
        var type = $('#sbc_bienbundle_mandat_typeMandat').val();
        switch (type) {
            case '1' :
                $('#vente_card').show();
                break;
            case '2' :
                $('#location_card').show();
                break;
            case '3' :
                $('#fc_card').show();
                break;
            case '4' :
                $('#de_card').show();
                break;
            default :


        }

    }

    function displayedChanged() {
        $('#prixAffiche_span').html($('#sbc_bienbundle_mandat_acquisition_bien_displayPrice').val())
    }
    function priceChanged() {
        $('#prixClient_span').html($('#sbc_bienbundle_mandat_acquisition_bien_price').val())
    }
    function estimatedPriceChanged() {
        $('#prixGd_span').html($('#sbc_bienbundle_mandat_acquisition_bien_estimatedPrice').val())
    }

    function dateStart() {
        $('#dateStart_span').html($('#sbc_bienbundle_mandat_dateDebutEffetMandat').val())
    }

    function dateEnd() {
        $('#dateEnd_span').html($('#sbc_bienbundle_mandat_dateExpirationEffetMandat').val())
    }

    function qualityChanged() {
        var type = $('#sbc_bienbundle_mandat_acquisition_bien_representants').val();
        switch (type) {
            case 'Propriétaire' :
                $('#procurations_div').hide();
                $('#societe_div').hide();
                break;
            case 'Par procuration' :
                $('#procurations_div').show();
                $('#societe_div').hide();
                break;
            case 'Représentant de société' :
                $('#procurations_div').hide();
                $('#societe_div').show();
                break;
            default :


        }

    }
    function templateOffre() {
        return `
<h4>Offre & conditions de paiement </h4>
<p style="line-height: 30px;"> 1) Prix offert : #proposedPriceText# <br>
Dinars Tout Taxes Comprise ( #proposedPrice# DT TTC). <br>
2) Le montant de la vente sera réglé comme suit :#avance# % du prix à titre d'avance sous forme </p>#avanceType#
<p style="line-height: 30px;">et le solde du prix sera versé au vendeur sous forme </p> #soldeType# <p style="line-height: 30px;">
* Autre modalité de paiment : #modalite# <br>
3) l'acte de vente devre etre signé entre #acteMin# et #acteMax# mois de l'acceptation de l'offre d'achat ou de la signature de la promesse <br>
de vente . <br>
4) Les impots , taxes , frais d'enregistrement et des honoraires d'avocat seront à la charge de l'acheteur , sauf accord contraire des <br>
deux parties. <br>
5) Bien sera consigné :
#consigne_0#  <label> A la signature du contrat </label>
 #consigne_1# <label> Le</label> #consigneDate# <br>
 #consigne_2# <label>Occupé du locataire avec l'accord de l'acheteur tout en respectant le contrat de location en cours</label>
 <br>

* Autre conditions #conditions#
<br>
<b>Honoraires de l'agence immobilière & Acompte sur offre</b>
<br>
1) Soit #honorairesTTC# Dinars TTC ( #honorairesHT# DT TTC). <br>
2) Un acompte de 20% sur les honoraires dus à lagence immobilière devra etre remis lors de la signature de la <br>
présente <br>
Soit #acompteTTC# Dinars ( #acompteHT# DT)
<br>
<b>Acceptation</b>
<br>
Je soussigné(e) #name#<br>
Titulaire CIN N° #identity# Délivrée le #delivered# <br>
</p>
<div style="width:100%" ;>
#quality#
</div>
<p style="line-height: 30px;">
* Pour le compte de la société : #society# <br>
* Pour le compte de Mr/Mme : #account# <br>
Déclare avoir pris acte du contenu de l'offre de : </p><br>
<div style="width:100%">
#radio_0# <label>L'accepter intégralement</label><br>
#radio_1# <label>La refuser</label><br>
#radio_2# <label>L'accepter sous réserve</label>#reserve#<br>
#radio_3# <label>Contre-offre suivante</label>#contreOffre#<br>
</div>
<br>
<div >
<p style="margin-top: 35px">
Je soussigné(e) #nameO#<br>
Titulaire CIN N° #identityO# Délivrée le #deliveredO# <br>
</p>
<div style="width:100%" ;>
#qualityO#
</div>
<p style="line-height: 30px;">
* Pour le compte de la société : #societyO# <br>
* Pour le compte de Mr/Mme : #accountO# <br>
Déclare avoir pris acte du contenu de l'offre de : </p><br>
<div style="width:100%">
#radioO_0# <label>L'accepter intégralement</label><br>
#radioO_1# <label>La refuser</label><br>
#radioO_2# <label>L'accepter sous réserve</label>#reserveO#<br>
#radioO_3# <label>Contre-offre suivante</label>#contreOffreO#<br>
</div>
</div>


            `;


    }
    function templateOffreLocation() {
        return `
<h4>Offre & conditions de paiement </h4>
<p style="line-height: 30px;">
1) Type de contrat de location : #contratType# <br>
2) Usage : #usage# <br>
3) Loyer offert #loyerHT# Dinars Hors taxes ( #loyerTTC# DT HT) par mois <br>
4) Retenue à la source de 15% du loyer : #retenue_0# A la charge du propriétaire des murs
 #retenue_1# A la charge du locataire <br>
5) Modalité de paiement de loyer : le #modalite# de chaque  #modalitePer_0# mois
#modalitePer_1# trimestre #modalitePer_2# semestre #modalitePer_3# année <br>
6) Dépot de garantie : le propriétaire demande un monatnt égal à #garantie# mois de loyer au locataire à titre de caution . <br>
Cette caution sera restituée à la fin du bail lors de la remise des clés au propriétaire , après établissement de l'état des lieux de <br>
sortie et déduction des frais de réparation ou remise en état du bien ou de règlement des factures impayées d'électricité , d'eau <br>
ou d'autre , s'il y a lieu . <br>
7) Dans le cas de location pluri annuelle , le loyer sera augmenté de #augmentation# % par #augmentationPer# an(s).<br>
8) Date d'entée au bien : #entry_0# immédiate ,  #entry_1# Date souhaitée le  #entryDate# <br>
9) Les impots , taxes  , frais d'enregistrement et les honoraires d'avocat seront à la charge du locataire , sauf accord contraire des <br>
deux parties . <br>
</p>
<h4> * Dans le cas d'une location avec droit d'entrée (pas-de-porte)</h4>
<p style="line-height: 30px;">
10) Le prix de droit d'entrée (pas-de-porte) offert : #entryDETTC# Dinars TTC ( #prixDEHT# DT TTC). <br>
11) La totalité du prix de droit d'entrée (pas-de-porte) sera versé au propriétaire au moyen : #moyenDEType_0# chèque #moyenDEType_1# espèce <br>
ou le montant sera reglé comme suit : #avanceDE# % du prix à titre d'avance sous forme <br>
#avanceType_0# Espèce #avanceType_1# Chèque  <br>
Autre modalité de paiement : #modaliteDE# <br>
 Autres conditions : #conditionDE# <br>
 </p>
 <h4>Irrévocabilité de l'offre de location</h4> <br>
 <p style="line-height: 30px;">
 L'offre présente est irrévocable durant #irrevocabilite# jours , à partir de la signature de la présente offre et sera résiliée dans le cas ou <br>
 le propriétaire ou l'agent immobilier n'ont pas communiqué l'acceptation de l'offre .
<br>
<b>Honoraires de l'agence immobilière & Acompte sur offre</b>
<br>
1) Soit #honorairesTTC# Dinars TTC ( #honorairesHT# DT TTC). <br>
2) Un acompte de 20% sur les honoraires dus à lagence immobilière devra etre remis lors de la signature de la <br>
présente <br>
Soit #acompteTTC# Dinars ( #acompteHT# DT)
<br>
<b>Acceptation</b>
<br>
Je soussigné(e) #name#<br>
Titulaire CIN N° #identity# Délivrée le #delivered# <br>
</p>
<div style="width:100%" ;>
#quality#
</div>
<p style="line-height: 30px;">
* Pour le compte de la société : #society# <br>
* Pour le compte de Mr/Mme : #account# <br>
Déclare avoir pris acte du contenu de l'offre de : </p><br>
<div style="width:100%">
#radio_0# <label>L'accepter intégralement</label><br>
#radio_1# <label>La refuser</label><br>
#radio_2# <label>L'accepter sous réserve</label>#reserve#<br>
#radio_3# <label>Contre-offre suivante</label>#contreOffre#<br>
</div>
<br>
<div >
<p style="margin-top: 35px">
Je soussigné(e) #nameO#<br>
Titulaire CIN N° #identityO# Délivrée le #deliveredO# <br>
</p>
<div style="width:100%" ;>
#qualityO#
</div>
<p style="line-height: 30px;">
* Pour le compte de la société : #societyO# <br>
* Pour le compte de Mr/Mme : #accountO# <br>
Déclare avoir pris acte du contenu de l'offre de : </p><br>
<div style="width:100%">
#radioO_0# <label>L'accepter intégralement</label><br>
#radioO_1# <label>La refuser</label><br>
#radioO_2# <label>L'accepter sous réserve</label>#reserveO#<br>
#radioO_3# <label>Contre-offre suivante</label>#contreOffreO#<br>
</div>
</div>


            `;


    }
</script>